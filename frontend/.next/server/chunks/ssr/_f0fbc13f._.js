module.exports=[60201,(a,b,c)=>{"use strict";b.exports=function(b){function c(a,b,c,d){return new dV(a,b,c,d)}function d(){}function e(a){var b="https://react.dev/errors/"+a;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do 0!=(4098&(b=a).flags)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function g(a){if(f(a)!==a)throw Error(e(188))}function h(a){var b=a.alternate;if(!b){if(null===(b=f(a)))throw Error(e(188));return b!==a?null:a}for(var c=a,d=b;;){var h=c.return;if(null===h)break;var i=h.alternate;if(null===i){if(null!==(d=h.return)){c=d;continue}break}if(h.child===i.child){for(i=h.child;i;){if(i===c)return g(h),a;if(i===d)return g(h),b;i=i.sibling}throw Error(e(188))}if(c.return!==d.return)c=h,d=i;else{for(var j=!1,k=h.child;k;){if(k===c){j=!0,c=h,d=i;break}if(k===d){j=!0,d=h,c=i;break}k=k.sibling}if(!j){for(k=i.child;k;){if(k===c){j=!0,c=i,d=h;break}if(k===d){j=!0,d=i,c=h;break}k=k.sibling}if(!j)throw Error(e(189))}}if(c.alternate!==d)throw Error(e(190))}if(3!==c.tag)throw Error(e(188));return c.stateNode.current===c?a:b}function i(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=er&&a[er]||a["@@iterator"])?a:null}function j(a){if(null==a)return null;if("function"==typeof a)return a.$$typeof===es?null:a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case ef:return"Fragment";case eh:return"Profiler";case eg:return"StrictMode";case el:return"Suspense";case em:return"SuspenseList";case ep:return"Activity"}if("object"==typeof a)switch(a.$$typeof){case ee:return"Portal";case ej:return a.displayName||"Context";case ei:return(a._context.displayName||"Context")+".Consumer";case ek:var b=a.render;return(a=a.displayName)||(a=""!==(a=b.displayName||b.name||"")?"ForwardRef("+a+")":"ForwardRef"),a;case en:return null!==(b=a.displayName||null)?b:j(a.type)||"Memo";case eo:b=a._payload,a=a._init;try{return j(a(b))}catch(a){}}return null}function k(a){return{current:a}}function l(a){0>gv||(a.current=gu[gv],gu[gv]=null,gv--)}function m(a,b){gu[++gv]=a.current,a.current=b}function n(a){var b=42&a;if(0!==b)return b;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&a;case 262144:case 524288:case 1048576:case 2097152:return 3932160&a;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&a;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return a}}function o(a,b,c){var d=a.pendingLanes;if(0===d)return 0;var e=0,f=a.suspendedLanes,g=a.pingedLanes;a=a.warmLanes;var h=0x7ffffff&d;return 0!==h?0!=(d=h&~f)?e=n(d):0!=(g&=h)?e=n(g):c||0!=(c=h&~a)&&(e=n(c)):0!=(h=d&~f)?e=n(h):0!==g?e=n(g):c||0!=(c=d&~a)&&(e=n(c)),0===e?0:0!==b&&b!==e&&0==(b&f)&&((f=e&-e)>=(c=b&-b)||32===f&&0!=(4194048&c))?b:e}function p(a,b){return 0==(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&b)}function q(){var a=gC;return 0==(0x3c00000&(gC<<=1))&&(gC=4194304),a}function r(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}function s(a,b){a.pendingLanes|=b,0x10000000!==b&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function t(a,b,c){a.pendingLanes|=b,a.suspendedLanes&=~b;var d=31-gx(b);a.entangledLanes|=b,a.entanglements[d]=0x40000000|a.entanglements[d]|261930&c}function u(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-gx(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b),c&=~e}}function v(a,b){var c=b&-b;return 0!=((c=0!=(42&c)?1:w(c))&(a.suspendedLanes|b))?0:c}function w(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:a=128;break;case 0x10000000:a=0x8000000;break;default:a=0}return a}function x(a){return 2<(a&=-a)?8<a?0!=(0x7ffffff&a)?32:0x10000000:8:2}function y(a){if(void 0===f6)try{throw Error()}catch(a){var b=a.stack.trim().match(/\n( *(at )?)/);f6=b&&b[1]||"",f7=-1<a.stack.indexOf("\n    at")?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+f6+a+f7}function z(a,b){if(!a||gR)return"";gR=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(b){var c=function(){throw Error()};if(Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(c,[])}catch(a){var d=a}Reflect.construct(a,[],c)}else{try{c.call()}catch(a){d=a}a.call(c.prototype)}}else{try{throw Error()}catch(a){d=a}(c=a())&&"function"==typeof c.catch&&c.catch(function(){})}}catch(a){if(a&&d&&"string"==typeof a.stack)return[a.stack,d.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var e=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");e&&e.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=d.DetermineComponentFrameRoot(),g=f[0],h=f[1];if(g&&h){var i=g.split("\n"),j=h.split("\n");for(e=d=0;d<i.length&&!i[d].includes("DetermineComponentFrameRoot");)d++;for(;e<j.length&&!j[e].includes("DetermineComponentFrameRoot");)e++;if(d===i.length||e===j.length)for(d=i.length-1,e=j.length-1;1<=d&&0<=e&&i[d]!==j[e];)e--;for(;1<=d&&0<=e;d--,e--)if(i[d]!==j[e]){if(1!==d||1!==e)do if(d--,e--,0>e||i[d]!==j[e]){var k="\n"+i[d].replace(" at new "," at ");return a.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",a.displayName)),k}while(1<=d&&0<=e)break}}}finally{gR=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?y(c):""}function A(a){try{var b="",c=null;do b+=function(a,b){switch(a.tag){case 26:case 27:case 5:return y(a.type);case 16:return y("Lazy");case 13:return a.child!==b&&null!==b?y("Suspense Fallback"):y("Suspense");case 19:return y("SuspenseList");case 0:case 15:return z(a.type,!1);case 11:return z(a.type.render,!1);case 1:return z(a.type,!0);case 31:return y("Activity");default:return""}}(a,c),c=a,a=a.return;while(a)return b}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}function B(a,b){if("object"==typeof a&&null!==a){var c=gS.get(a);return void 0!==c?c:(b={value:a,source:b,stack:A(b)},gS.set(a,b),b)}return{value:a,source:b,stack:A(b)}}function C(a,b){gT[gU++]=gW,gT[gU++]=gV,gV=a,gW=b}function D(a,b,c){gX[gY++]=g$,gX[gY++]=g_,gX[gY++]=gZ,gZ=a;var d=g$;a=g_;var e=32-gx(d)-1;d&=~(1<<e),c+=1;var f=32-gx(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32),d>>=g,e-=g,g$=1<<32-gx(b)+e|c<<e|d,g_=f+a}else g$=1<<f|c<<e|d,g_=a}function E(a){null!==a.return&&(C(a,1),D(a,1,0))}function F(a){for(;a===gV;)gV=gT[--gU],gT[gU]=null,gW=gT[--gU],gT[gU]=null;for(;a===gZ;)gZ=gX[--gY],gX[gY]=null,g_=gX[--gY],gX[gY]=null,g$=gX[--gY],gX[gY]=null}function G(a,b){gX[gY++]=g$,gX[gY++]=g_,gX[gY++]=gZ,g$=b.id,g_=b.overflow,gZ=a}function H(a,b){m(g2,b),m(g1,a),m(g0,null),a=ez(b),l(g0),m(g0,a)}function I(){l(g0),l(g1),l(g2)}function J(a){null!==a.memoizedState&&m(g3,a);var b=g0.current,c=eA(b,a.type);b!==c&&(m(g1,a),m(g0,c))}function K(a){g1.current===a&&(l(g0),l(g1)),g3.current===a&&(l(g3),eL?e2._currentValue=e1:e2._currentValue2=e1)}function L(a){var b=Error(e(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML",""));throw R(B(b,a)),g9}function M(a,b){if(!eO)throw Error(e(175));fR(a.stateNode,a.type,a.memoizedProps,b,a)||L(a,!0)}function N(a){for(g4=a.return;g4;)switch(g4.tag){case 5:case 31:case 13:g8=!1;return;case 27:case 3:g8=!0;return;default:g4=g4.return}}function O(a){if(!eO||a!==g4)return!1;if(!g6)return N(a),g6=!0,!1;var b=a.tag;if(go?3!==b&&27!==b&&(5!==b||f5(a.type)&&!eG(a.type,a.memoizedProps))&&g5&&L(a):3!==b&&(5!==b||f5(a.type)&&!eG(a.type,a.memoizedProps))&&g5&&L(a),N(a),13===b){if(!eO)throw Error(e(316));if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(e(317));g5=fW(a)}else if(31===b){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(e(317));g5=fV(a)}else g5=go&&27===b?fH(a.type,g5):g4?fG(a.stateNode):null;return!0}function P(){eO&&(g5=g4=null,g6=!1)}function Q(){var a=g7;return null!==a&&(null===iD?iD=a:iD.push.apply(iD,a),g7=null),a}function R(a){null===g7?g7=[a]:g7.push(a)}function S(a,b,c){eL?(m(ha,b._currentValue),b._currentValue=c):(m(ha,b._currentValue2),b._currentValue2=c)}function T(a){var b=ha.current;eL?a._currentValue=b:a._currentValue2=b,l(ha)}function U(a,b,c){for(;null!==a;){var d=a.alternate;if((a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b),a===c)break;a=a.return}}function V(a,b,c,d){var f=a.child;for(null!==f&&(f.return=a);null!==f;){var g=f.dependencies;if(null!==g){var h=f.child;g=g.firstContext;a:for(;null!==g;){var i=g;g=f;for(var j=0;j<b.length;j++)if(i.context===b[j]){g.lanes|=c,null!==(i=g.alternate)&&(i.lanes|=c),U(g.return,c,a),d||(h=null);break a}g=i.next}}else if(18===f.tag){if(null===(h=f.return))throw Error(e(341));h.lanes|=c,null!==(g=h.alternate)&&(g.lanes|=c),U(h,c,a),h=null}else h=f.child;if(null!==h)h.return=f;else for(h=f;null!==h;){if(h===a){h=null;break}if(null!==(f=h.sibling)){f.return=h.return,h=f;break}h=h.return}f=h}}function W(a,b,c,d){a=null;for(var f=b,g=!1;null!==f;){if(!g){if(0!=(524288&f.flags))g=!0;else if(0!=(262144&f.flags))break}if(10===f.tag){var h=f.alternate;if(null===h)throw Error(e(387));if(null!==(h=h.memoizedProps)){var i=f.type;gO(f.pendingProps.value,h.value)||(null!==a?a.push(i):a=[i])}}else if(f===g3.current){if(null===(h=f.alternate))throw Error(e(387));h.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(null!==a?a.push(e2):a=[e2])}f=f.return}null!==a&&V(b,a,c,d),b.flags|=262144}function X(a){for(a=a.firstContext;null!==a;){var b=a.context;if(!gO(eL?b._currentValue:b._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function Y(a){hb=a,hc=null,null!==(a=a.dependencies)&&(a.firstContext=null)}function Z(a){return _(hb,a)}function $(a,b){return null===hb&&Y(a),_(a,b)}function _(a,b){var c=eL?b._currentValue:b._currentValue2;if(b={context:b,memoizedValue:c,next:null},null===hc){if(null===a)throw Error(e(308));hc=b,a.dependencies={lanes:0,firstContext:b},a.flags|=524288}else hc=hc.next=b;return c}function aa(){return{controller:new hd,data:new Map,refCount:0}}function ab(a){a.refCount--,0===a.refCount&&he(hf,function(){a.controller.abort()})}function ac(){}function ad(a){a!==hi&&null===a.next&&(null===hi?hh=hi=a:hi=hi.next=a),hk=!0,hj||(hj=!0,e4?e5(function(){0!=(6&il)?gD(gI,af):ag()}):gD(gI,af))}function ae(a,b){if(!hl&&hk){hl=!0;do for(var c=!1,d=hh;null!==d;){if(!b)if(0!==a){var e=d.pendingLanes;if(0===e)var f=0;else{var g=d.suspendedLanes,h=d.pingedLanes;f=0xc000095&(f=(1<<31-gx(42|a)+1)-1&(e&~(g&~h)))?0xc000095&f|1:f?2|f:0}0!==f&&(c=!0,aj(d,f))}else f=ip,0==(3&(f=o(d,d===im?f:0,null!==d.cancelPendingCommit||d.timeoutHandle!==eK)))||p(d,f)||(c=!0,aj(d,f));d=d.next}while(c)hl=!1}}function af(){ag()}function ag(){hk=hj=!1;var a=0;0!==hm&&eU()&&(a=hm);for(var b=gH(),c=null,d=hh;null!==d;){var e=d.next,f=ah(d,b);0===f?(d.next=null,null===c?hh=e:c.next=e,null===e&&(hi=c)):(c=d,(0!==a||0!=(3&f))&&(hk=!0)),d=e}0!==iK&&5!==iK||ae(a,!1),0!==hm&&(hm=0)}function ah(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=-0x3c00001&a.pendingLanes;0<f;){var g=31-gx(f),h=1<<g,i=e[g];-1===i?(0==(h&c)||0!=(h&d))&&(e[g]=function(a,b){switch(a){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;default:return -1}}(h,b)):i<=b&&(a.expiredLanes|=h),f&=~h}if(b=im,c=ip,c=o(a,a===b?c:0,null!==a.cancelPendingCommit||a.timeoutHandle!==eK),d=a.callbackNode,0===c||a===b&&(2===iq||9===iq)||null!==a.cancelPendingCommit)return null!==d&&null!==d&&gE(d),a.callbackNode=null,a.callbackPriority=0;if(0==(3&c)||p(a,c)){if((b=c&-c)===a.callbackPriority)return b;switch(null!==d&&gE(d),x(c)){case 2:case 8:c=gJ;break;case 32:default:c=gK;break;case 0x10000000:c=gL}return c=gD(c,d=ai.bind(null,a)),a.callbackPriority=b,a.callbackNode=c,b}return null!==d&&null!==d&&gE(d),a.callbackPriority=2,a.callbackNode=null,2}function ai(a,b){if(0!==iK&&5!==iK)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(dM()&&a.callbackNode!==c)return null;var d=ip;return 0===(d=o(a,a===im?d:0,null!==a.cancelPendingCommit||a.timeoutHandle!==eK))?null:(dq(a,d,b),ah(a,gH()),null!=a.callbackNode&&a.callbackNode===c?ai.bind(null,a):null)}function aj(a,b){if(dM())return null;dq(a,b,!0)}function ak(){if(0===hm){var a=hp;0===a&&(a=gA,0==(261888&(gA<<=1))&&(gA=256)),hm=a}return hm}function al(){if(0==--ho&&null!==hn){null!==hq&&(hq.status="fulfilled");var a=hn;hn=null,hp=0,hq=null;for(var b=0;b<a.length;b++)(0,a[b])()}}function am(){var a=hs.current;return null!==a?a:im.pooledCache}function an(a,b){null===b?m(hs,hs.current):m(hs,b.pool)}function ao(){var a=am();return null===a?null:{parent:eL?hg._currentValue:hg._currentValue2,pool:a}}function ap(a,b){if(gO(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!gQ.call(b,e)||!gO(a[e],b[e]))return!1}return!0}function aq(a){return"fulfilled"===(a=a.status)||"rejected"===a}function ar(a,b,c){switch(void 0===(c=a[c])?a.push(b):c!==b&&(b.then(ac,ac),b=c),b.status){case"fulfilled":return b.value;case"rejected":throw au(a=b.reason),a;default:if("string"==typeof b.status)b.then(ac,ac);else{if(null!==(a=im)&&100<a.shellSuspendCounter)throw Error(e(482));(a=b).status="pending",a.then(function(a){if("pending"===b.status){var c=b;c.status="fulfilled",c.value=a}},function(a){if("pending"===b.status){var c=b;c.status="rejected",c.reason=a}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw au(a=b.reason),a}throw hx=b,ht}}function as(a){try{return(0,a._init)(a._payload)}catch(a){if(null!==a&&"object"==typeof a&&"function"==typeof a.then)throw hx=a,ht;throw a}}function at(){if(null===hx)throw Error(e(459));var a=hx;return hx=null,a}function au(a){if(a===ht||a===hv)throw Error(e(483))}function av(a){var b=hz;return hz+=1,null===hy&&(hy=[]),ar(hy,a,b)}function aw(a,b){a.ref=void 0!==(b=b.props.ref)?b:null}function ax(a,b){if(b.$$typeof===ec)throw Error(e(525));throw Error(e(31,"[object Object]"===(a=Object.prototype.toString.call(b))?"object with keys {"+Object.keys(b).join(", ")+"}":a))}function ay(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function d(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function f(a){for(var b=new Map;null!==a;)null!==a.key?b.set(a.key,a):b.set(a.index,a),a=a.sibling;return b}function g(a,b){return(a=dX(a,b)).index=0,a.sibling=null,a}function h(b,c,d){return(b.index=d,a)?null!==(d=b.alternate)?(d=d.index)<c?(b.flags|=0x4000002,c):d:(b.flags|=0x4000002,c):(b.flags|=1048576,c)}function j(b){return a&&null===b.alternate&&(b.flags|=0x4000002),b}function k(a,b,c,d){return null===b||6!==b.tag?(b=d_(c,a.mode,d)).return=a:(b=g(b,c)).return=a,b}function l(a,b,c,d){var e=c.type;return e===ef?n(a,b,c.props.children,d,c.key):(null!==b&&(b.elementType===e||"object"==typeof e&&null!==e&&e.$$typeof===eo&&as(e)===b.type)?aw(b=g(b,c.props),c):aw(b=dZ(c.type,c.key,c.props,null,a.mode,d),c),b.return=a,b)}function m(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?(b=d1(c,a.mode,d)).return=a:(b=g(b,c.children||[])).return=a,b}function n(a,b,c,d,e){return null===b||7!==b.tag?(b=d$(c,a.mode,d,e)).return=a:(b=g(b,c)).return=a,b}function o(a,b,c){if("string"==typeof b&&""!==b||"number"==typeof b||"bigint"==typeof b)return(b=d_(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case ed:return aw(c=dZ(b.type,b.key,b.props,null,a.mode,c),b),c.return=a,c;case ee:return(b=d1(b,a.mode,c)).return=a,b;case eo:return o(a,b=as(b),c)}if(et(b)||i(b))return(b=d$(b,a.mode,c,null)).return=a,b;if("function"==typeof b.then)return o(a,av(b),c);if(b.$$typeof===ej)return o(a,$(a,b),c);ax(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c)return null!==e?null:k(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case ed:return c.key===e?l(a,b,c,d):null;case ee:return c.key===e?m(a,b,c,d):null;case eo:return p(a,b,c=as(c),d)}if(et(c)||i(c))return null!==e?null:n(a,b,c,d,null);if("function"==typeof c.then)return p(a,b,av(c),d);if(c.$$typeof===ej)return p(a,b,$(a,c),d);ax(a,c)}return null}function q(a,b,c,d,e){if("string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d)return k(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case ed:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e);case ee:return m(b,a=a.get(null===d.key?c:d.key)||null,d,e);case eo:return q(a,b,c,d=as(d),e)}if(et(d)||i(d))return n(b,a=a.get(c)||null,d,e,null);if("function"==typeof d.then)return q(a,b,c,av(d),e);if(d.$$typeof===ej)return q(a,b,c,$(b,d),e);ax(b,d)}return null}return function(k,l,m,n){try{hz=0;var r=function c(k,l,m,n){if("object"==typeof m&&null!==m&&m.type===ef&&null===m.key&&(m=m.props.children),"object"==typeof m&&null!==m){switch(m.$$typeof){case ed:a:{for(var r=m.key;null!==l;){if(l.key===r){if((r=m.type)===ef){if(7===l.tag){d(k,l.sibling),(n=g(l,m.props.children)).return=k,k=n;break a}}else if(l.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===eo&&as(r)===l.type){d(k,l.sibling),aw(n=g(l,m.props),m),n.return=k,k=n;break a}d(k,l);break}b(k,l),l=l.sibling}m.type===ef?(n=d$(m.props.children,k.mode,n,m.key)).return=k:(aw(n=dZ(m.type,m.key,m.props,null,k.mode,n),m),n.return=k),k=n}return j(k);case ee:a:{for(r=m.key;null!==l;){if(l.key===r)if(4===l.tag&&l.stateNode.containerInfo===m.containerInfo&&l.stateNode.implementation===m.implementation){d(k,l.sibling),(n=g(l,m.children||[])).return=k,k=n;break a}else{d(k,l);break}b(k,l),l=l.sibling}(n=d1(m,k.mode,n)).return=k,k=n}return j(k);case eo:return c(k,l,m=as(m),n)}if(et(m))return function(c,e,g,i){for(var j=null,k=null,l=e,m=e=0,n=null;null!==l&&m<g.length;m++){l.index>m?(n=l,l=null):n=l.sibling;var r=p(c,l,g[m],i);if(null===r){null===l&&(l=n);break}a&&l&&null===r.alternate&&b(c,l),e=h(r,e,m),null===k?j=r:k.sibling=r,k=r,l=n}if(m===g.length)return d(c,l),g6&&C(c,m),j;if(null===l){for(;m<g.length;m++)null!==(l=o(c,g[m],i))&&(e=h(l,e,m),null===k?j=l:k.sibling=l,k=l);return g6&&C(c,m),j}for(l=f(l);m<g.length;m++)null!==(n=q(l,c,m,g[m],i))&&(a&&null!==n.alternate&&l.delete(null===n.key?m:n.key),e=h(n,e,m),null===k?j=n:k.sibling=n,k=n);return a&&l.forEach(function(a){return b(c,a)}),g6&&C(c,m),j}(k,l,m,n);if(i(m)){if("function"!=typeof(r=i(m)))throw Error(e(150));return function(c,g,i,j){if(null==i)throw Error(e(151));for(var k=null,l=null,m=g,n=g=0,r=null,s=i.next();null!==m&&!s.done;n++,s=i.next()){m.index>n?(r=m,m=null):r=m.sibling;var t=p(c,m,s.value,j);if(null===t){null===m&&(m=r);break}a&&m&&null===t.alternate&&b(c,m),g=h(t,g,n),null===l?k=t:l.sibling=t,l=t,m=r}if(s.done)return d(c,m),g6&&C(c,n),k;if(null===m){for(;!s.done;n++,s=i.next())null!==(s=o(c,s.value,j))&&(g=h(s,g,n),null===l?k=s:l.sibling=s,l=s);return g6&&C(c,n),k}for(m=f(m);!s.done;n++,s=i.next())null!==(s=q(m,c,n,s.value,j))&&(a&&null!==s.alternate&&m.delete(null===s.key?n:s.key),g=h(s,g,n),null===l?k=s:l.sibling=s,l=s);return a&&m.forEach(function(a){return b(c,a)}),g6&&C(c,n),k}(k,l,m=r.call(m),n)}if("function"==typeof m.then)return c(k,l,av(m),n);if(m.$$typeof===ej)return c(k,l,$(k,m),n);ax(k,m)}return"string"==typeof m&&""!==m||"number"==typeof m||"bigint"==typeof m?(m=""+m,null!==l&&6===l.tag?(d(k,l.sibling),(n=g(l,m)).return=k):(d(k,l),(n=d_(m,k.mode,n)).return=k),j(k=n)):d(k,l)}(k,l,m,n);return hy=null,r}catch(a){if(a===ht||a===hv)throw a;var s=c(29,a,null,k.mode);return s.lanes=n,s.return=k,s}finally{}}}function az(){for(var a=hD,b=hE=hD=0;b<a;){var c=hC[b];hC[b++]=null;var d=hC[b];hC[b++]=null;var e=hC[b];hC[b++]=null;var f=hC[b];if(hC[b++]=null,null!==d&&null!==e){var g=d.pending;null===g?e.next=e:(e.next=g.next,g.next=e),d.pending=e}0!==f&&aD(c,e,f)}}function aA(a,b,c,d){hC[hD++]=a,hC[hD++]=b,hC[hD++]=c,hC[hD++]=d,hE|=d,a.lanes|=d,null!==(a=a.alternate)&&(a.lanes|=d)}function aB(a,b,c,d){return aA(a,b,c,d),aE(a)}function aC(a,b){return aA(a,null,null,b),aE(a)}function aD(a,b,c){a.lanes|=c;var d=a.alternate;null!==d&&(d.lanes|=c);for(var e=!1,f=a.return;null!==f;)f.childLanes|=c,null!==(d=f.alternate)&&(d.childLanes|=c),22===f.tag&&(null===(a=f.stateNode)||1&a._visibility||(e=!0)),a=f,f=f.return;return 3===a.tag?(f=a.stateNode,e&&null!==b&&(e=31-gx(c),null===(d=(a=f.hiddenUpdates)[e])?a[e]=[b]:d.push(b),b.lane=0x20000000|c),f):null}function aE(a){if(50<iR)throw iR=0,iS=null,Error(e(185));for(var b=a.return;null!==b;)b=(a=b).return;return 3===a.tag?a.stateNode:null}function aF(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aG(a,b){a=a.updateQueue,b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function aH(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function aI(a,b,c){var d=a.updateQueue;if(null===d)return null;if(d=d.shared,0!=(2&il)){var e=d.pending;return null===e?b.next=b:(b.next=e.next,e.next=b),d.pending=b,b=aE(a),aD(a,null,c),b}return aA(a,d,b,c),aE(a)}function aJ(a,b,c){if(null!==(b=b.updateQueue)&&(b=b.shared,0!=(4194048&c))){var d=b.lanes;d&=a.pendingLanes,c|=d,b.lanes=c,u(a,c)}}function aK(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&c===(d=d.updateQueue)){var e=null,f=null;if(null!==(c=c.firstBaseUpdate)){do{var g={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};null===f?e=f=g:f=f.next=g,c=c.next}while(null!==c)null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}null===(a=c.lastBaseUpdate)?c.firstBaseUpdate=b:a.next=b,c.lastBaseUpdate=b}function aL(){if(hG){var a=hq;if(null!==a)throw a}}function aM(a,b,c,d){hG=!1;var e=a.updateQueue;hF=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var i=h,j=i.next;i.next=null,null===g?f=j:g.next=j,g=i;var k=a.alternate;null!==k&&(h=(k=k.updateQueue).lastBaseUpdate)!==g&&(null===h?k.firstBaseUpdate=j:h.next=j,k.lastBaseUpdate=i)}if(null!==f){var l=e.baseState;for(g=0,k=j=i=null,h=f;;){var m=-0x20000001&h.lane,n=m!==h.lane;if(n?(ip&m)===m:(d&m)===m){0!==m&&m===hp&&(hG=!0),null!==k&&(k=k.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});a:{var o=a,p=h;switch(m=b,p.tag){case 1:if("function"==typeof(o=p.payload)){l=o.call(c,l,m);break a}l=o;break a;case 3:o.flags=-65537&o.flags|128;case 0:if(null==(m="function"==typeof(o=p.payload)?o.call(c,l,m):o))break a;l=eb({},l,m);break a;case 2:hF=!0}}null!==(m=h.callback)&&(a.flags|=64,n&&(a.flags|=8192),null===(n=e.callbacks)?e.callbacks=[m]:n.push(m))}else n={lane:m,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===k?(j=k=n,i=l):k=k.next=n,g|=m;if(null===(h=h.next))if(null===(h=e.shared.pending))break;else h=(n=h).next,n.next=null,e.lastBaseUpdate=n,e.shared.pending=null}null===k&&(i=l),e.baseState=i,e.firstBaseUpdate=j,e.lastBaseUpdate=k,null===f&&(e.shared.lanes=0),ix|=g,a.lanes=g,a.memoizedState=l}}function aN(a,b){if("function"!=typeof a)throw Error(e(191,a));a.call(b)}function aO(a,b){var c=a.callbacks;if(null!==c)for(a.callbacks=null,a=0;a<c.length;a++)aN(c[a],b)}function aP(a,b){m(hI,a=iv),m(hH,b),iv=a|b.baseLanes}function aQ(){m(hI,iv),m(hH,hH.current)}function aR(){iv=hI.current,l(hH),l(hI)}function aS(a){var b=a.alternate;m(hL,1&hL.current),m(hJ,a),null===hK&&(null===b||null!==hH.current?hK=a:null!==b.memoizedState&&(hK=a))}function aT(a){m(hL,hL.current),m(hJ,a),null===hK&&(hK=a)}function aU(a){22===a.tag?(m(hL,hL.current),m(hJ,a),null===hK&&(hK=a)):aV(a)}function aV(){m(hL,hL.current),m(hJ,hJ.current)}function aW(a){l(hJ),hK===a&&(hK=null),l(hL)}function aX(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||fA(c)||fB(c)))return b}else if(19===b.tag&&("forwards"===b.memoizedProps.revealOrder||"backwards"===b.memoizedProps.revealOrder||"unstable_legacy-backwards"===b.memoizedProps.revealOrder||"together"===b.memoizedProps.revealOrder)){if(0!=(128&b.flags))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function aY(){throw Error(e(321))}function aZ(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!gO(a[c],b[c]))return!1;return!0}function a$(a,b,c,d,e,f){return hM=f,hN=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,eu.H=null===a||null===a.memoizedState?hY:hZ,hS=!1,f=c(d,e),hS=!1,hR&&(f=a0(b,c,d,e)),a_(a),f}function a_(a){eu.H=hX;var b=null!==hO&&null!==hO.next;if(hM=0,hP=hO=hN=null,hQ=!1,hU=0,hV=null,b)throw Error(e(300));null===a||h1||null!==(a=a.dependencies)&&X(a)&&(h1=!0)}function a0(a,b,c,d){hN=a;var f=0;do{if(hR&&(hV=null),hU=0,hR=!1,25<=f)throw Error(e(301));if(f+=1,hP=hO=null,null!=a.updateQueue){var g=a.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,null!=g.memoCache&&(g.memoCache.index=0)}eu.H=h$,g=b(c,d)}while(hR)return g}function a1(){var a=eu.H,b=a.useState()[0];return b="function"==typeof b.then?a8(b):b,a=a.useState()[0],(null!==hO?hO.memoizedState:null)!==a&&(hN.flags|=1024),b}function a2(){var a=0!==hT;return hT=0,a}function a3(a,b,c){b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~c}function a4(a){if(hQ){for(a=a.memoizedState;null!==a;){var b=a.queue;null!==b&&(b.pending=null),a=a.next}hQ=!1}hM=0,hP=hO=hN=null,hR=!1,hU=hT=0,hV=null}function a5(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hP?hN.memoizedState=hP=a:hP=hP.next=a,hP}function a6(){if(null===hO){var a=hN.alternate;a=null!==a?a.memoizedState:null}else a=hO.next;var b=null===hP?hN.memoizedState:hP.next;if(null!==b)hP=b,hO=a;else{if(null===a){if(null===hN.alternate)throw Error(e(467));throw Error(e(310))}a={memoizedState:(hO=a).memoizedState,baseState:hO.baseState,baseQueue:hO.baseQueue,queue:hO.queue,next:null},null===hP?hN.memoizedState=hP=a:hP=hP.next=a}return hP}function a7(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function a8(a){var b=hU;return hU+=1,null===hV&&(hV=[]),a=ar(hV,a,b),b=hN,null===(null===hP?b.memoizedState:hP.next)&&(eu.H=null===(b=b.alternate)||null===b.memoizedState?hY:hZ),a}function a9(a){if(null!==a&&"object"==typeof a){if("function"==typeof a.then)return a8(a);if(a.$$typeof===ej)return Z(a)}throw Error(e(438,String(a)))}function ba(a){var b=null,c=hN.updateQueue;if(null!==c&&(b=c.memoCache),null==b){var d=hN.alternate;null!==d&&null!==(d=d.updateQueue)&&null!=(d=d.memoCache)&&(b={data:d.data.map(function(a){return a.slice()}),index:0})}if(null==b&&(b={data:[],index:0}),null===c&&(c=a7(),hN.updateQueue=c),c.memoCache=b,void 0===(c=b.data[b.index]))for(c=b.data[b.index]=Array(a),d=0;d<a;d++)c[d]=eq;return b.index++,c}function bb(a,b){return"function"==typeof b?b(a):b}function bc(a){return bd(a6(),hO,a)}function bd(a,b,c){var d=a.queue;if(null===d)throw Error(e(311));d.lastRenderedReducer=c;var f=a.baseQueue,g=d.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next,g.next=h}b.baseQueue=f=g,d.pending=null}if(g=a.baseState,null===f)a.memoizedState=g;else{b=f.next;var i=h=null,j=null,k=b,l=!1;do{var m=-0x20000001&k.lane;if(m!==k.lane?(ip&m)===m:(hM&m)===m){var n=k.revertLane;if(0===n)null!==j&&(j=j.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),m===hp&&(l=!0);else if((hM&n)===n){k=k.next,n===hp&&(l=!0);continue}else m={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},null===j?(i=j=m,h=g):j=j.next=m,hN.lanes|=n,ix|=n;m=k.action,hS&&c(g,m),g=k.hasEagerState?k.eagerState:c(g,m)}else n={lane:m,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},null===j?(i=j=n,h=g):j=j.next=n,hN.lanes|=m,ix|=m;k=k.next}while(null!==k&&k!==b)if(null===j?h=g:j.next=i,!gO(g,a.memoizedState)&&(h1=!0,l&&null!==(c=hq)))throw c;a.memoizedState=g,a.baseState=h,a.baseQueue=j,d.lastRenderedState=g}return null===f&&(d.lanes=0),[a.memoizedState,d.dispatch]}function be(a){var b=a6(),c=b.queue;if(null===c)throw Error(e(311));c.lastRenderedReducer=a;var d=c.dispatch,f=c.pending,g=b.memoizedState;if(null!==f){c.pending=null;var h=f=f.next;do g=a(g,h.action),h=h.next;while(h!==f)gO(g,b.memoizedState)||(h1=!0),b.memoizedState=g,null===b.baseQueue&&(b.baseState=g),c.lastRenderedState=g}return[g,d]}function bf(a,b,c){var d=hN,f=a6(),g=g6;if(g){if(void 0===c)throw Error(e(407));c=c()}else c=b();var h=!gO((hO||f).memoizedState,c);if(h&&(f.memoizedState=c,h1=!0),f=f.queue,bE(bi.bind(null,d,f,a),[a]),f.getSnapshot!==b||h||null!==hP&&1&hP.memoizedState.tag){if(d.flags|=2048,bz(9,{destroy:void 0},bh.bind(null,d,f,c,b),null),null===im)throw Error(e(349));g||0!=(127&hM)||bg(d,b,c)}return c}function bg(a,b,c){a.flags|=16384,a={getSnapshot:b,value:c},null===(b=hN.updateQueue)?(b=a7(),hN.updateQueue=b,b.stores=[a]):null===(c=b.stores)?b.stores=[a]:c.push(a)}function bh(a,b,c,d){b.value=c,b.getSnapshot=d,bj(b)&&bk(a)}function bi(a,b,c){return c(function(){bj(b)&&bk(a)})}function bj(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!gO(a,c)}catch(a){return!0}}function bk(a){var b=aC(a,2);null!==b&&dp(b,a,2)}function bl(a){var b=a5();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:a},b}function bm(a,b,c,d){return a.baseState=c,bd(a,hO,"function"==typeof d?d:bb)}function bn(a,b,c,d,f){if(bZ(a))throw Error(e(485));if(null!==(a=b.action)){var g={payload:f,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){g.listeners.push(a)}};null!==eu.T?c(!0):g.isTransition=!1,d(g),null===(c=b.pending)?(g.next=b.pending=g,bo(b,g)):(g.next=c.next,b.pending=c.next=g)}}function bo(a,b){var c=b.action,d=b.payload,e=a.state;if(b.isTransition){var f=eu.T,g={};eu.T=g;try{var h=c(e,d),i=eu.S;null!==i&&i(g,h),bp(a,b,h)}catch(c){br(a,b,c)}finally{null!==f&&null!==g.types&&(f.types=g.types),eu.T=f}}else try{f=c(e,d),bp(a,b,f)}catch(c){br(a,b,c)}}function bp(a,b,c){null!==c&&"object"==typeof c&&"function"==typeof c.then?c.then(function(c){bq(a,b,c)},function(c){return br(a,b,c)}):bq(a,b,c)}function bq(a,b,c){b.status="fulfilled",b.value=c,bs(b),a.state=c,null!==(b=a.pending)&&((c=b.next)===b?a.pending=null:(c=c.next,b.next=c,bo(a,c)))}function br(a,b,c){var d=a.pending;if(a.pending=null,null!==d){d=d.next;do b.status="rejected",b.reason=c,bs(b),b=b.next;while(b!==d)}a.action=null}function bs(a){a=a.listeners;for(var b=0;b<a.length;b++)(0,a[b])()}function bt(a,b){return b}function bu(a,b){if(g6){var c=im.formState;if(null!==c){a:{var d=hN;if(g6){if(g5){var e=fE(g5,g8);if(e){g5=fG(e),d=fF(e);break a}}L(d)}d=!1}d&&(b=c[0])}}(c=a5()).memoizedState=c.baseState=b,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bt,lastRenderedState:b},c.queue=d,c=bW.bind(null,hN,d),d.dispatch=c,d=bl(!1);var f=bY.bind(null,hN,!1,d.queue);return d=a5(),e={state:b,dispatch:null,action:a,pending:null},d.queue=e,c=bn.bind(null,hN,e,f,c),e.dispatch=c,d.memoizedState=a,[b,c,!1]}function bv(a){return bw(a6(),hO,a)}function bw(a,b,c){if(b=bd(a,b,bt)[0],a=bc(bb)[0],"object"==typeof b&&null!==b&&"function"==typeof b.then)try{var d=a8(b)}catch(a){if(a===ht)throw hv;throw a}else d=b;var e=(b=a6()).queue,f=e.dispatch;return c!==b.memoizedState&&(hN.flags|=2048,bz(9,{destroy:void 0},bx.bind(null,e,c),null)),[d,f,a]}function bx(a,b){a.action=b}function by(a){var b=a6(),c=hO;if(null!==c)return bw(b,c,a);a6(),b=b.memoizedState;var d=(c=a6()).queue.dispatch;return c.memoizedState=a,[b,d,!1]}function bz(a,b,c,d){return a={tag:a,create:c,deps:d,inst:b,next:null},null===(b=hN.updateQueue)&&(b=a7(),hN.updateQueue=b),null===(c=b.lastEffect)?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a),a}function bA(){return a6().memoizedState}function bB(a,b,c,d){var e=a5();hN.flags|=a,e.memoizedState=bz(1|b,{destroy:void 0},c,void 0===d?null:d)}function bC(a,b,c,d){var e=a6();d=void 0===d?null:d;var f=e.memoizedState.inst;null!==hO&&null!==d&&aZ(d,hO.memoizedState.deps)?e.memoizedState=bz(b,f,c,d):(hN.flags|=a,e.memoizedState=bz(1|b,f,c,d))}function bD(a,b){bB(8390656,8,a,b)}function bE(a,b){bC(2048,8,a,b)}function bF(a){var b=a6().memoizedState,c={ref:b,nextImpl:a};hN.flags|=4;var d=hN.updateQueue;if(null===d)d=a7(),hN.updateQueue=d,d.events=[c];else{var f=d.events;null===f?d.events=[c]:f.push(c)}return function(){if(0!=(2&il))throw Error(e(440));return b.impl.apply(void 0,arguments)}}function bG(a,b){return bC(4,2,a,b)}function bH(a,b){return bC(4,4,a,b)}function bI(a,b){if("function"==typeof b){var c=b(a=a());return function(){"function"==typeof c?c():b(null)}}if(null!=b)return b.current=a=a(),function(){b.current=null}}function bJ(a,b,c){c=null!=c?c.concat([a]):null,bC(4,4,bI.bind(null,b,a),c)}function bK(){}function bL(a,b){var c=a6();b=void 0===b?null:b;var d=c.memoizedState;return null!==b&&aZ(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function bM(a,b){var c=a6();b=void 0===b?null:b;var d=c.memoizedState;return null!==b&&aZ(b,d[1])?d[0]:(c.memoizedState=[d=a(),b],d)}function bN(a,b,c){return void 0===c||0!=(0x40000000&hM)&&0==(261930&ip)?a.memoizedState=b:(a.memoizedState=c,a=dn(),hN.lanes|=a,ix|=a,c)}function bO(a,b,c,d){return gO(c,b)?c:null!==hH.current?(gO(a=bN(a,c,d),b)||(h1=!0),a):0==(42&hM)||0!=(0x40000000&hM)&&0==(261930&ip)?(h1=!0,a.memoizedState=c):(a=dn(),hN.lanes|=a,ix|=a,b)}function bP(a,b,c,d,e){var f=eS();eR(0!==f&&8>f?f:8);var g=eu.T,h={};eu.T=h,bY(a,!1,b,c);try{var i=e(),j=eu.S;if(null!==j&&j(h,i),null!==i&&"object"==typeof i&&"function"==typeof i.then){var k,l,m=(k=[],l={status:"pending",value:null,reason:null,then:function(a){k.push(a)}},i.then(function(){l.status="fulfilled",l.value=d;for(var a=0;a<k.length;a++)(0,k[a])(d)},function(a){for(l.status="rejected",l.reason=a,a=0;a<k.length;a++)(0,k[a])(void 0)}),l);bX(a,b,m,dm(a))}else bX(a,b,d,dm(a))}catch(c){bX(a,b,{then:function(){},status:"rejected",reason:c},dm())}finally{eR(f),null!==g&&null!==h.types&&(g.types=h.types),eu.T=g}}function bQ(a){var b=a.memoizedState;if(null!==b)return b;var c={};return(b={memoizedState:e1,baseState:e1,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:e1},next:null}).next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:c},next:null},a.memoizedState=b,null!==(a=a.alternate)&&(a.memoizedState=b),b}function bR(){return Z(e2)}function bS(){return a6().memoizedState}function bT(){return a6().memoizedState}function bU(a){for(var b=a.return;null!==b;){switch(b.tag){case 24:case 3:var c=dm(),d=aI(b,a=aH(c),c);null!==d&&(dp(d,b,c),aJ(d,b,c)),b={cache:aa()},a.payload=b;return}b=b.return}}function bV(a,b,c){var d=dm();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bZ(a)?b$(b,c):null!==(c=aB(a,b,c,d))&&(dp(c,a,d),b_(c,b,d))}function bW(a,b,c){bX(a,b,c,dm())}function bX(a,b,c,d){var e={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(bZ(a))b$(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&null!==(f=b.lastRenderedReducer))try{var g=b.lastRenderedState,h=f(g,c);if(e.hasEagerState=!0,e.eagerState=h,gO(h,g))return aA(a,b,e,0),null===im&&az(),!1}catch(a){}finally{}if(null!==(c=aB(a,b,e,d)))return dp(c,a,d),b_(c,b,d),!0}return!1}function bY(a,b,c,d){if(d={lane:2,revertLane:ak(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},bZ(a)){if(b)throw Error(e(479))}else null!==(b=aB(a,c,d,2))&&dp(b,a,2)}function bZ(a){var b=a.alternate;return a===hN||null!==b&&b===hN}function b$(a,b){hR=hQ=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b),a.pending=b}function b_(a,b,c){if(0!=(4194048&c)){var d=b.lanes;d&=a.pendingLanes,b.lanes=c|=d,u(a,c)}}function b0(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:eb({},b,c),a.memoizedState=c,0===a.lanes&&(a.updateQueue.baseState=c)}function b1(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||!ap(c,d)||!ap(e,f)}function b2(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&h_.enqueueReplaceState(b,b.state,null)}function b3(a,b){var c=b;if("ref"in b)for(var d in c={},b)"ref"!==d&&(c[d]=b[d]);if(a=a.defaultProps)for(var e in c===b&&(c=eb({},c)),a)void 0===c[e]&&(c[e]=a[e]);return c}function b4(a,b){try{(0,a.onUncaughtError)(b.value,{componentStack:b.stack})}catch(a){setTimeout(function(){throw a})}}function b5(a,b,c){try{(0,a.onCaughtError)(c.value,{componentStack:c.stack,errorBoundary:1===b.tag?b.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function b6(a,b,c){return(c=aH(c)).tag=3,c.payload={element:null},c.callback=function(){b4(a,b)},c}function b7(a){return(a=aH(a)).tag=3,a}function b8(a,b,c,d){var e=c.type.getDerivedStateFromError;if("function"==typeof e){var f=d.value;a.payload=function(){return e(f)},a.callback=function(){b5(b,c,d)}}var g=c.stateNode;null!==g&&"function"==typeof g.componentDidCatch&&(a.callback=function(){b5(b,c,d),"function"!=typeof e&&(null===iJ?iJ=new Set([this]):iJ.add(this));var a=d.stack;this.componentDidCatch(d.value,{componentStack:null!==a?a:""})})}function b9(a,b,c,d){b.child=null===a?hB(b,null,c,d):hA(b,a.child,c,d)}function ca(a,b,c,d,e){c=c.render;var f=b.ref;if("ref"in d){var g={};for(var h in d)"ref"!==h&&(g[h]=d[h])}else g=d;return(Y(b),d=a$(a,b,c,g,f,e),h=a2(),null===a||h1)?(g6&&h&&E(b),b.flags|=1,b9(a,b,d,e),b.child):(a3(a,b,e),cw(a,b,e))}function cb(a,b,c,d,e){if(null===a){var f=c.type;return"function"!=typeof f||dW(f)||void 0!==f.defaultProps||null!==c.compare?((a=dZ(c.type,null,d,b,b.mode,e)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=f,cc(a,b,f,d,e))}if(f=a.child,!cx(a,e)){var g=f.memoizedProps;if((c=null!==(c=c.compare)?c:ap)(g,d)&&a.ref===b.ref)return cw(a,b,e)}return b.flags|=1,(a=dX(f,d)).ref=b.ref,a.return=b,b.child=a}function cc(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(ap(f,d)&&a.ref===b.ref)if(h1=!1,b.pendingProps=d=f,!cx(a,e))return b.lanes=a.lanes,cw(a,b,e);else 0!=(131072&a.flags)&&(h1=!0)}return cj(a,b,c,d,e)}function cd(a,b,c,d){var e=d.children,f=null!==a?a.memoizedState:null;if(null===a&&null===b.stateNode&&(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===d.mode){if(0!=(128&b.flags)){if(f=null!==f?f.baseLanes|c:c,null!==a){for(e=0,d=b.child=a.child;null!==d;)e=e|d.lanes|d.childLanes,d=d.sibling;d=e&~f}else d=0,b.child=null;return cf(a,b,f,c,d)}if(0==(0x20000000&c))return d=b.lanes=0x20000000,cf(a,b,null!==f?f.baseLanes|c:c,c,d);b.memoizedState={baseLanes:0,cachePool:null},null!==a&&an(b,null!==f?f.cachePool:null),null!==f?aP(b,f):aQ(),aU(b)}else null!==f?(an(b,f.cachePool),aP(b,f),aV(b),b.memoizedState=null):(null!==a&&an(b,null),aQ(),aV(b));return b9(a,b,e,c),b.child}function ce(a,b){return null!==a&&22===a.tag||null!==b.stateNode||(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.sibling}function cf(a,b,c,d,e){var f=am();return b.memoizedState={baseLanes:c,cachePool:f=null===f?null:{parent:eL?hg._currentValue:hg._currentValue2,pool:f}},null!==a&&an(b,null),aQ(),aU(b),null!==a&&W(a,b,d,!0),b.childLanes=e,null}function cg(a,b){return(b=cr({mode:b.mode,children:b.children},a.mode)).ref=a.ref,a.child=b,b.return=a,b}function ch(a,b,c){return hA(b,a.child,null,c),a=cg(b,b.pendingProps),a.flags|=2,aW(b),b.memoizedState=null,a}function ci(a,b){var c=b.ref;if(null===c)null!==a&&null!==a.ref&&(b.flags|=4194816);else{if("function"!=typeof c&&"object"!=typeof c)throw Error(e(284));(null===a||a.ref!==c)&&(b.flags|=4194816)}}function cj(a,b,c,d,e){return(Y(b),c=a$(a,b,c,d,void 0,e),d=a2(),null===a||h1)?(g6&&d&&E(b),b.flags|=1,b9(a,b,c,e),b.child):(a3(a,b,e),cw(a,b,e))}function ck(a,b,c,d,e,f){return(Y(b),b.updateQueue=null,c=a0(b,d,c,e),a_(a),d=a2(),null===a||h1)?(g6&&d&&E(b),b.flags|=1,b9(a,b,c,f),b.child):(a3(a,b,f),cw(a,b,f))}function cl(a,b,c,d,e){if(Y(b),null===b.stateNode){var f=gw,g=c.contextType;"object"==typeof g&&null!==g&&(f=Z(g)),b.memoizedState=null!==(f=new c(d,f)).state&&void 0!==f.state?f.state:null,f.updater=h_,b.stateNode=f,f._reactInternals=b,(f=b.stateNode).props=d,f.state=b.memoizedState,f.refs={},aF(b),g=c.contextType,f.context="object"==typeof g&&null!==g?Z(g):gw,f.state=b.memoizedState,"function"==typeof(g=c.getDerivedStateFromProps)&&(b0(b,c,g,d),f.state=b.memoizedState),"function"==typeof c.getDerivedStateFromProps||"function"==typeof f.getSnapshotBeforeUpdate||"function"!=typeof f.UNSAFE_componentWillMount&&"function"!=typeof f.componentWillMount||(g=f.state,"function"==typeof f.componentWillMount&&f.componentWillMount(),"function"==typeof f.UNSAFE_componentWillMount&&f.UNSAFE_componentWillMount(),g!==f.state&&h_.enqueueReplaceState(f,f.state,null),aM(b,d,f,e),aL(),f.state=b.memoizedState),"function"==typeof f.componentDidMount&&(b.flags|=4194308),d=!0}else if(null===a){f=b.stateNode;var h=b.memoizedProps,i=b3(c,h);f.props=i;var j=f.context,k=c.contextType;g=gw,"object"==typeof k&&null!==k&&(g=Z(k));var l=c.getDerivedStateFromProps;k="function"==typeof l||"function"==typeof f.getSnapshotBeforeUpdate,h=b.pendingProps!==h,k||"function"!=typeof f.UNSAFE_componentWillReceiveProps&&"function"!=typeof f.componentWillReceiveProps||(h||j!==g)&&b2(b,f,d,g),hF=!1;var m=b.memoizedState;f.state=m,aM(b,d,f,e),aL(),j=b.memoizedState,h||m!==j||hF?("function"==typeof l&&(b0(b,c,l,d),j=b.memoizedState),(i=hF||b1(b,c,i,d,m,j,g))?(k||"function"!=typeof f.UNSAFE_componentWillMount&&"function"!=typeof f.componentWillMount||("function"==typeof f.componentWillMount&&f.componentWillMount(),"function"==typeof f.UNSAFE_componentWillMount&&f.UNSAFE_componentWillMount()),"function"==typeof f.componentDidMount&&(b.flags|=4194308)):("function"==typeof f.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=j),f.props=d,f.state=j,f.context=g,d=i):("function"==typeof f.componentDidMount&&(b.flags|=4194308),d=!1)}else{f=b.stateNode,aG(a,b),k=b3(c,g=b.memoizedProps),f.props=k,l=b.pendingProps,m=f.context,j=c.contextType,i=gw,"object"==typeof j&&null!==j&&(i=Z(j)),(j="function"==typeof(h=c.getDerivedStateFromProps)||"function"==typeof f.getSnapshotBeforeUpdate)||"function"!=typeof f.UNSAFE_componentWillReceiveProps&&"function"!=typeof f.componentWillReceiveProps||(g!==l||m!==i)&&b2(b,f,d,i),hF=!1,m=b.memoizedState,f.state=m,aM(b,d,f,e),aL();var n=b.memoizedState;g!==l||m!==n||hF||null!==a&&null!==a.dependencies&&X(a.dependencies)?("function"==typeof h&&(b0(b,c,h,d),n=b.memoizedState),(k=hF||b1(b,c,k,d,m,n,i)||null!==a&&null!==a.dependencies&&X(a.dependencies))?(j||"function"!=typeof f.UNSAFE_componentWillUpdate&&"function"!=typeof f.componentWillUpdate||("function"==typeof f.componentWillUpdate&&f.componentWillUpdate(d,n,i),"function"==typeof f.UNSAFE_componentWillUpdate&&f.UNSAFE_componentWillUpdate(d,n,i)),"function"==typeof f.componentDidUpdate&&(b.flags|=4),"function"==typeof f.getSnapshotBeforeUpdate&&(b.flags|=1024)):("function"!=typeof f.componentDidUpdate||g===a.memoizedProps&&m===a.memoizedState||(b.flags|=4),"function"!=typeof f.getSnapshotBeforeUpdate||g===a.memoizedProps&&m===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),f.props=d,f.state=n,f.context=i,d=k):("function"!=typeof f.componentDidUpdate||g===a.memoizedProps&&m===a.memoizedState||(b.flags|=4),"function"!=typeof f.getSnapshotBeforeUpdate||g===a.memoizedProps&&m===a.memoizedState||(b.flags|=1024),d=!1)}return f=d,ci(a,b),d=0!=(128&b.flags),f||d?(f=b.stateNode,c=d&&"function"!=typeof c.getDerivedStateFromError?null:f.render(),b.flags|=1,null!==a&&d?(b.child=hA(b,a.child,null,e),b.child=hA(b,null,c,e)):b9(a,b,c,e),b.memoizedState=f.state,a=b.child):a=cw(a,b,e),a}function cm(a,b,c,d){return P(),b.flags|=256,b9(a,b,c,d),b.child}function cn(a){return{baseLanes:a,cachePool:ao()}}function co(a,b,c){return a=null!==a?a.childLanes&~c:0,b&&(a|=iA),a}function cp(a,b,c){var d,f=b.pendingProps,g=!1,h=0!=(128&b.flags);if((d=h)||(d=(null===a||null!==a.memoizedState)&&0!=(2&hL.current)),d&&(g=!0,b.flags&=-129),d=0!=(32&b.flags),b.flags&=-33,null===a){if(g6){if(g?aS(b):aV(b),(a=g5)?null!==(a=fQ(a,g8))&&(b.memoizedState={dehydrated:a,treeContext:null!==gZ?{id:g$,overflow:g_}:null,retryLane:0x20000000,hydrationErrors:null},(c=d0(a)).return=b,b.child=c,g4=b,g5=null):a=null,null===a)throw L(b);return fB(a)?b.lanes=32:b.lanes=0x20000000,null}var i=f.children;return(f=f.fallback,g)?(aV(b),i=cr({mode:"hidden",children:i},g=b.mode),f=d$(f,g,c,null),i.return=b,f.return=b,i.sibling=f,b.child=i,(f=b.child).memoizedState=cn(c),f.childLanes=co(a,d,c),b.memoizedState=h2,ce(null,f)):(aS(b),cq(b,i))}var j=a.memoizedState;if(null!==j&&null!==(i=j.dehydrated)){if(h)256&b.flags?(aS(b),b.flags&=-257,b=cs(a,b,c)):null!==b.memoizedState?(aV(b),b.child=a.child,b.flags|=128,b=null):(aV(b),i=f.fallback,g=b.mode,f=cr({mode:"visible",children:f.children},g),i=d$(i,g,c,null),i.flags|=2,f.return=b,i.return=b,f.sibling=i,b.child=f,hA(b,a.child,null,c),(f=b.child).memoizedState=cn(c),f.childLanes=co(a,d,c),b.memoizedState=h2,b=ce(null,f));else if(aS(b),fB(i))d=fC(i).digest,(f=Error(e(419))).stack="",f.digest=d,R({value:f,source:null,stack:null}),b=cs(a,b,c);else if(h1||W(a,b,c,!1),d=0!=(c&a.childLanes),h1||d){if(null!==(d=im)&&0!==(f=v(d,c))&&f!==j.retryLane)throw j.retryLane=f,aC(a,f),dp(d,a,f),h0;fA(i)||dA(),b=cs(a,b,c)}else fA(i)?(b.flags|=192,b.child=a.child,b=null):(a=j.treeContext,eO&&(g5=fL(i),g4=b,g6=!0,g7=null,g8=!1,null!==a&&G(b,a)),b=cq(b,f.children),b.flags|=4096);return b}return g?(aV(b),i=f.fallback,g=b.mode,h=(j=a.child).sibling,(f=dX(j,{mode:"hidden",children:f.children})).subtreeFlags=0x3e00000&j.subtreeFlags,null!==h?i=dX(h,i):(i=d$(i,g,c,null),i.flags|=2),i.return=b,f.return=b,f.sibling=i,b.child=f,ce(null,f),f=b.child,null===(i=a.child.memoizedState)?i=cn(c):(null!==(g=i.cachePool)?(j=eL?hg._currentValue:hg._currentValue2,g=g.parent!==j?{parent:j,pool:j}:g):g=ao(),i={baseLanes:i.baseLanes|c,cachePool:g}),f.memoizedState=i,f.childLanes=co(a,d,c),b.memoizedState=h2,ce(a.child,f)):(aS(b),a=(c=a.child).sibling,(c=dX(c,{mode:"visible",children:f.children})).return=b,c.sibling=null,null!==a&&(null===(d=b.deletions)?(b.deletions=[a],b.flags|=16):d.push(a)),b.child=c,b.memoizedState=null,c)}function cq(a,b){return(b=cr({mode:"visible",children:b},a.mode)).return=a,a.child=b}function cr(a,b){return(a=c(22,a,null,b)).lanes=0,a}function cs(a,b,c){return hA(b,a.child,null,c),a=cq(b,b.pendingProps.children),a.flags|=2,b.memoizedState=null,a}function ct(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b),U(a.return,b,c)}function cu(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,treeForkCount:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.treeForkCount=f)}function cv(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;d=d.children;var g=hL.current,h=0!=(2&g);if(h?(g=1&g|2,b.flags|=128):g&=1,m(hL,g),b9(a,b,d,c),d=g6?gW:0,!h&&null!==a&&0!=(128&a.flags))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ct(a,c,b);else if(19===a.tag)ct(a,c,b);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(e){case"forwards":for(e=null,c=b.child;null!==c;)null!==(a=c.alternate)&&null===aX(a)&&(e=c),c=c.sibling;null===(c=e)?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),cu(b,!1,e,c,f,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(null!==(a=e.alternate)&&null===aX(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}cu(b,!0,c,null,f,d);break;case"together":cu(b,!1,null,null,void 0,d);break;default:b.memoizedState=null}return b.child}function cw(a,b,c){if(null!==a&&(b.dependencies=a.dependencies),ix|=b.lanes,0==(c&b.childLanes)){if(null===a)return null;else if(W(a,b,c,!1),0==(c&b.childLanes))return null}if(null!==a&&b.child!==a.child)throw Error(e(153));if(null!==b.child){for(c=dX(a=b.child,a.pendingProps),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=dX(a,a.pendingProps)).return=b;c.sibling=null}return b.child}function cx(a,b){return 0!=(a.lanes&b)||!!(null!==(a=a.dependencies)&&X(a))}function cy(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps)h1=!0;else{if(!cx(a,c)&&0==(128&b.flags))return h1=!1,function(a,b,c){switch(b.tag){case 3:H(b,b.stateNode.containerInfo),S(b,hg,a.memoizedState.cache),P();break;case 27:case 5:J(b);break;case 4:H(b,b.stateNode.containerInfo);break;case 10:S(b,b.type,b.memoizedProps.value);break;case 31:if(null!==b.memoizedState)return b.flags|=128,aT(b),null;break;case 13:var d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return aS(b),b.flags|=128,null;if(0!=(c&b.child.childLanes))return cp(a,b,c);return aS(b),null!==(a=cw(a,b,c))?a.sibling:null}aS(b);break;case 19:var e=0!=(128&a.flags);if((d=0!=(c&b.childLanes))||(W(a,b,c,!1),d=0!=(c&b.childLanes)),e){if(d)return cv(a,b,c);b.flags|=128}if(null!==(e=b.memoizedState)&&(e.rendering=null,e.tail=null,e.lastEffect=null),m(hL,hL.current),!d)return null;break;case 22:return b.lanes=0,cd(a,b,c,b.pendingProps);case 24:S(b,hg,a.memoizedState.cache)}return cw(a,b,c)}(a,b,c);h1=0!=(131072&a.flags)}else h1=!1,g6&&0!=(1048576&b.flags)&&D(b,gW,b.index);switch(b.lanes=0,b.tag){case 16:a:{var d=b.pendingProps;if(a=as(b.elementType),b.type=a,"function"==typeof a)dW(a)?(d=b3(a,d),b.tag=1,b=cl(null,b,a,d,c)):(b.tag=0,b=cj(null,b,a,d,c));else{if(null!=a){var f=a.$$typeof;if(f===ek){b.tag=11,b=ca(null,b,a,d,c);break a}if(f===en){b.tag=14,b=cb(null,b,a,d,c);break a}}throw Error(e(306,b=j(a)||a,""))}}return b;case 0:return cj(a,b,b.type,b.pendingProps,c);case 1:return f=b3(d=b.type,b.pendingProps),cl(a,b,d,f,c);case 3:a:{if(H(b,b.stateNode.containerInfo),null===a)throw Error(e(387));var g=b.pendingProps;d=(f=b.memoizedState).element,aG(a,b),aM(b,g,null,c);var h=b.memoizedState;if(S(b,hg,g=h.cache),g!==f.cache&&V(b,[hg],c,!0),aL(),g=h.element,eO&&f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:h.cache},b.updateQueue.baseState=f,b.memoizedState=f,256&b.flags){b=cm(a,b,g,c);break a}else if(g!==d){R(d=B(Error(e(424)),b)),b=cm(a,b,g,c);break a}else for(eO&&(g5=fJ(b.stateNode.containerInfo),g4=b,g6=!0,g7=null,g8=!0),c=hB(b,null,g,c),b.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling;else{if(P(),g===d){b=cw(a,b,c);break a}b9(a,b,g,c)}b=b.child}return b;case 26:if(ga)return ci(a,b),null===a?(c=gd(b.type,null,b.pendingProps,null))?b.memoizedState=c:g6||(b.stateNode=gj(b.type,b.pendingProps,g2.current,b)):b.memoizedState=gd(b.type,a.memoizedProps,b.pendingProps,a.memoizedState),null;case 27:if(go)return J(b),null===a&&go&&g6&&(d=b.stateNode=gp(b.type,b.pendingProps,g2.current,g0.current,!1),g4=b,g8=!0,g5=fM(b.type,d,g5)),b9(a,b,b.pendingProps.children,c),ci(a,b),null===a&&(b.flags|=4194304),b.child;case 5:return null===a&&g6&&(f8(b.type,b.pendingProps,g0.current),(f=d=g5)&&(null!==(d=fN(d,b.type,b.pendingProps,g8))?(b.stateNode=d,g4=b,g5=fI(d),g8=!1,f=!0):f=!1),f||L(b)),J(b),f=b.type,g=b.pendingProps,h=null!==a?a.memoizedProps:null,d=g.children,eG(f,g)?d=null:null!==h&&eG(f,h)&&(b.flags|=32),null!==b.memoizedState&&(f=a$(a,b,a1,null,null,c),eL?e2._currentValue=f:e2._currentValue2=f),ci(a,b),b9(a,b,d,c),b.child;case 6:return null===a&&g6&&(f9(b.pendingProps,g0.current),(a=c=g5)&&(null!==(c=fO(c,b.pendingProps,g8))?(b.stateNode=c,g4=b,g5=null,a=!0):a=!1),a||L(b)),null;case 13:return cp(a,b,c);case 4:return H(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=hA(b,null,d,c):b9(a,b,d,c),b.child;case 11:return ca(a,b,b.type,b.pendingProps,c);case 7:return b9(a,b,b.pendingProps,c),b.child;case 8:case 12:return b9(a,b,b.pendingProps.children,c),b.child;case 10:return d=b.pendingProps,S(b,b.type,d.value),b9(a,b,d.children,c),b.child;case 9:return f=b.type._context,d=b.pendingProps.children,Y(b),d=d(f=Z(f)),b.flags|=1,b9(a,b,d,c),b.child;case 14:return cb(a,b,b.type,b.pendingProps,c);case 15:return cc(a,b,b.type,b.pendingProps,c);case 19:return cv(a,b,c);case 31:var i=a,k=b,l=c,n=k.pendingProps,o=0!=(128&k.flags);if(k.flags&=-129,null===i){if(g6){if("hidden"===n.mode)return i=cg(k,n),k.lanes=0x20000000,ce(null,i);if(aT(k),(i=g5)?null!==(i=fP(i,g8))&&(k.memoizedState={dehydrated:i,treeContext:null!==gZ?{id:g$,overflow:g_}:null,retryLane:0x20000000,hydrationErrors:null},(l=d0(i)).return=k,k.child=l,g4=k,g5=null):i=null,null===i)throw L(k);return k.lanes=0x20000000,null}return cg(k,n)}var p=i.memoizedState;if(null!==p){var q=p.dehydrated;if(aT(k),o)if(256&k.flags)k.flags&=-257,k=ch(i,k,l);else if(null!==k.memoizedState)k.child=i.child,k.flags|=128,k=null;else throw Error(e(558));else if(h1||W(i,k,l,!1),o=0!=(l&i.childLanes),h1||o){if(null!==(n=im)&&0!==(q=v(n,l))&&q!==p.retryLane)throw p.retryLane=q,aC(i,q),dp(n,i,q),h0;dA(),k=ch(i,k,l)}else i=p.treeContext,eO&&(g5=fK(q),g4=k,g6=!0,g7=null,g8=!1,null!==i&&G(k,i)),k=cg(k,n),k.flags|=4096;return k}return(i=dX(i.child,{mode:n.mode,children:n.children})).ref=k.ref,k.child=i,i.return=k,i;case 22:return cd(a,b,c,b.pendingProps);case 24:return Y(b),d=Z(hg),null===a?(null===(f=am())&&(f=im,g=aa(),f.pooledCache=g,g.refCount++,null!==g&&(f.pooledCacheLanes|=c),f=g),b.memoizedState={parent:d,cache:f},aF(b),S(b,hg,f)):(0!=(a.lanes&c)&&(aG(a,b),aM(b,null,null,c),aL()),f=a.memoizedState,g=b.memoizedState,f.parent!==d?(f={parent:d,cache:d},b.memoizedState=f,0===b.lanes&&(b.memoizedState=b.updateQueue.baseState=f),S(b,hg,d)):(S(b,hg,d=g.cache),d!==f.cache&&V(b,[hg],c,!0))),b9(a,b,b.pendingProps.children,c),b.child;case 29:throw b.pendingProps}throw Error(e(156,b.tag))}function cz(a){a.flags|=4}function cA(a){eN&&(a.flags|=8)}function cB(a,b){if(null!==a&&a.child===b.child)return!1;if(0!=(16&b.flags))return!0;for(a=b.child;null!==a;){if(0!=(8218&a.flags)||0!=(8218&a.subtreeFlags))return!0;a=a.sibling}return!1}function cC(a,b,c,d){if(eM)for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)eE(a,c.stateNode);else if(!(4===c.tag||go&&27===c.tag)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}else if(eN)for(var e=b.child;null!==e;){if(5===e.tag){var f=e.stateNode;c&&d&&(f=fy(f,e.type,e.memoizedProps)),eE(a,f)}else if(6===e.tag)f=e.stateNode,c&&d&&(f=fz(f,e.memoizedProps)),eE(a,f);else if(4!==e.tag){if(22===e.tag&&null!==e.memoizedState)null!==(f=e.child)&&(f.return=e),cC(a,e,!0,!0);else if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===b)break;for(;null===e.sibling;){if(null===e.return||e.return===b)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function cD(a,b){if(eN&&cB(a,b)){var c=(a=b.stateNode).containerInfo,d=fu();!function a(b,c,d,e){var f=!1;if(eN)for(var g=c.child;null!==g;){if(5===g.tag){var h=g.stateNode;d&&e&&(h=fy(h,g.type,g.memoizedProps)),fv(b,h)}else if(6===g.tag)h=g.stateNode,d&&e&&(h=fz(h,g.memoizedProps)),fv(b,h);else if(4!==g.tag){if(22===g.tag&&null!==g.memoizedState)null!==(f=g.child)&&(f.return=g),a(b,g,!0,!0),f=!0;else if(null!==g.child){g.child.return=g,g=g.child;continue}}if(g===c)break;for(;null===g.sibling;){if(null===g.return||g.return===c)return f;g=g.return}g.sibling.return=g.return,g=g.sibling}return f}(d,b,!1,!1),a.pendingChildren=d,cz(b),fw(c,d)}}function cE(a,b,c,d){if(eM)a.memoizedProps!==d&&cz(b);else if(eN){var e=a.stateNode,f=a.memoizedProps;if((a=cB(a,b))||f!==d){var g=g0.current;(f=ft(e,c,f,d,!a,null))===e?b.stateNode=e:(cA(b),eF(f,c,d,g)&&cz(b),b.stateNode=f,a&&cC(f,b,!1,!1))}else b.stateNode=e}}function cF(a,b,c,d,e){if(0!=(32&a.mode)&&(null===c?eW(b,d):eX(b,c,d))){if(a.flags|=0x1000000,(0x13ffff40&e)===e||eY(b,d))if(eZ(a.stateNode,b,d))a.flags|=8192;else if(dx())a.flags|=8192;else throw hx=hw,hu}else a.flags&=-0x1000001}function cG(a,b){if(gl(b)){if(a.flags|=0x1000000,!gm(b))if(dx())a.flags|=8192;else throw hx=hw,hu}else a.flags&=-0x1000001}function cH(a,b){null!==b&&(a.flags|=4),16384&a.flags&&(b=22!==a.tag?q():0x20000000,a.lanes|=b,iB|=b)}function cI(a,b){if(!g6)switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function cJ(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=0x3e00000&e.subtreeFlags,d|=0x3e00000&e.flags,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;return a.subtreeFlags|=d,a.childLanes=c,b}function cK(a,b){switch(F(b),b.tag){case 3:T(hg),I();break;case 26:case 27:case 5:K(b);break;case 4:I();break;case 31:null!==b.memoizedState&&aW(b);break;case 13:aW(b);break;case 19:l(hL);break;case 10:T(b.type);break;case 22:case 23:aW(b),aR(),null!==a&&l(hs);break;case 24:T(hg)}}function cL(a,b){try{var c=b.updateQueue,d=null!==c?c.lastEffect:null;if(null!==d){var e=d.next;c=e;do{if((c.tag&a)===a){d=void 0;var f=c.create;c.inst.destroy=d=f()}c=c.next}while(c!==e)}}catch(a){dP(b,b.return,a)}}function cM(a,b,c){try{var d=b.updateQueue,e=null!==d?d.lastEffect:null;if(null!==e){var f=e.next;d=f;do{if((d.tag&a)===a){var g=d.inst,h=g.destroy;if(void 0!==h){g.destroy=void 0,e=b;try{h()}catch(a){dP(e,c,a)}}}d=d.next}while(d!==f)}}catch(a){dP(b,b.return,a)}}function cN(a){var b=a.updateQueue;if(null!==b){var c=a.stateNode;try{aO(b,c)}catch(b){dP(a,a.return,b)}}}function cO(a,b,c){c.props=b3(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(c){dP(a,b,c)}}function cP(a,b){try{var c=a.ref;if(null!==c){switch(a.tag){case 26:case 27:case 5:var d=ey(a.stateNode);break;default:d=a.stateNode}"function"==typeof c?a.refCleanup=c(d):c.current=d}}catch(c){dP(a,b,c)}}function cQ(a,b){var c=a.ref,d=a.refCleanup;if(null!==c)if("function"==typeof d)try{d()}catch(c){dP(a,b,c)}finally{a.refCleanup=null,null!=(a=a.alternate)&&(a.refCleanup=null)}else if("function"==typeof c)try{c(null)}catch(c){dP(a,b,c)}else c.current=null}function cR(a){var b=a.type,c=a.memoizedProps,d=a.stateNode;try{fh(d,b,c,a)}catch(b){dP(a,a.return,b)}}function cS(a,b,c){try{fi(a.stateNode,a.type,c,b,a)}catch(b){dP(a,a.return,b)}}function cT(a){return 5===a.tag||3===a.tag||!!ga&&26===a.tag||!!go&&27===a.tag&&gt(a.type)||4===a.tag}function cU(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||cT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(go&&27===a.tag&&gt(a.type)||2&a.flags||null===a.child||4===a.tag)continue a;a.child.return=a,a=a.child}if(!(2&a.flags))return a.stateNode}}function cV(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?fj(c,a,b):fe(c,a);else if(4!==d&&(go&&27===d&&gt(a.type)&&(c=a.stateNode),null!==(a=a.child)))for(cV(a,b,c),a=a.sibling;null!==a;)cV(a,b,c),a=a.sibling}function cW(a,b,c){a=a.containerInfo;try{fx(a,c)}catch(a){dP(b,b.return,a)}}function cX(a){var b=a.stateNode,c=a.memoizedProps;try{gq(a.type,c,b,a)}catch(b){dP(a,a.return,b)}}function cY(a,b,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:c5(a,c),4&d&&cL(5,c);break;case 1:if(c5(a,c),4&d)if(a=c.stateNode,null===b)try{a.componentDidMount()}catch(a){dP(c,c.return,a)}else{var e=b3(c.type,b.memoizedProps);b=b.memoizedState;try{a.componentDidUpdate(e,b,a.__reactInternalSnapshotBeforeUpdate)}catch(a){dP(c,c.return,a)}}64&d&&cN(c),512&d&&cP(c,c.return);break;case 3:if(c5(a,c),64&d&&null!==(d=c.updateQueue)){if(a=null,null!==c.child)switch(c.child.tag){case 27:case 5:a=ey(c.child.stateNode);break;case 1:a=c.child.stateNode}try{aO(d,a)}catch(a){dP(c,c.return,a)}}break;case 27:go&&null===b&&4&d&&cX(c);case 26:case 5:if(c5(a,c),null===b){if(4&d)cR(c);else if(64&d){a=c.type,b=c.memoizedProps,e=c.stateNode;try{fX(e,a,b,c)}catch(a){dP(c,c.return,a)}}}512&d&&cP(c,c.return);break;case 12:default:c5(a,c);break;case 31:c5(a,c),4&d&&c_(a,c);break;case 13:c5(a,c),4&d&&c0(a,c),64&d&&null!==(d=c.memoizedState)&&null!==(d=d.dehydrated)&&fD(d,c=dT.bind(null,c));break;case 22:if(!(d=null!==c.memoizedState||h3)){b=null!==b&&null!==b.memoizedState||h4,e=h3;var f=h4;h3=d,(h4=b)&&!f?function a(b,c,d){for(d=d&&0!=(8772&c.subtreeFlags),c=c.child;null!==c;){var e=c.alternate,f=b,g=c,h=g.flags;switch(g.tag){case 0:case 11:case 15:a(f,g,d),cL(4,g);break;case 1:if(a(f,g,d),"function"==typeof(f=(e=g).stateNode).componentDidMount)try{f.componentDidMount()}catch(a){dP(e,e.return,a)}if(null!==(f=(e=g).updateQueue)){var i=e.stateNode;try{var j=f.shared.hiddenCallbacks;if(null!==j)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)aN(j[f],i)}catch(a){dP(e,e.return,a)}}d&&64&h&&cN(g),cP(g,g.return);break;case 27:go&&cX(g);case 26:case 5:a(f,g,d),d&&null===e&&4&h&&cR(g),cP(g,g.return);break;case 12:default:a(f,g,d);break;case 31:a(f,g,d),d&&4&h&&c_(f,g);break;case 13:a(f,g,d),d&&4&h&&c0(f,g);break;case 22:null===g.memoizedState&&a(f,g,d),cP(g,g.return);case 30:}c=c.sibling}}(a,c,0!=(8772&c.subtreeFlags)):c5(a,c),h3=e,h4=f}case 30:}}function cZ(a,b,c){for(c=c.child;null!==c;)c$(a,b,c),c=c.sibling}function c$(a,b,c){if(gN&&"function"==typeof gN.onCommitFiberUnmount)try{gN.onCommitFiberUnmount(gM,c)}catch(a){}switch(c.tag){case 26:if(ga){h4||cQ(c,b),cZ(a,b,c),c.memoizedState?gf(c.memoizedState):c.stateNode&&gi(c.stateNode);break}case 27:if(go){h4||cQ(c,b);var d=h8,e=h9;gt(c.type)&&(h8=c.stateNode,h9=!1),cZ(a,b,c),gr(c.stateNode),h8=d,h9=e;break}case 5:h4||cQ(c,b);case 6:if(eM){if(d=h8,e=h9,h8=null,cZ(a,b,c),h8=d,h9=e,null!==h8)if(h9)try{fm(h8,c.stateNode)}catch(a){dP(c,b,a)}else try{fl(h8,c.stateNode)}catch(a){dP(c,b,a)}}else cZ(a,b,c);break;case 18:eM&&null!==h8&&(h9?f2(h8,c.stateNode):f1(h8,c.stateNode));break;case 4:eM?(d=h8,e=h9,h8=c.stateNode.containerInfo,h9=!0,cZ(a,b,c),h8=d,h9=e):(eN&&cW(c.stateNode,c,fu()),cZ(a,b,c));break;case 0:case 11:case 14:case 15:cM(2,c,b),h4||cM(4,c,b),cZ(a,b,c);break;case 1:h4||(cQ(c,b),"function"==typeof(d=c.stateNode).componentWillUnmount&&cO(c,b,d)),cZ(a,b,c);break;case 21:default:cZ(a,b,c);break;case 22:h4=(d=h4)||null!==c.memoizedState,cZ(a,b,c),h4=d}}function c_(a,b){if(eO&&null===b.memoizedState&&null!==(a=b.alternate)&&null!==(a=a.memoizedState)){a=a.dehydrated;try{fZ(a)}catch(a){dP(b,b.return,a)}}}function c0(a,b){if(eO&&null===b.memoizedState&&null!==(a=b.alternate)&&null!==(a=a.memoizedState)&&null!==(a=a.dehydrated))try{f$(a)}catch(a){dP(b,b.return,a)}}function c1(a,b){var c=function(a){switch(a.tag){case 31:case 13:case 19:var b=a.stateNode;return null===b&&(b=a.stateNode=new h6),b;case 22:return null===(b=(a=a.stateNode)._retryCache)&&(b=a._retryCache=new h6),b;default:throw Error(e(435,a.tag))}}(a);b.forEach(function(b){if(!c.has(b)){c.add(b);var d=dU.bind(null,a,b);b.then(d,d)}})}function c2(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var f=c[d],g=a,h=b;if(eM){var i=h;a:for(;null!==i;){switch(i.tag){case 27:if(go){if(gt(i.type)){h8=i.stateNode,h9=!1;break a}break}case 5:h8=i.stateNode,h9=!1;break a;case 3:case 4:h8=i.stateNode.containerInfo,h9=!0;break a}i=i.return}if(null===h8)throw Error(e(160));c$(g,h,f),h8=null,h9=!1}else c$(g,h,f);null!==(g=f.alternate)&&(g.return=null),f.return=null}if(13886&b.subtreeFlags)for(b=b.child;null!==b;)c3(b,a),b=b.sibling}function c3(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:c2(b,a),c4(a),4&d&&(cM(3,a,a.return),cL(3,a),cM(5,a,a.return));break;case 1:c2(b,a),c4(a),512&d&&(h4||null===c||cQ(c,c.return)),64&d&&h3&&null!==(a=a.updateQueue)&&null!==(d=a.callbacks)&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=null===c?d:c.concat(d));break;case 26:if(ga){var f=ia;if(c2(b,a),c4(a),512&d&&(h4||null===c||cQ(c,c.return)),4&d){d=null!==c?c.memoizedState:null;var g=a.memoizedState;null===c?null===g?null===a.stateNode?a.stateNode=gg(f,a.type,a.memoizedProps,a):gh(f,a.type,a.stateNode):a.stateNode=ge(f,g,a.memoizedProps):d!==g?(null===d?null!==c.stateNode&&gi(c.stateNode):gf(d),null===g?gh(f,a.type,a.stateNode):ge(f,g,a.memoizedProps)):null===g&&null!==a.stateNode&&cS(a,a.memoizedProps,c.memoizedProps)}break}case 27:if(go){c2(b,a),c4(a),512&d&&(h4||null===c||cQ(c,c.return)),null!==c&&4&d&&cS(a,a.memoizedProps,c.memoizedProps);break}case 5:if(c2(b,a),c4(a),512&d&&(h4||null===c||cQ(c,c.return)),eM){if(32&a.flags){f=a.stateNode;try{fn(f)}catch(b){dP(a,a.return,b)}}4&d&&null!=a.stateNode&&(f=a.memoizedProps,cS(a,f,null!==c?c.memoizedProps:f)),1024&d&&(h5=!0)}else eN&&null!==a.alternate&&(a.alternate.stateNode=a.stateNode);break;case 6:if(c2(b,a),c4(a),4&d&&eM){if(null===a.stateNode)throw Error(e(162));d=a.memoizedProps,c=null!==c?c.memoizedProps:d,f=a.stateNode;try{fg(f,c,d)}catch(b){dP(a,a.return,b)}}break;case 3:if(ga?(gk(),f=ia,ia=gc(b.containerInfo),c2(b,a),ia=f):c2(b,a),c4(a),4&d){if(eM&&eO&&null!==c&&c.memoizedState.isDehydrated)try{fY(b.containerInfo)}catch(b){dP(a,a.return,b)}if(eN){d=b.containerInfo,c=b.pendingChildren;try{fx(d,c)}catch(b){dP(a,a.return,b)}}}h5&&(h5=!1,function a(b){if(1024&b.subtreeFlags)for(b=b.child;null!==b;){var c=b;a(c),5===c.tag&&1024&c.flags&&e3(c.stateNode),b=b.sibling}}(a));break;case 4:ga?(c=ia,ia=gc(a.stateNode.containerInfo),c2(b,a),c4(a),ia=c):(c2(b,a),c4(a)),4&d&&eN&&cW(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:default:c2(b,a),c4(a);break;case 31:case 19:c2(b,a),c4(a),4&d&&null!==(d=a.updateQueue)&&(a.updateQueue=null,c1(a,d));break;case 13:c2(b,a),c4(a),8192&a.child.flags&&null!==a.memoizedState!=(null!==c&&null!==c.memoizedState)&&(iF=gH()),4&d&&null!==(d=a.updateQueue)&&(a.updateQueue=null,c1(a,d));break;case 22:f=null!==a.memoizedState;var h=null!==c&&null!==c.memoizedState,i=h3,j=h4;if(h3=i||f,h4=j||h,c2(b,a),h4=j,h3=i,c4(a),8192&d&&((b=a.stateNode)._visibility=f?-2&b._visibility:1|b._visibility,f&&(null===c||h||h3||h4||function a(b){for(b=b.child;null!==b;){var c=b;switch(c.tag){case 0:case 11:case 14:case 15:cM(4,c,c.return),a(c);break;case 1:cQ(c,c.return);var d=c.stateNode;"function"==typeof d.componentWillUnmount&&cO(c,c.return,d),a(c);break;case 27:go&&gr(c.stateNode);case 26:case 5:cQ(c,c.return),a(c);break;case 22:null===c.memoizedState&&a(c);break;default:a(c)}b=b.sibling}}(a)),eM)){a:if(c=null,eM)for(b=a;;){if(5===b.tag||ga&&26===b.tag){if(null===c){h=c=b;try{g=h.stateNode,f?fo(g):fq(h.stateNode,h.memoizedProps)}catch(a){dP(h,h.return,a)}}}else if(6===b.tag){if(null===c){h=b;try{var k=h.stateNode;f?fp(k):fr(k,h.memoizedProps)}catch(a){dP(h,h.return,a)}}}else if(18===b.tag){if(null===c){h=b;try{var l=h.stateNode;f?f3(l):f4(h.stateNode)}catch(a){dP(h,h.return,a)}}}else if((22!==b.tag&&23!==b.tag||null===b.memoizedState||b===a)&&null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break a;for(;null===b.sibling;){if(null===b.return||b.return===a)break a;c===b&&(c=null),b=b.return}c===b&&(c=null),b.sibling.return=b.return,b=b.sibling}}4&d&&null!==(d=a.updateQueue)&&null!==(c=d.retryQueue)&&(d.retryQueue=null,c1(a,c));case 30:case 21:}}function c4(a){var b=a.flags;if(2&b){try{for(var c,d=a.return;null!==d;){if(cT(d)){c=d;break}d=d.return}if(eM){if(null==c)throw Error(e(160));switch(c.tag){case 27:if(go){var f=c.stateNode,g=cU(a);cV(a,g,f);break}case 5:var h=c.stateNode;32&c.flags&&(fn(h),c.flags&=-33);var i=cU(a);cV(a,i,h);break;case 3:case 4:var j=c.stateNode.containerInfo,k=cU(a);!function a(b,c,d){var e=b.tag;if(5===e||6===e)b=b.stateNode,c?fk(d,b,c):ff(d,b);else if(4!==e&&(go&&27===e&&gt(b.type)&&(d=b.stateNode,c=null),null!==(b=b.child)))for(a(b,c,d),b=b.sibling;null!==b;)a(b,c,d),b=b.sibling}(a,k,j);break;default:throw Error(e(161))}}}catch(b){dP(a,a.return,b)}a.flags&=-3}4096&b&&(a.flags&=-4097)}function c5(a,b){if(8772&b.subtreeFlags)for(b=b.child;null!==b;)cY(a,b.alternate,b),b=b.sibling}function c6(a,b){var c=null;null!==a&&null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(c=a.memoizedState.cachePool.pool),a=null,null!==b.memoizedState&&null!==b.memoizedState.cachePool&&(a=b.memoizedState.cachePool.pool),a!==c&&(null!=a&&a.refCount++,null!=c&&ab(c))}function c7(a,b){a=null,null!==b.alternate&&(a=b.alternate.memoizedState.cache),(b=b.memoizedState.cache)!==a&&(b.refCount++,null!=a&&ab(a))}function c8(a,b,c,d){if(10256&b.subtreeFlags)for(b=b.child;null!==b;)c9(a,b,c,d),b=b.sibling}function c9(a,b,c,d){var e=b.flags;switch(b.tag){case 0:case 11:case 15:c8(a,b,c,d),2048&e&&cL(9,b);break;case 1:case 31:case 13:default:c8(a,b,c,d);break;case 3:c8(a,b,c,d),2048&e&&(a=null,null!==b.alternate&&(a=b.alternate.memoizedState.cache),(b=b.memoizedState.cache)!==a&&(b.refCount++,null!=a&&ab(a)));break;case 12:if(2048&e){c8(a,b,c,d),a=b.stateNode;try{var f=b.memoizedProps,g=f.id,h=f.onPostCommit;"function"==typeof h&&h(g,null===b.alternate?"mount":"update",a.passiveEffectDuration,-0)}catch(a){dP(b,b.return,a)}}else c8(a,b,c,d);break;case 23:break;case 22:f=b.stateNode,g=b.alternate,null!==b.memoizedState?2&f._visibility?c8(a,b,c,d):da(a,b):2&f._visibility?c8(a,b,c,d):(f._visibility|=2,function a(b,c,d,e,f){for(f=f&&0!=(10256&c.subtreeFlags),c=c.child;null!==c;){var g=c,h=g.flags;switch(g.tag){case 0:case 11:case 15:a(b,g,d,e,f),cL(8,g);break;case 23:break;case 22:var i=g.stateNode;null!==g.memoizedState?2&i._visibility?a(b,g,d,e,f):da(b,g):(i._visibility|=2,a(b,g,d,e,f)),f&&2048&h&&c6(g.alternate,g);break;case 24:a(b,g,d,e,f),f&&2048&h&&c7(g.alternate,g);break;default:a(b,g,d,e,f)}c=c.sibling}}(a,b,c,d,0!=(10256&b.subtreeFlags))),2048&e&&c6(g,b);break;case 24:c8(a,b,c,d),2048&e&&c7(b.alternate,b)}}function da(a,b){if(10256&b.subtreeFlags)for(b=b.child;null!==b;){var c=b,d=c.flags;switch(c.tag){case 22:da(a,c),2048&d&&c6(c.alternate,c);break;case 24:da(a,c),2048&d&&c7(c.alternate,c);break;default:da(a,c)}b=b.sibling}}function db(a,b,c){if(a.subtreeFlags&ib)for(a=a.child;null!==a;)dc(a,b,c),a=a.sibling}function dc(a,b,c){switch(a.tag){case 26:if(db(a,b,c),a.flags&ib)if(null!==a.memoizedState)gn(c,ia,a.memoizedState,a.memoizedProps);else{var d=a.stateNode,e=a.type;a=a.memoizedProps,((0x13ffff40&b)===b||eY(e,a))&&e_(c,d,e,a)}break;case 5:db(a,b,c),a.flags&ib&&(d=a.stateNode,e=a.type,a=a.memoizedProps,((0x13ffff40&b)===b||eY(e,a))&&e_(c,d,e,a));break;case 3:case 4:ga?(d=ia,ia=gc(a.stateNode.containerInfo),db(a,b,c),ia=d):db(a,b,c);break;case 22:null===a.memoizedState&&(null!==(d=a.alternate)&&null!==d.memoizedState?(d=ib,ib=0x1000000,db(a,b,c),ib=d):db(a,b,c));break;default:db(a,b,c)}}function dd(a){var b=a.alternate;if(null!==b&&null!==(a=b.child)){b.child=null;do b=a.sibling,a.sibling=null,a=b;while(null!==a)}}function de(a){var b=a.deletions;if(0!=(16&a.flags)){if(null!==b)for(var c=0;c<b.length;c++){var d=b[c];h7=d,dg(d,a)}dd(a)}if(10256&a.subtreeFlags)for(a=a.child;null!==a;)df(a),a=a.sibling}function df(a){switch(a.tag){case 0:case 11:case 15:de(a),2048&a.flags&&cM(9,a,a.return);break;case 3:case 12:default:de(a);break;case 22:var b=a.stateNode;null!==a.memoizedState&&2&b._visibility&&(null===a.return||13!==a.return.tag)?(b._visibility&=-3,function a(b){var c=b.deletions;if(0!=(16&b.flags)){if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];h7=e,dg(e,b)}dd(b)}for(b=b.child;null!==b;){switch((c=b).tag){case 0:case 11:case 15:cM(8,c,c.return),a(c);break;case 22:2&(d=c.stateNode)._visibility&&(d._visibility&=-3,a(c));break;default:a(c)}b=b.sibling}}(a)):de(a)}}function dg(a,b){for(;null!==h7;){var c=h7;switch(c.tag){case 0:case 11:case 15:cM(8,c,b);break;case 23:case 22:if(null!==c.memoizedState&&null!==c.memoizedState.cachePool){var d=c.memoizedState.cachePool.pool;null!=d&&d.refCount++}break;case 24:ab(c.memoizedState.cache)}if(null!==(d=c.child))d.return=c,h7=d;else for(c=a;null!==h7;){var e=(d=h7).sibling,f=d.return;if(!function a(b){var c=b.alternate;null!==c&&(b.alternate=null,a(c)),b.child=null,b.deletions=null,b.sibling=null,5===b.tag&&null!==(c=b.stateNode)&&eV(c),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}(d),d===c){h7=null;break}if(null!==e){e.return=f,h7=e;break}h7=f}}}function dh(a){var b=eP(a);if(null!=b){if("string"!=typeof b.memoizedProps["data-testname"])throw Error(e(364));return b}if(null===(a=e7(a)))throw Error(e(362));return a.stateNode.current}function di(a,b){var c=a.tag;switch(b.$$typeof){case id:if(a.type===b.value)return!0;break;case ie:a:{for(c=0,b=b.value,a=[a,0];c<a.length;){var d=a[c++],f=d.tag,g=a[c++],h=b[g];if(5!==f&&26!==f&&27!==f||!fa(d)){for(;null!=h&&di(d,h);)h=b[++g];if(g===b.length){b=!0;break a}for(d=d.child;null!==d;)a.push(d,g),d=d.sibling}}b=!1}return b;case ig:if((5===c||26===c||27===c)&&fb(a.stateNode,b.value))return!0;break;case ii:if((5===c||6===c||26===c||27===c)&&null!==(a=e9(a))&&0<=a.indexOf(b.value))return!0;break;case ih:if((5===c||26===c||27===c)&&"string"==typeof(a=a.memoizedProps["data-testname"])&&a.toLowerCase()===b.value.toLowerCase())return!0;break;default:throw Error(e(365))}return!1}function dj(a){switch(a.$$typeof){case id:return"<"+(j(a.value)||"Unknown")+">";case ie:return":has("+(dj(a)||"")+")";case ig:return'[role="'+a.value+'"]';case ii:return'"'+a.value+'"';case ih:return'[data-testname="'+a.value+'"]';default:throw Error(e(365))}}function dk(a,b){var c=[];a=[a,0];for(var d=0;d<a.length;){var e=a[d++],f=e.tag,g=a[d++],h=b[g];if(5!==f&&26!==f&&27!==f||!fa(e)){for(;null!=h&&di(e,h);)h=b[++g];if(g===b.length)c.push(e);else for(e=e.child;null!==e;)a.push(e,g),e=e.sibling}}return c}function dl(a,b){if(!e6)throw Error(e(363));a=dk(a=dh(a),b),b=[],a=Array.from(a);for(var c=0;c<a.length;){var d=a[c++],f=d.tag;if(5===f||26===f||27===f)fa(d)||b.push(d.stateNode);else for(d=d.child;null!==d;)a.push(d),d=d.sibling}return b}function dm(){return 0!=(2&il)&&0!==ip?ip&-ip:null!==eu.T?ak():eT()}function dn(){if(0===iA)if(0==(0x20000000&ip)||g6){var a=gB;0==(3932160&(gB<<=1))&&(gB=262144),iA=a}else iA=0x20000000;return null!==(a=hJ.current)&&(a.flags|=32),iA}function dp(a,b,c){(a===im&&(2===iq||9===iq)||null!==a.cancelPendingCommit)&&(dv(a,0),ds(a,ip,iA,!1)),s(a,c),(0==(2&il)||a!==im)&&(a===im&&(0==(2&il)&&(iy|=c),4===iw&&ds(a,ip,iA,!1)),ad(a))}function dq(a,b,c){if(0!=(6&il))throw Error(e(327));for(var d=!c&&0==(127&b)&&0==(b&a.expiredLanes)||p(a,b),f=d?function(a,b){var c=il;il|=2;var d=dy(),f=dz();im!==a||ip!==b?(iI=null,iH=gH()+500,dv(a,b)):it=p(a,b);a:for(;;)try{if(0!==iq&&null!==io){b=io;var g=ir;b:switch(iq){case 1:iq=0,ir=null,dE(a,b,g,1);break;case 2:case 9:if(aq(g)){iq=0,ir=null,dD(b);break}b=function(){2!==iq&&9!==iq||im!==a||(iq=7),ad(a)},g.then(b,b);break a;case 3:iq=7;break a;case 4:iq=5;break a;case 7:aq(g)?(iq=0,ir=null,dD(b)):(iq=0,ir=null,dE(a,b,g,7));break;case 5:var h=null;switch(io.tag){case 26:h=io.memoizedState;case 5:case 27:var i=io,j=i.type,k=i.pendingProps;if(h?gm(h):eZ(i.stateNode,j,k)){iq=0,ir=null;var l=i.sibling;if(null!==l)io=l;else{var m=i.return;null!==m?(io=m,dF(m)):io=null}break b}}iq=0,ir=null,dE(a,b,g,5);break;case 6:iq=0,ir=null,dE(a,b,g,6);break;case 8:du(),iw=6;break a;default:throw Error(e(462))}}for(;null!==io&&!gF();)dC(io);break}catch(b){dw(a,b)}return(hc=hb=null,eu.H=d,eu.A=f,il=c,null!==io)?0:(im=null,ip=0,az(),iw)}(a,b):dB(a,b,!0),g=d;;){if(0===f)it&&!d&&ds(a,b,0,!1);else{if(c=a.current.alternate,g&&!function(a){for(var b=a;;){var c=b.tag;if((0===c||11===c||15===c)&&16384&b.flags&&null!==(c=b.updateQueue)&&null!==(c=c.stores))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!gO(f(),e))return!1}catch(a){return!1}}if(c=b.child,16384&b.subtreeFlags&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}(c)){f=dB(a,b,!1),g=!1;continue}if(2===f){if(g=b,a.errorRecoveryDisabledLanes&g)var h=0;else h=0!=(h=-0x20000001&a.pendingLanes)?h:0x20000000&h?0x20000000:0;if(0!==h){b=h;a:{f=iC;var i=eO&&a.current.memoizedState.isDehydrated;if(i&&(dv(a,h).flags|=256),2!==(h=dB(a,h,!1))){if(iu&&!i){a.errorRecoveryDisabledLanes|=g,iy|=g,f=4;break a}g=iD,iD=f,null!==g&&(null===iD?iD=g:iD.push.apply(iD,g))}f=h}if(g=!1,2!==f)continue}}if(1===f){dv(a,0),ds(a,b,0,!0);break}a:{switch(d=a,g=f){case 0:case 1:throw Error(e(345));case 4:if((4194048&b)!==b)break;case 6:ds(d,b,iA,!is);break a;case 2:iD=null;break;case 3:case 5:break;default:throw Error(e(329))}if((0x3c00000&b)===b&&10<(f=iF+300-gH())){if(ds(d,b,iA,!is),0!==o(d,0,!0))break a;iN=b,d.timeoutHandle=eI(dr.bind(null,d,c,iD,iI,iE,b,iA,iy,iB,is,g,"Throttled",-0,0),f);break a}dr(d,c,iD,iI,iE,b,iA,iy,iB,is,g,null,-0,0)}}break}ad(a)}function dr(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(a.timeoutHandle=eK,8192&(l=b.subtreeFlags)||0x1002000==(0x1002000&l)){dc(b,f,l=e$());var o=(0x3c00000&f)===f?iF-gH():(4194048&f)===f?iG-gH():0;if(null!==(o=e0(l,o))){iN=f,a.cancelPendingCommit=o(dH.bind(null,a,b,f,c,d,e,g,h,i,k,l,null,m,n)),ds(a,f,g,!j);return}}dH(a,b,f,c,d,e,g,h,i)}function ds(a,b,c,d){b&=~iz,b&=~iy,a.suspendedLanes|=b,a.pingedLanes&=~b,d&&(a.warmLanes|=b),d=a.expirationTimes;for(var e=b;0<e;){var f=31-gx(e),g=1<<f;d[f]=-1,e&=~g}0!==c&&t(a,c,b)}function dt(){return 0!=(6&il)||(ae(0,!1),!1)}function du(){if(null!==io){if(0===iq)var a=io.return;else a=io,hc=hb=null,a4(a),hy=null,hz=0,a=io;for(;null!==a;)cK(a.alternate,a),a=a.return;io=null}}function dv(a,b){var c=a.timeoutHandle;c!==eK&&(a.timeoutHandle=eK,eJ(c)),null!==(c=a.cancelPendingCommit)&&(a.cancelPendingCommit=null,c()),iN=0,du(),im=a,io=c=dX(a.current,null),ip=b,iq=0,ir=null,is=!1,it=p(a,b),iu=!1,iB=iA=iz=iy=ix=iw=0,iD=iC=null,iE=!1,0!=(8&b)&&(b|=32&b);var d=a.entangledLanes;if(0!==d)for(a=a.entanglements,d&=b;0<d;){var e=31-gx(d),f=1<<e;b|=a[e],d&=~f}return iv=b,az(),c}function dw(a,b){hN=null,eu.H=hX,b===ht||b===hv?(b=at(),iq=3):b===hu?(b=at(),iq=4):iq=b===h0?8:null!==b&&"object"==typeof b&&"function"==typeof b.then?6:1,ir=b,null===io&&(iw=1,b4(a,B(b,a.current)))}function dx(){var a=hJ.current;return null===a||((4194048&ip)===ip?null===hK:((0x3c00000&ip)===ip||0!=(0x20000000&ip))&&a===hK)}function dy(){var a=eu.H;return eu.H=hX,null===a?hX:a}function dz(){var a=eu.A;return eu.A=ic,a}function dA(){iw=4,is||(4194048&ip)!==ip&&null!==hJ.current||(it=!0),0==(0x7ffffff&ix)&&0==(0x7ffffff&iy)||null===im||ds(im,ip,iA,!1)}function dB(a,b,c){var d=il;il|=2;var e=dy(),f=dz();(im!==a||ip!==b)&&(iI=null,dv(a,b)),b=!1;var g=iw;a:for(;;)try{if(0!==iq&&null!==io){var h=io,i=ir;switch(iq){case 8:du(),g=6;break a;case 3:case 2:case 9:case 6:null===hJ.current&&(b=!0);var j=iq;if(iq=0,ir=null,dE(a,h,i,j),c&&it){g=0;break a}break;default:j=iq,iq=0,ir=null,dE(a,h,i,j)}}(function(){for(;null!==io;)dC(io)})(),g=iw;break}catch(b){dw(a,b)}return b&&a.shellSuspendCounter++,hc=hb=null,il=d,eu.H=e,eu.A=f,null===io&&(im=null,ip=0,az()),g}function dC(a){var b=cy(a.alternate,a,iv);a.memoizedProps=a.pendingProps,null===b?dF(a):io=b}function dD(a){var b=a,c=b.alternate;switch(b.tag){case 15:case 0:b=ck(c,b,b.pendingProps,b.type,void 0,ip);break;case 11:b=ck(c,b,b.pendingProps,b.type.render,b.ref,ip);break;case 5:a4(b);default:cK(c,b),b=cy(c,b=io=dY(b,iv),iv)}a.memoizedProps=a.pendingProps,null===b?dF(a):io=b}function dE(a,b,c,d){hc=hb=null,a4(b),hy=null,hz=0;var f=b.return;try{if(function(a,b,c,d,f){if(c.flags|=32768,null!==d&&"object"==typeof d&&"function"==typeof d.then){if(null!==(b=c.alternate)&&W(b,c,f,!0),null!==(c=hJ.current)){switch(c.tag){case 31:case 13:return null===hK?dA():null===c.alternate&&0===iw&&(iw=3),c.flags&=-257,c.flags|=65536,c.lanes=f,d===hw?c.flags|=16384:(null===(b=c.updateQueue)?c.updateQueue=new Set([d]):b.add(d),dQ(a,d,f)),!1;case 22:return c.flags|=65536,d===hw?c.flags|=16384:(null===(b=c.updateQueue)?(b={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=b):null===(c=b.retryQueue)?b.retryQueue=new Set([d]):c.add(d),dQ(a,d,f)),!1}throw Error(e(435,c.tag))}return dQ(a,d,f),dA(),!1}if(g6)return null!==(b=hJ.current)?(0==(65536&b.flags)&&(b.flags|=256),b.flags|=65536,b.lanes=f,d!==g9&&R(B(a=Error(e(422),{cause:d}),c))):(d!==g9&&R(B(b=Error(e(423),{cause:d}),c)),a=a.current.alternate,a.flags|=65536,f&=-f,a.lanes|=f,d=B(d,c),f=b6(a.stateNode,d,f),aK(a,f),4!==iw&&(iw=2)),!1;var g=Error(e(520),{cause:d});if(g=B(g,c),null===iC?iC=[g]:iC.push(g),4!==iw&&(iw=2),null===b)return!0;d=B(d,c),c=b;do{switch(c.tag){case 3:return c.flags|=65536,a=f&-f,c.lanes|=a,a=b6(c.stateNode,d,a),aK(c,a),!1;case 1:if(b=c.type,g=c.stateNode,0==(128&c.flags)&&("function"==typeof b.getDerivedStateFromError||null!==g&&"function"==typeof g.componentDidCatch&&(null===iJ||!iJ.has(g))))return c.flags|=65536,f&=-f,c.lanes|=f,b8(f=b7(f),a,c,d),aK(c,f),!1}c=c.return}while(null!==c)return!1}(a,f,b,c,ip)){iw=1,b4(a,B(c,a.current)),io=null;return}}catch(b){if(null!==f)throw io=f,b;iw=1,b4(a,B(c,a.current)),io=null;return}32768&b.flags?(g6||1===d?a=!0:it||0!=(0x20000000&ip)?a=!1:(is=a=!0,(2===d||9===d||3===d||6===d)&&null!==(d=hJ.current)&&13===d.tag&&(d.flags|=16384)),dG(b,a)):dF(b)}function dF(a){var b=a;do{if(0!=(32768&b.flags))return void dG(b,is);a=b.return;var c=function(a,b,c){var d=b.pendingProps;switch(F(b),b.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return cJ(b),null;case 3:return c=b.stateNode,d=null,null!==a&&(d=a.memoizedState.cache),b.memoizedState.cache!==d&&(b.flags|=2048),T(hg),I(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(null===a||null===a.child)&&(O(b)?cz(b):null===a||a.memoizedState.isDehydrated&&0==(256&b.flags)||(b.flags|=1024,Q())),cD(a,b),cJ(b),null;case 26:if(ga){var f=b.type,g=b.memoizedState;return null===a?(cz(b),null!==g?(cJ(b),cG(b,g)):(cJ(b),cF(b,f,null,d,c))):g?g!==a.memoizedState?(cz(b),cJ(b),cG(b,g)):(cJ(b),b.flags&=-0x1000001):(g=a.memoizedProps,eM?g!==d&&cz(b):cE(a,b,f,d),cJ(b),cF(b,f,g,d,c)),null}case 27:if(go){if(K(b),c=g2.current,f=b.type,null!==a&&null!=b.stateNode)eM?a.memoizedProps!==d&&cz(b):cE(a,b,f,d);else{if(!d){if(null===b.stateNode)throw Error(e(166));return cJ(b),null}a=g0.current,O(b)?M(b,a):(b.stateNode=a=gp(f,d,c,a,!0),cz(b))}return cJ(b),null}case 5:if(K(b),f=b.type,null!==a&&null!=b.stateNode)cE(a,b,f,d);else{if(!d){if(null===b.stateNode)throw Error(e(166));return cJ(b),null}if(g=g0.current,O(b))M(b,g),f_(b.stateNode,f,d,g)&&(b.flags|=64);else{var h=eD(f,d,g2.current,g,b);cA(b),cC(h,b,!1,!1),b.stateNode=h,eF(h,f,d,g)&&cz(b)}}return cJ(b),cF(b,b.type,null===a?null:a.memoizedProps,b.pendingProps,c),null;case 6:if(a&&null!=b.stateNode)c=a.memoizedProps,eM?c!==d&&cz(b):eN&&(c!==d?(a=g2.current,c=g0.current,cA(b),b.stateNode=eH(d,a,c,b)):b.stateNode=a.stateNode);else{if("string"!=typeof d&&null===b.stateNode)throw Error(e(166));if(a=g2.current,c=g0.current,O(b)){if(!eO)throw Error(e(176));if(a=b.stateNode,c=b.memoizedProps,d=null,null!==(f=g4))switch(f.tag){case 27:case 5:d=f.memoizedProps}fS(a,c,b,d)||L(b,!0)}else cA(b),b.stateNode=eH(d,a,c,b)}return cJ(b),null;case 31:if(c=b.memoizedState,null===a||null!==a.memoizedState){if(d=O(b),null!==c){if(null===a){if(!d)throw Error(e(318));if(!eO)throw Error(e(556));if(!(a=null!==(a=b.memoizedState)?a.dehydrated:null))throw Error(e(557));fT(a,b)}else P(),0==(128&b.flags)&&(b.memoizedState=null),b.flags|=4;cJ(b),a=!1}else c=Q(),null!==a&&null!==a.memoizedState&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a){if(256&b.flags)return aW(b),b;return aW(b),null}if(0!=(128&b.flags))throw Error(e(558))}return cJ(b),null;case 13:if(d=b.memoizedState,null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(f=O(b),null!==d&&null!==d.dehydrated){if(null===a){if(!f)throw Error(e(318));if(!eO)throw Error(e(344));if(!(f=null!==(f=b.memoizedState)?f.dehydrated:null))throw Error(e(317));fU(f,b)}else P(),0==(128&b.flags)&&(b.memoizedState=null),b.flags|=4;cJ(b),f=!1}else f=Q(),null!==a&&null!==a.memoizedState&&(a.memoizedState.hydrationErrors=f),f=!0;if(!f){if(256&b.flags)return aW(b),b;return aW(b),null}}if(aW(b),0!=(128&b.flags))return b.lanes=c,b;return c=null!==d,a=null!==a&&null!==a.memoizedState,c&&(d=b.child,f=null,null!==d.alternate&&null!==d.alternate.memoizedState&&null!==d.alternate.memoizedState.cachePool&&(f=d.alternate.memoizedState.cachePool.pool),g=null,null!==d.memoizedState&&null!==d.memoizedState.cachePool&&(g=d.memoizedState.cachePool.pool),g!==f&&(d.flags|=2048)),c!==a&&c&&(b.child.flags|=8192),cH(b,b.updateQueue),cJ(b),null;case 4:return I(),cD(a,b),null===a&&eQ(b.stateNode.containerInfo),cJ(b),null;case 10:return T(b.type),cJ(b),null;case 19:if(l(hL),null===(d=b.memoizedState))return cJ(b),null;if(f=0!=(128&b.flags),null===(g=d.rendering))if(f)cI(d,!1);else{if(0!==iw||null!==a&&0!=(128&a.flags))for(a=b.child;null!==a;){if(null!==(g=aX(a))){for(b.flags|=128,cI(d,!1),b.updateQueue=a=g.updateQueue,cH(b,a),b.subtreeFlags=0,a=c,c=b.child;null!==c;)dY(c,a),c=c.sibling;return m(hL,1&hL.current|2),g6&&C(b,d.treeForkCount),b.child}a=a.sibling}null!==d.tail&&gH()>iH&&(b.flags|=128,f=!0,cI(d,!1),b.lanes=4194304)}else{if(!f)if(null!==(a=aX(g))){if(b.flags|=128,f=!0,b.updateQueue=a=a.updateQueue,cH(b,a),cI(d,!0),null===d.tail&&"hidden"===d.tailMode&&!g.alternate&&!g6)return cJ(b),null}else 2*gH()-d.renderingStartTime>iH&&0x20000000!==c&&(b.flags|=128,f=!0,cI(d,!1),b.lanes=4194304);d.isBackwards?(g.sibling=b.child,b.child=g):(null!==(a=d.last)?a.sibling=g:b.child=g,d.last=g)}if(null!==d.tail)return a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=gH(),a.sibling=null,c=hL.current,m(hL,f?1&c|2:1&c),g6&&C(b,d.treeForkCount),a;return cJ(b),null;case 22:case 23:return aW(b),aR(),d=null!==b.memoizedState,null!==a?null!==a.memoizedState!==d&&(b.flags|=8192):d&&(b.flags|=8192),d?0!=(0x20000000&c)&&0==(128&b.flags)&&(cJ(b),6&b.subtreeFlags&&(b.flags|=8192)):cJ(b),null!==(c=b.updateQueue)&&cH(b,c.retryQueue),c=null,null!==a&&null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(c=a.memoizedState.cachePool.pool),d=null,null!==b.memoizedState&&null!==b.memoizedState.cachePool&&(d=b.memoizedState.cachePool.pool),d!==c&&(b.flags|=2048),null!==a&&l(hs),null;case 24:return c=null,null!==a&&(c=a.memoizedState.cache),b.memoizedState.cache!==c&&(b.flags|=2048),T(hg),cJ(b),null;case 25:case 30:return null}throw Error(e(156,b.tag))}(b.alternate,b,iv);if(null!==c){io=c;return}if(null!==(b=b.sibling)){io=b;return}io=b=a}while(null!==b)0===iw&&(iw=5)}function dG(a,b){do{var c=function(a,b){switch(F(b),b.tag){case 1:return 65536&(a=b.flags)?(b.flags=-65537&a|128,b):null;case 3:return T(hg),I(),0!=(65536&(a=b.flags))&&0==(128&a)?(b.flags=-65537&a|128,b):null;case 26:case 27:case 5:return K(b),null;case 31:if(null!==b.memoizedState){if(aW(b),null===b.alternate)throw Error(e(340));P()}return 65536&(a=b.flags)?(b.flags=-65537&a|128,b):null;case 13:if(aW(b),null!==(a=b.memoizedState)&&null!==a.dehydrated){if(null===b.alternate)throw Error(e(340));P()}return 65536&(a=b.flags)?(b.flags=-65537&a|128,b):null;case 19:return l(hL),null;case 4:return I(),null;case 10:return T(b.type),null;case 22:case 23:return aW(b),aR(),null!==a&&l(hs),65536&(a=b.flags)?(b.flags=-65537&a|128,b):null;case 24:return T(hg),null;default:return null}}(a.alternate,a);if(null!==c){c.flags&=32767,io=c;return}if(null!==(c=a.return)&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!b&&null!==(a=a.sibling)){io=a;return}io=a=c}while(null!==a)iw=6,io=null}function dH(a,b,c,d,f,g,h,i,j){a.cancelPendingCommit=null;do dM();while(0!==iK)if(0!=(6&il))throw Error(e(327));if(null!==b){if(b===a.current)throw Error(e(177));if(!function(a,b,c,d,e,f){var g=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var h=a.entanglements,i=a.expirationTimes,j=a.hiddenUpdates;for(c=g&~c;0<c;){var k=31-gx(c),l=1<<k;h[k]=0,i[k]=-1;var m=j[k];if(null!==m)for(j[k]=null,k=0;k<m.length;k++){var n=m[k];null!==n&&(n.lane&=-0x20000001)}c&=~l}0!==d&&t(a,d,0),0!==f&&0===e&&0!==a.tag&&(a.suspendedLanes|=f&~(g&~b))}(a,c,g=b.lanes|b.childLanes|hE,h,i,j),a===im&&(io=im=null,ip=0),iM=b,iL=a,iN=c,iO=g,iP=f,iQ=d,0!=(10256&b.subtreeFlags)||0!=(10256&b.flags)?(a.callbackNode=null,a.callbackPriority=0,gD(gK,function(){return dN(),null})):(a.callbackNode=null,a.callbackPriority=0),d=0!=(13878&b.flags),0!=(13878&b.subtreeFlags)||d){d=eu.T,eu.T=null,f=eS(),eR(2),h=il,il|=4;try{!function(a,b){for(eB(a.containerInfo),h7=b;null!==h7;)if(b=(a=h7).child,0!=(1028&a.subtreeFlags)&&null!==b)b.return=a,h7=b;else for(;null!==h7;){var c=(a=h7).alternate;switch(b=a.flags,a.tag){case 0:if(0!=(4&b)&&null!==(b=null!==(b=a.updateQueue)?b.events:null))for(var d=0;d<b.length;d++){var f=b[d];f.ref.impl=f.nextImpl}break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&b)&&null!==c){b=void 0,d=a,f=c.memoizedProps,c=c.memoizedState;var g=d.stateNode;try{var h=b3(d.type,f);b=g.getSnapshotBeforeUpdate(h,c),g.__reactInternalSnapshotBeforeUpdate=b}catch(a){dP(d,d.return,a)}}break;case 3:0!=(1024&b)&&eM&&fs(a.stateNode.containerInfo);break;default:if(0!=(1024&b))throw Error(e(163))}if(null!==(b=a.sibling)){b.return=a.return,h7=b;break}h7=a.return}}(a,b,c)}finally{il=h,eR(f),eu.T=d}}iK=1,dI(),dJ(),dK()}}function dI(){if(1===iK){iK=0;var a=iL,b=iM,c=0!=(13878&b.flags);if(0!=(13878&b.subtreeFlags)||c){c=eu.T,eu.T=null;var d=eS();eR(2);var e=il;il|=4;try{c3(b,a),eC(a.containerInfo)}finally{il=e,eR(d),eu.T=c}}a.current=b,iK=2}}function dJ(){if(2===iK){iK=0;var a=iL,b=iM,c=0!=(8772&b.flags);if(0!=(8772&b.subtreeFlags)||c){c=eu.T,eu.T=null;var d=eS();eR(2);var e=il;il|=4;try{cY(a,b.alternate,b)}finally{il=e,eR(d),eu.T=c}}iK=3}}function dK(){if(4===iK||3===iK){iK=0,gG();var a=iL,b=iM,c=iN,d=iQ;0!=(10256&b.subtreeFlags)||0!=(10256&b.flags)?iK=5:(iK=0,iM=iL=null,dL(a,a.pendingLanes));var e=a.pendingLanes;if(0===e&&(iJ=null),x(c),b=b.stateNode,gN&&"function"==typeof gN.onCommitFiberRoot)try{gN.onCommitFiberRoot(gM,b,void 0,128==(128&b.current.flags))}catch(a){}if(null!==d){b=eu.T,e=eS(),eR(2),eu.T=null;try{for(var f=a.onRecoverableError,g=0;g<d.length;g++){var h=d[g];f(h.value,{componentStack:h.stack})}}finally{eu.T=b,eR(e)}}0!=(3&iN)&&dM(),ad(a),e=a.pendingLanes,0!=(261930&c)&&0!=(42&e)?a===iS?iR++:(iR=0,iS=a):iR=0,eO&&f0(),ae(0,!1)}}function dL(a,b){0==(a.pooledCacheLanes&=b)&&null!=(b=a.pooledCache)&&(a.pooledCache=null,ab(b))}function dM(){return dI(),dJ(),dK(),dN()}function dN(){if(5!==iK)return!1;var a=iL,b=iO;iO=0;var c=x(iN),d=32>c?32:c;c=eu.T;var f=eS();try{eR(d),eu.T=null,d=iP,iP=null;var g=iL,h=iN;if(iK=0,iM=iL=null,iN=0,0!=(6&il))throw Error(e(331));var i=il;if(il|=4,df(g.current),c9(g,g.current,h,d),il=i,ae(0,!1),gN&&"function"==typeof gN.onPostCommitFiberRoot)try{gN.onPostCommitFiberRoot(gM,g)}catch(a){}return!0}finally{eR(f),eu.T=c,dL(a,b)}}function dO(a,b,c){b=B(c,b),b=b6(a.stateNode,b,2),null!==(a=aI(a,b,2))&&(s(a,2),ad(a))}function dP(a,b,c){if(3===a.tag)dO(a,a,c);else for(;null!==b;){if(3===b.tag){dO(b,a,c);break}if(1===b.tag){var d=b.stateNode;if("function"==typeof b.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===iJ||!iJ.has(d))){a=B(c,a),null!==(d=aI(b,c=b7(2),2))&&(b8(c,d,b,a),s(d,2),ad(d));break}}b=b.return}}function dQ(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new ik;var e=new Set;d.set(b,e)}else void 0===(e=d.get(b))&&(e=new Set,d.set(b,e));e.has(c)||(iu=!0,e.add(c),a=dR.bind(null,a,b,c),b.then(a,a))}function dR(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,im===a&&(ip&c)===c&&(4===iw||3===iw&&(0x3c00000&ip)===ip&&300>gH()-iF?0==(2&il)&&dv(a,0):iz|=c,iB===ip&&(iB=0)),ad(a)}function dS(a,b){0===b&&(b=q()),null!==(a=aC(a,b))&&(s(a,b),ad(a))}function dT(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane),dS(a,c)}function dU(a,b){var c=0;switch(a.tag){case 31:case 13:var d=a.stateNode,f=a.memoizedState;null!==f&&(c=f.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(e(314))}null!==d&&d.delete(b),dS(a,c)}function dV(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dW(a){return!(!(a=a.prototype)||!a.isReactComponent)}function dX(a,b){var d=a.alternate;return null===d?((d=c(a.tag,b,a.key,a.mode)).elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=b,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=0x3e00000&a.flags,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,b=a.dependencies,d.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function dY(a,b){a.flags&=0x3e00002;var c=a.alternate;return null===c?(a.childLanes=0,a.lanes=b,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,a.dependencies=null===(b=c.dependencies)?null:{lanes:b.lanes,firstContext:b.firstContext}),a}function dZ(a,b,d,f,g,h){var i=0;if(f=a,"function"==typeof a)dW(a)&&(i=1);else if("string"==typeof a)i=ga&&go?gb(a,d,g0.current)?26:gs(a)?27:5:ga?gb(a,d,g0.current)?26:5:go&&gs(a)?27:5;else a:switch(a){case ep:return(a=c(31,d,b,g)).elementType=ep,a.lanes=h,a;case ef:return d$(d.children,g,h,b);case eg:i=8,g|=24;break;case eh:return(a=c(12,d,b,2|g)).elementType=eh,a.lanes=h,a;case el:return(a=c(13,d,b,g)).elementType=el,a.lanes=h,a;case em:return(a=c(19,d,b,g)).elementType=em,a.lanes=h,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case ej:i=10;break a;case ei:i=9;break a;case ek:i=11;break a;case en:i=14;break a;case eo:i=16,f=null;break a}i=29,d=Error(e(130,null===a?"null":typeof a,"")),f=null}return(b=c(i,d,b,g)).elementType=a,b.type=f,b.lanes=h,b}function d$(a,b,d,e){return(a=c(7,a,e,b)).lanes=d,a}function d_(a,b,d){return(a=c(6,a,null,b)).lanes=d,a}function d0(a){var b=c(18,null,null,0);return b.stateNode=a,b}function d1(a,b,d){return(b=c(4,null!==a.children?a.children:[],a.key,b)).lanes=d,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function d2(a,b,c,d,e,f,g,h,i){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=eK,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=r(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r(0),this.hiddenUpdates=r(null),this.identifierPrefix=d,this.onUncaughtError=e,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function d3(a,b,d,e,f,g,h,i,j,k,l,m){return a=new d2(a,b,d,h,j,k,l,m,i),b=1,!0===g&&(b|=24),g=c(3,null,null,b),a.current=g,g.stateNode=a,b=aa(),b.refCount++,a.pooledCache=b,b.refCount++,g.memoizedState={element:e,isDehydrated:d,cache:b},aF(g),a}function d4(a){var b=a._reactInternals;if(void 0===b){if("function"==typeof a.render)throw Error(e(188));throw Error(e(268,a=Object.keys(a).join(",")))}return null===(a=null!==(a=h(b))?function a(b){var c=b.tag;if(5===c||26===c||27===c||6===c)return b;for(b=b.child;null!==b;){if(null!==(c=a(b)))return c;b=b.sibling}return null}(a):null)?null:ey(a.stateNode)}function d5(a,b,c,d,e,f){e=e?gw:gw,null===d.context?d.context=e:d.pendingContext=e,(d=aH(b)).payload={element:c},null!==(f=void 0===f?null:f)&&(d.callback=f),null!==(c=aI(a,d,b))&&(dp(c,a,b),aJ(c,a,b))}function d6(a,b){if(null!==(a=a.memoizedState)&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function d7(a,b){d6(a,b),(a=a.alternate)&&d6(a,b)}var d8={},d9=a.r(72131),ea=a.r(90693),eb=Object.assign,ec=Symbol.for("react.element"),ed=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),ei=Symbol.for("react.consumer"),ej=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),el=Symbol.for("react.suspense"),em=Symbol.for("react.suspense_list"),en=Symbol.for("react.memo"),eo=Symbol.for("react.lazy");Symbol.for("react.scope");var ep=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var eq=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var er=Symbol.iterator,es=Symbol.for("react.client.reference"),et=Array.isArray,eu=d9.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ev=b.rendererVersion,ew=b.rendererPackageName,ex=b.extraDevToolsConfig,ey=b.getPublicInstance,ez=b.getRootHostContext,eA=b.getChildHostContext,eB=b.prepareForCommit,eC=b.resetAfterCommit,eD=b.createInstance;b.cloneMutableInstance;var eE=b.appendInitialChild,eF=b.finalizeInitialChildren,eG=b.shouldSetTextContent,eH=b.createTextInstance;b.cloneMutableTextInstance;var eI=b.scheduleTimeout,eJ=b.cancelTimeout,eK=b.noTimeout,eL=b.isPrimaryRenderer;b.warnsIfNotActing;var eM=b.supportsMutation,eN=b.supportsPersistence,eO=b.supportsHydration,eP=b.getInstanceFromNode;b.beforeActiveInstanceBlur;var eQ=b.preparePortalMount;b.prepareScopeUpdate,b.getInstanceFromScope;var eR=b.setCurrentUpdatePriority,eS=b.getCurrentUpdatePriority,eT=b.resolveUpdatePriority;b.trackSchedulerEvent,b.resolveEventType,b.resolveEventTimeStamp;var eU=b.shouldAttemptEagerTransition,eV=b.detachDeletedInstance;b.requestPostPaintCallback;var eW=b.maySuspendCommit,eX=b.maySuspendCommitOnUpdate,eY=b.maySuspendCommitInSyncRender,eZ=b.preloadInstance,e$=b.startSuspendingCommit,e_=b.suspendInstance;b.suspendOnActiveViewTransition;var e0=b.waitForCommitToBeReady;b.getSuspendedCommitReason;var e1=b.NotPendingTransition,e2=b.HostTransitionContext,e3=b.resetFormInstance;b.bindToConsole;var e4=b.supportsMicrotasks,e5=b.scheduleMicrotask,e6=b.supportsTestSelectors,e7=b.findFiberRoot,e8=b.getBoundingRect,e9=b.getTextContent,fa=b.isHiddenSubtree,fb=b.matchAccessibilityRole,fc=b.setFocusIfFocusable,fd=b.setupIntersectionObserver,fe=b.appendChild,ff=b.appendChildToContainer,fg=b.commitTextUpdate,fh=b.commitMount,fi=b.commitUpdate,fj=b.insertBefore,fk=b.insertInContainerBefore,fl=b.removeChild,fm=b.removeChildFromContainer,fn=b.resetTextContent,fo=b.hideInstance,fp=b.hideTextInstance,fq=b.unhideInstance,fr=b.unhideTextInstance;b.cancelViewTransitionName,b.cancelRootViewTransitionName,b.restoreRootViewTransitionName,b.cloneRootViewTransitionContainer,b.removeRootViewTransitionClone,b.measureClonedInstance,b.hasInstanceChanged,b.hasInstanceAffectedParent,b.startViewTransition,b.startGestureTransition,b.stopViewTransition,b.getCurrentGestureOffset,b.createViewTransitionInstance;var fs=b.clearContainer;b.createFragmentInstance,b.updateFragmentInstanceFiber,b.commitNewChildToFragmentInstance,b.deleteChildFromFragmentInstance;var ft=b.cloneInstance,fu=b.createContainerChildSet,fv=b.appendChildToContainerChildSet,fw=b.finalizeContainerChildren,fx=b.replaceContainerChildren,fy=b.cloneHiddenInstance,fz=b.cloneHiddenTextInstance,fA=b.isSuspenseInstancePending,fB=b.isSuspenseInstanceFallback,fC=b.getSuspenseInstanceFallbackErrorDetails,fD=b.registerSuspenseInstanceRetry,fE=b.canHydrateFormStateMarker,fF=b.isFormStateMarkerMatching,fG=b.getNextHydratableSibling,fH=b.getNextHydratableSiblingAfterSingleton,fI=b.getFirstHydratableChild,fJ=b.getFirstHydratableChildWithinContainer,fK=b.getFirstHydratableChildWithinActivityInstance,fL=b.getFirstHydratableChildWithinSuspenseInstance,fM=b.getFirstHydratableChildWithinSingleton,fN=b.canHydrateInstance,fO=b.canHydrateTextInstance,fP=b.canHydrateActivityInstance,fQ=b.canHydrateSuspenseInstance,fR=b.hydrateInstance,fS=b.hydrateTextInstance,fT=b.hydrateActivityInstance,fU=b.hydrateSuspenseInstance,fV=b.getNextHydratableInstanceAfterActivityInstance,fW=b.getNextHydratableInstanceAfterSuspenseInstance,fX=b.commitHydratedInstance,fY=b.commitHydratedContainer,fZ=b.commitHydratedActivityInstance,f$=b.commitHydratedSuspenseInstance,f_=b.finalizeHydratedChildren,f0=b.flushHydrationEvents;b.clearActivityBoundary;var f1=b.clearSuspenseBoundary;b.clearActivityBoundaryFromContainer;var f2=b.clearSuspenseBoundaryFromContainer,f3=b.hideDehydratedBoundary,f4=b.unhideDehydratedBoundary,f5=b.shouldDeleteUnhydratedTailInstances;b.diffHydratedPropsForDevWarnings,b.diffHydratedTextForDevWarnings,b.describeHydratableInstanceForDevWarnings;var f6,f7,f8=b.validateHydratableInstance,f9=b.validateHydratableTextInstance,ga=b.supportsResources,gb=b.isHostHoistableType,gc=b.getHoistableRoot,gd=b.getResource,ge=b.acquireResource,gf=b.releaseResource,gg=b.hydrateHoistable,gh=b.mountHoistable,gi=b.unmountHoistable,gj=b.createHoistableInstance,gk=b.prepareToCommitHoistables,gl=b.mayResourceSuspendCommit,gm=b.preloadResource,gn=b.suspendResource,go=b.supportsSingletons,gp=b.resolveSingletonInstance,gq=b.acquireSingletonInstance,gr=b.releaseSingletonInstance,gs=b.isHostSingletonType,gt=b.isSingletonScope,gu=[],gv=-1,gw={},gx=Math.clz32?Math.clz32:function(a){return 0==(a>>>=0)?32:31-(gy(a)/gz|0)|0},gy=Math.log,gz=Math.LN2,gA=256,gB=262144,gC=4194304,gD=ea.unstable_scheduleCallback,gE=ea.unstable_cancelCallback,gF=ea.unstable_shouldYield,gG=ea.unstable_requestPaint,gH=ea.unstable_now,gI=ea.unstable_ImmediatePriority,gJ=ea.unstable_UserBlockingPriority,gK=ea.unstable_NormalPriority,gL=ea.unstable_IdlePriority,gM=(ea.log,ea.unstable_setDisableYieldValue,null),gN=null,gO="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},gP="function"==typeof reportError?reportError:function(a){"object"==typeof process&&"function"==typeof process.emit?process.emit("uncaughtException",a):console.error(a)},gQ=Object.prototype.hasOwnProperty,gR=!1,gS=new WeakMap,gT=[],gU=0,gV=null,gW=0,gX=[],gY=0,gZ=null,g$=1,g_="",g0=k(null),g1=k(null),g2=k(null),g3=k(null),g4=null,g5=null,g6=!1,g7=null,g8=!1,g9=Error(e(519)),ha=k(null),hb=null,hc=null,hd="u">typeof AbortController?AbortController:function(){var a=[],b=this.signal={aborted:!1,addEventListener:function(b,c){a.push(c)}};this.abort=function(){b.aborted=!0,a.forEach(function(a){return a()})}},he=ea.unstable_scheduleCallback,hf=ea.unstable_NormalPriority,hg={$$typeof:ej,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},hh=null,hi=null,hj=!1,hk=!1,hl=!1,hm=0,hn=null,ho=0,hp=0,hq=null,hr=eu.S;eu.S=function(a,b){iG=gH(),"object"==typeof b&&null!==b&&"function"==typeof b.then&&function(a,b){if(null===hn){var c=hn=[];ho=0,hp=ak(),hq={status:"pending",value:void 0,then:function(a){c.push(a)}}}ho++,b.then(al,al)}(0,b),null!==hr&&hr(a,b)};var hs=k(null),ht=Error(e(460)),hu=Error(e(474)),hv=Error(e(542)),hw={then:function(){}},hx=null,hy=null,hz=0,hA=ay(!0),hB=ay(!1),hC=[],hD=0,hE=0,hF=!1,hG=!1,hH=k(null),hI=k(0),hJ=k(null),hK=null,hL=k(0),hM=0,hN=null,hO=null,hP=null,hQ=!1,hR=!1,hS=!1,hT=0,hU=0,hV=null,hW=0,hX={readContext:Z,use:a9,useCallback:aY,useContext:aY,useEffect:aY,useImperativeHandle:aY,useLayoutEffect:aY,useInsertionEffect:aY,useMemo:aY,useReducer:aY,useRef:aY,useState:aY,useDebugValue:aY,useDeferredValue:aY,useTransition:aY,useSyncExternalStore:aY,useId:aY,useHostTransitionStatus:aY,useFormState:aY,useActionState:aY,useOptimistic:aY,useMemoCache:aY,useCacheRefresh:aY};hX.useEffectEvent=aY;var hY={readContext:Z,use:a9,useCallback:function(a,b){return a5().memoizedState=[a,void 0===b?null:b],a},useContext:Z,useEffect:bD,useImperativeHandle:function(a,b,c){c=null!=c?c.concat([a]):null,bB(4194308,4,bI.bind(null,b,a),c)},useLayoutEffect:function(a,b){return bB(4194308,4,a,b)},useInsertionEffect:function(a,b){bB(4,2,a,b)},useMemo:function(a,b){var c=a5();b=void 0===b?null:b;var d=a();return c.memoizedState=[d,b],d},useReducer:function(a,b,c){var d=a5();if(void 0!==c)var e=c(b);else e=b;return d.memoizedState=d.baseState=e,d.queue=a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:e},a=a.dispatch=bV.bind(null,hN,a),[d.memoizedState,a]},useRef:function(a){return a5().memoizedState={current:a}},useState:function(a){var b=(a=bl(a)).queue,c=bW.bind(null,hN,b);return b.dispatch=c,[a.memoizedState,c]},useDebugValue:bK,useDeferredValue:function(a,b){return bN(a5(),a,b)},useTransition:function(){var a=bl(!1);return a=bP.bind(null,hN,a.queue,!0,!1),a5().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,b,c){var d=hN,f=a5();if(g6){if(void 0===c)throw Error(e(407));c=c()}else{if(c=b(),null===im)throw Error(e(349));0!=(127&ip)||bg(d,b,c)}f.memoizedState=c;var g={value:c,getSnapshot:b};return f.queue=g,bD(bi.bind(null,d,g,a),[a]),d.flags|=2048,bz(9,{destroy:void 0},bh.bind(null,d,g,c,b),null),c},useId:function(){var a=a5(),b=im.identifierPrefix;if(g6){var c=g_,d=g$;b="_"+b+"R_"+(c=(d&~(1<<32-gx(d)-1)).toString(32)+c),0<(c=hT++)&&(b+="H"+c.toString(32)),b+="_"}else b="_"+b+"r_"+(c=hW++).toString(32)+"_";return a.memoizedState=b},useHostTransitionStatus:bR,useFormState:bu,useActionState:bu,useOptimistic:function(a){var b=a5();b.memoizedState=b.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=c,b=bY.bind(null,hN,!0,c),c.dispatch=b,[a,b]},useMemoCache:ba,useCacheRefresh:function(){return a5().memoizedState=bU.bind(null,hN)},useEffectEvent:function(a){var b=a5(),c={impl:a};return b.memoizedState=c,function(){if(0!=(2&il))throw Error(e(440));return c.impl.apply(void 0,arguments)}}},hZ={readContext:Z,use:a9,useCallback:bL,useContext:Z,useEffect:bE,useImperativeHandle:bJ,useInsertionEffect:bG,useLayoutEffect:bH,useMemo:bM,useReducer:bc,useRef:bA,useState:function(){return bc(bb)},useDebugValue:bK,useDeferredValue:function(a,b){return bO(a6(),hO.memoizedState,a,b)},useTransition:function(){var a=bc(bb)[0],b=a6().memoizedState;return["boolean"==typeof a?a:a8(a),b]},useSyncExternalStore:bf,useId:bS,useHostTransitionStatus:bR,useFormState:bv,useActionState:bv,useOptimistic:function(a,b){return bm(a6(),hO,a,b)},useMemoCache:ba,useCacheRefresh:bT};hZ.useEffectEvent=bF;var h$={readContext:Z,use:a9,useCallback:bL,useContext:Z,useEffect:bE,useImperativeHandle:bJ,useInsertionEffect:bG,useLayoutEffect:bH,useMemo:bM,useReducer:be,useRef:bA,useState:function(){return be(bb)},useDebugValue:bK,useDeferredValue:function(a,b){var c=a6();return null===hO?bN(c,a,b):bO(c,hO.memoizedState,a,b)},useTransition:function(){var a=be(bb)[0],b=a6().memoizedState;return["boolean"==typeof a?a:a8(a),b]},useSyncExternalStore:bf,useId:bS,useHostTransitionStatus:bR,useFormState:by,useActionState:by,useOptimistic:function(a,b){var c=a6();return null!==hO?bm(c,hO,a,b):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:ba,useCacheRefresh:bT};h$.useEffectEvent=bF;var h_={enqueueSetState:function(a,b,c){a=a._reactInternals;var d=dm(),e=aH(d);e.payload=b,null!=c&&(e.callback=c),null!==(b=aI(a,e,d))&&(dp(b,a,d),aJ(b,a,d))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=dm(),e=aH(d);e.tag=1,e.payload=b,null!=c&&(e.callback=c),null!==(b=aI(a,e,d))&&(dp(b,a,d),aJ(b,a,d))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=dm(),d=aH(c);d.tag=2,null!=b&&(d.callback=b),null!==(b=aI(a,d,c))&&(dp(b,a,c),aJ(b,a,c))}},h0=Error(e(461)),h1=!1,h2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},h3=!1,h4=!1,h5=!1,h6="function"==typeof WeakSet?WeakSet:Set,h7=null,h8=null,h9=!1,ia=null,ib=8192,ic={getCacheForType:function(a){var b=Z(hg),c=b.data.get(a);return void 0===c&&(c=a(),b.data.set(a,c)),c},cacheSignal:function(){return Z(hg).controller.signal}},id=0,ie=1,ig=2,ih=3,ii=4;if("function"==typeof Symbol&&Symbol.for){var ij=Symbol.for;id=ij("selector.component"),ie=ij("selector.has_pseudo_class"),ig=ij("selector.role"),ih=ij("selector.test_id"),ii=ij("selector.text")}var ik="function"==typeof WeakMap?WeakMap:Map,il=0,im=null,io=null,ip=0,iq=0,ir=null,is=!1,it=!1,iu=!1,iv=0,iw=0,ix=0,iy=0,iz=0,iA=0,iB=0,iC=null,iD=null,iE=!1,iF=0,iG=0,iH=1/0,iI=null,iJ=null,iK=0,iL=null,iM=null,iN=0,iO=0,iP=null,iQ=null,iR=0,iS=null;return d8.attemptContinuousHydration=function(a){if(13===a.tag||31===a.tag){var b=aC(a,0x4000000);null!==b&&dp(b,a,0x4000000),d7(a,0x4000000)}},d8.attemptHydrationAtCurrentPriority=function(a){if(13===a.tag||31===a.tag){var b=dm(),c=aC(a,b=w(b));null!==c&&dp(c,a,b),d7(a,b)}},d8.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var b=n(a.pendingLanes);if(0!==b){for(a.pendingLanes|=2,a.entangledLanes|=2;b;){var c=1<<31-gx(b);a.entanglements[1]|=c,b&=~c}ad(a),0==(6&il)&&(iH=gH()+500,ae(0,!1))}}break;case 31:case 13:null!==(b=aC(a,2))&&dp(b,a,2),dt(),d7(a,2)}},d8.batchedUpdates=function(a,b){return a(b)},d8.createComponentSelector=function(a){return{$$typeof:id,value:a}},d8.createContainer=function(a,b,c,d,e,f,g,h,i,j){return d3(a,b,!1,null,c,d,f,null,g,h,i,j)},d8.createHasPseudoClassSelector=function(a){return{$$typeof:ie,value:a}},d8.createHydrationContainer=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o;return(a=d3(c,d,!0,a,e,f,h,n,i,j,k,l)).context=(o=null,gw),c=a.current,(e=aH(d=w(d=dm()))).callback=null!=b?b:null,aI(c,e,d),b=d,a.current.lanes=b,s(a,b),ad(a),a},d8.createPortal=function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ee,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}},d8.createRoleSelector=function(a){return{$$typeof:ig,value:a}},d8.createTestNameSelector=function(a){return{$$typeof:ih,value:a}},d8.createTextSelector=function(a){return{$$typeof:ii,value:a}},d8.defaultOnCaughtError=function(a){console.error(a)},d8.defaultOnRecoverableError=function(a){gP(a)},d8.defaultOnUncaughtError=function(a){gP(a)},d8.deferredUpdates=function(a){var b=eu.T,c=eS();try{return eR(32),eu.T=null,a()}finally{eR(c),eu.T=b}},d8.discreteUpdates=function(a,b,c,d,e){var f=eu.T,g=eS();try{return eR(2),eu.T=null,a(b,c,d,e)}finally{eR(g),eu.T=f,0===il&&(iH=gH()+500)}},d8.findAllNodes=dl,d8.findBoundingRects=function(a,b){if(!e6)throw Error(e(363));b=dl(a,b),a=[];for(var c=0;c<b.length;c++)a.push(e8(b[c]));for(b=a.length-1;0<b;b--){c=a[b];for(var d=c.x,f=d+c.width,g=c.y,h=g+c.height,i=b-1;0<=i;i--)if(b!==i){var j=a[i],k=j.x,l=k+j.width,m=j.y,n=m+j.height;if(d>=k&&g>=m&&f<=l&&h<=n){a.splice(b,1);break}if(d!==k||c.width!==j.width||n<g||m>h){if(!(g!==m||c.height!==j.height||l<d||k>f)){k>d&&(j.width+=k-d,j.x=d),l<f&&(j.width=f-k),a.splice(b,1);break}}else{m>g&&(j.height+=m-g,j.y=g),n<h&&(j.height=h-m),a.splice(b,1);break}}}return a},d8.findHostInstance=d4,d8.findHostInstanceWithNoPortals=function(a){return null===(a=null!==(a=h(a))?function a(b){var c=b.tag;if(5===c||26===c||27===c||6===c)return b;for(b=b.child;null!==b;){if(4!==b.tag&&null!==(c=a(b)))return c;b=b.sibling}return null}(a):null)?null:ey(a.stateNode)},d8.findHostInstanceWithWarning=function(a){return d4(a)},d8.flushPassiveEffects=dM,d8.flushSyncFromReconciler=function(a){var b=il;il|=1;var c=eu.T,d=eS();try{if(eR(2),eu.T=null,a)return a()}finally{eR(d),eu.T=c,0==(6&(il=b))&&ae(0,!1)}},d8.flushSyncWork=dt,d8.focusWithin=function(a,b){if(!e6)throw Error(e(363));for(b=Array.from(b=dk(a=dh(a),b)),a=0;a<b.length;){var c=b[a++],d=c.tag;if(!fa(c)){if((5===d||26===d||27===d)&&fc(c.stateNode))return!0;for(c=c.child;null!==c;)b.push(c),c=c.sibling}}return!1},d8.getFindAllNodesFailureDescription=function(a,b){if(!e6)throw Error(e(363));var c=0,d=[];a=[dh(a),0];for(var f=0;f<a.length;){var g=a[f++],h=g.tag,i=a[f++],j=b[i];if((5!==h&&26!==h&&27!==h||!fa(g))&&(di(g,j)&&(d.push(dj(j)),++i>c&&(c=i)),i<b.length))for(g=g.child;null!==g;)a.push(g,i),g=g.sibling}if(c<b.length){for(a=[];c<b.length;c++)a.push(dj(b[c]));return"findAllNodes was able to match part of the selector:\n  "+d.join(" > ")+"\n\nNo matching component was found for:\n  "+a.join(" > ")}return null},d8.getPublicRootInstance=function(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 27:case 5:return ey(a.child.stateNode);default:return a.child.stateNode}},d8.injectIntoDevTools=function(){var a={bundleType:0,version:ev,rendererPackageName:ew,currentDispatcherRef:eu,reconcilerVersion:"19.2.0"};if(null!==ex&&(a.rendererConfig=ex),"u"<typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)a=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)a=!0;else{try{gM=b.inject(a),gN=b}catch(a){}a=!!b.checkDCE}}return a},d8.isAlreadyRendering=function(){return 0!=(6&il)},d8.observeVisibleRects=function(a,b,c,d){if(!e6)throw Error(e(363));var f=fd(a=dl(a,b),c,d).disconnect;return{disconnect:function(){f()}}},d8.shouldError=function(){return null},d8.shouldSuspend=function(){return!1},d8.startHostTransition=function(a,b,c,f){if(5!==a.tag)throw Error(e(476));var g=bQ(a).queue;bP(a,g,b,e1,null===c?d:function(){var b=bQ(a);return null===b.next&&(b=a.alternate.memoizedState),bX(a,b.next.queue,{},dm()),c(f)})},d8.updateContainer=function(a,b,c,d){var e=b.current,f=dm();return d5(e,f,a,b,c,d),f},d8.updateContainerSync=function(a,b,c,d){return d5(b.current,2,a,b,c,d),2},d8},b.exports.default=b.exports,Object.defineProperty(b.exports,"__esModule",{value:!0})},63491,(a,b,c)=>{"use strict";b.exports=a.r(60201)},19812,(a,b,c)=>{"use strict";c.ConcurrentRoot=1,c.ContinuousEventPriority=8,c.DefaultEventPriority=32,c.DiscreteEventPriority=2,c.IdleEventPriority=0x10000000,c.LegacyRoot=0,c.NoEventPriority=0},55791,(a,b,c)=>{"use strict";b.exports=a.r(19812)},5032,a=>{"use strict";let b,c,d;var e=a.i(87924),f=a.i(50944),g=a.i(72131),h=a.i(52181),i=a.i(70106);let j=(0,i.default)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),k=(0,i.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),l=(0,i.default)("door-open",[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]]);var m=a.i(34044);let n=(0,i.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),o=(0,i.default)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]);var p=a.i(42419),p=p,q=a.i(17545);let r=(0,i.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),s=(0,i.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var t=a.i(87654),u=a.i(3544),v=a.i(65341),w=a.i(70880),x=a.i(77156),y=a.i(41379);let z=(0,i.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),A=(0,i.default)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var B=a.i(81010),C=a.i(68114);a.i(11909);var D=a.i(62067),E=a.i(96438),F=a.i(96221),G=a.i(91938);function H({projectId:a,runId:b,fileName:c,className:d=""}){let f=(0,g.useRef)(null),[h,i]=(0,g.useState)(null),[k,l]=(0,g.useState)(!0),[m,n]=(0,g.useState)(null),[o,p]=(0,g.useState)(1),[q,u]=(0,g.useState)({x:0,y:0}),[v,w]=(0,g.useState)(!1),[x,y]=(0,g.useState)({x:0,y:0}),z=(0,g.useRef)(null),A=(0,g.useRef)(null);(0,g.useEffect)(()=>{(async()=>{if(!c||!a||!b)return l(!1);try{l(!0),n(null);let d=G.apiClient.getFileUrl(a,b,c),e=await fetch(d);if(!e.ok)throw Error(`Failed to load SVG: ${e.status}`);let f=await e.text();if(!f.includes("<svg")||!f.includes("</svg>"))throw Error("Invalid SVG content");i(f)}catch(a){console.error("Error loading SVG:",a),n(a instanceof Error?a.message:"Failed to load plan")}finally{l(!1)}})()},[a,b,c]);let B=(0,g.useCallback)(a=>{a.preventDefault();let b=a.deltaY>0?.9:1.1;p(a=>Math.max(.1,Math.min(10,a*b)))},[]),C=(0,g.useCallback)(a=>{0===a.button&&(w(!0),y({x:a.clientX-q.x,y:a.clientY-q.y}))},[q]),D=(0,g.useCallback)(a=>{!v||(A.current={x:a.clientX-x.x,y:a.clientY-x.y},z.current||(z.current=requestAnimationFrame(()=>{z.current=null,A.current&&u(A.current)})))},[v,x]),E=(0,g.useCallback)(()=>{w(!1),z.current&&(cancelAnimationFrame(z.current),z.current=null)},[]);(0,g.useEffect)(()=>()=>{z.current&&cancelAnimationFrame(z.current)},[]);let H=(0,g.useMemo)(()=>({transform:`translate(${q.x}px, ${q.y}px) scale(${o})`,transformOrigin:"center",transition:v?"none":"transform 0.1s ease-out",willChange:v?"transform":"auto"}),[q.x,q.y,o,v]);return k?(0,e.jsx)("div",{className:`flex items-center justify-center h-full bg-[#f8f6f1] ${d}`,children:(0,e.jsxs)("div",{className:"text-center text-[var(--ink-soft)]",children:[(0,e.jsx)(F.Loader2,{className:"w-10 h-10 mx-auto mb-3 animate-spin opacity-50"}),(0,e.jsx)("p",{className:"text-sm",children:"Loading plan..."})]})}):m?(0,e.jsx)("div",{className:`flex items-center justify-center h-full bg-[#f8f6f1] ${d}`,children:(0,e.jsxs)("div",{className:"text-center text-[var(--ink-soft)]",children:[(0,e.jsx)("p",{className:"text-sm text-red-500",children:m}),(0,e.jsx)("p",{className:"text-xs mt-2",children:"Check that the project has been generated."})]})}):h?(0,e.jsxs)("div",{className:`relative w-full h-full overflow-hidden ${d}`,children:[(0,e.jsx)("div",{ref:f,className:"w-full h-full bg-[#f8f6f1] cursor-grab active:cursor-grabbing",onWheel:B,onMouseDown:C,onMouseMove:D,onMouseUp:E,onMouseLeave:E,style:{backgroundImage:`
            linear-gradient(0deg, rgba(100,110,125,0.08) 1px, transparent 1px),
            linear-gradient(90deg, rgba(100,110,125,0.08) 1px, transparent 1px)
          `,backgroundSize:"24px 24px"},children:(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:H,children:(0,e.jsx)("div",{className:"svg-container",dangerouslySetInnerHTML:{__html:h},style:{maxWidth:"100%",maxHeight:"100%"}})})}),(0,e.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-[var(--surface)] rounded-full px-3 py-2 shadow-lg border border-[var(--line)]",children:[(0,e.jsx)("button",{onClick:()=>p(a=>Math.max(.1,a/1.2)),className:"p-2 rounded-full hover:bg-[var(--bg-2)] text-[var(--ink-soft)] transition-colors",title:"Zoom out",children:(0,e.jsx)(s,{className:"w-5 h-5"})}),(0,e.jsxs)("span",{className:"text-sm text-[var(--ink-soft)] min-w-[48px] text-center",children:[Math.round(100*o),"%"]}),(0,e.jsx)("button",{onClick:()=>p(a=>Math.min(10,1.2*a)),className:"p-2 rounded-full hover:bg-[var(--bg-2)] text-[var(--ink-soft)] transition-colors",title:"Zoom in",children:(0,e.jsx)(r,{className:"w-5 h-5"})}),(0,e.jsx)("div",{className:"w-px h-6 bg-[var(--line)]"}),(0,e.jsx)("button",{onClick:()=>{p(1),u({x:0,y:0})},className:"p-2 rounded-full hover:bg-[var(--bg-2)] text-[var(--ink-soft)] transition-colors",title:"Reset view",children:(0,e.jsx)(t.RotateCcw,{className:"w-5 h-5"})})]}),(0,e.jsx)("div",{className:"absolute top-4 right-4 bg-[var(--surface)] rounded-[var(--radius-sm)] px-3 py-1.5 shadow border border-[var(--line)]",children:(0,e.jsxs)("span",{className:"text-xs text-[var(--ink-soft)] font-mono",children:["Scale: ",o.toFixed(2),"x"]})})]}):(0,e.jsx)("div",{className:`flex items-center justify-center h-full bg-[#f8f6f1] ${d}`,children:(0,e.jsxs)("div",{className:"text-center text-[var(--ink-soft)]",children:[(0,e.jsx)(j,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,e.jsx)("p",{className:"text-sm",children:"No plan available"}),(0,e.jsx)("p",{className:"text-xs mt-1",children:"Generate a project to view the floor plan"})]})})}let I=Math.PI/180,J=a.g,K={_global:J,version:"10.2.0",isBrowser:!1,isUnminified:/param/.test((function(a){}).toString()),dblClickWindow:400,getAngle:a=>K.angleDeg?a*I:a,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>K.DD.isDragging,isTransforming(){var a,b;return null!=(b=null==(a=K.Transformer)?void 0:a.isTransforming())&&b},isDragReady:()=>!!K.DD.node,releaseCanvasOnDestroy:!0,document:J.document,_injectGlobal(a){void 0!==J.Konva&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),J.Konva=a}},L=a=>{K[a.prototype.getClassName()]=a};K._injectGlobal(K);let M=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,N=()=>{if("u"<typeof document)throw Error(M)};class O{constructor(a=[1,0,0,1,0,0]){this.dirty=!1,this.m=a&&a.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new O(this.m)}copyInto(a){a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5]}point(a){let b=this.m;return{x:b[0]*a.x+b[2]*a.y+b[4],y:b[1]*a.x+b[3]*a.y+b[5]}}translate(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this}scale(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this}rotate(a){let b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=-(this.m[0]*c)+this.m[2]*b,g=-(this.m[1]*c)+this.m[3]*b;return this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(a,b){let c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;return this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f,this}multiply(a){let b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this}invert(){let a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this}getMatrix(){return this.m}decompose(){let a=this.m[0],b=this.m[1],c=this.m[2],d=this.m[3],e=this.m[4],f=this.m[5],g=a*d-b*c,h={x:e,y:f,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=a||0!=b){let e=Math.sqrt(a*a+b*b);h.rotation=b>0?Math.acos(a/e):-Math.acos(a/e),h.scaleX=e,h.scaleY=g/e,h.skewX=(a*c+b*d)/g,h.skewY=0}else if(0!=c||0!=d){let e=Math.sqrt(c*c+d*d);h.rotation=Math.PI/2-(d>0?Math.acos(-c/e):-Math.acos(c/e)),h.scaleX=g/e,h.scaleY=e,h.skewX=0,h.skewY=(a*c+b*d)/g}return h.rotation=X._getRotation(h.rotation),h}}let P=Math.PI/180,Q=180/Math.PI,R="Konva error: ",S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},T=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,U=[],V=null,W="u">typeof requestAnimationFrame&&requestAnimationFrame||function(a){setTimeout(a,16)},X={_isElement:a=>!!(a&&1==a.nodeType),_isFunction:a=>!!(a&&a.constructor&&a.call&&a.apply),_isPlainObject:a=>!!a&&a.constructor===Object,_isArray:a=>"[object Array]"===Object.prototype.toString.call(a),_isNumber:a=>"[object Number]"===Object.prototype.toString.call(a)&&!isNaN(a)&&isFinite(a),_isString:a=>"[object String]"===Object.prototype.toString.call(a),_isBoolean:a=>"[object Boolean]"===Object.prototype.toString.call(a),isObject:a=>a instanceof Object,isValidSelector(a){if("string"!=typeof a)return!1;let b=a[0];return"#"===b||"."===b||b===b.toUpperCase()},_sign:a=>0===a||a>0?1:-1,requestAnimFrame(a){U.push(a),1===U.length&&W(function(){let a=U;U=[],a.forEach(function(a){a()})})},createCanvasElement(){N();let a=document.createElement("canvas");try{a.style=a.style||{}}catch(a){}return a},createImageElement:()=>(N(),document.createElement("img")),_isInDocument(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},_urlToImage(a,b){let c=X.createImageElement();c.onload=function(){b(c)},c.src=a},_rgbToHex:(a,b,c)=>(0x1000000+(a<<16)+(b<<8)+c).toString(16).slice(1),_hexToRgb(a){let b=parseInt(a=a.replace("#",""),16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor(){let a=(0xffffff*Math.random()|0).toString(16);for(;a.length<6;)a="0"+a;return"#"+a},isCanvasFarblingActive(){if(null!==V)return V;if("u"<typeof document)return V=!1,!1;let a=this.createCanvasElement();a.width=10,a.height=10;let b=a.getContext("2d",{willReadFrequently:!0});b.clearRect(0,0,10,10),b.fillStyle="#282828",b.fillRect(0,0,10,10);let c=b.getImageData(0,0,10,10).data,d=!1;for(let a=0;a<100;a++)if(40!==c[4*a]||40!==c[4*a+1]||40!==c[4*a+2]||255!==c[4*a+3]){d=!0;break}return V=d,this.releaseCanvas(a),V},getHitColor(){let a=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(a):a},getHitColorKey(a,b,c){return this.isCanvasFarblingActive()&&(a=5*Math.round(a/5),b=5*Math.round(b/5),c=5*Math.round(c/5)),"#"+this._rgbToHex(a,b,c)},getSnappedHexColor(a){let b=this._hexToRgb(a);return"#"+this._rgbToHex(5*Math.round(b.r/5),5*Math.round(b.g/5),5*Math.round(b.b/5))},getRGB(a){let b;return a in S?{r:(b=S[a])[0],g:b[1],b:b[2]}:"#"===a[0]?this._hexToRgb(a.substring(1)):"rgb("===a.substr(0,4)?{r:parseInt((b=T.exec(a.replace(/ /g,"")))[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}:{r:0,g:0,b:0}},colorToRGBA:a=>(a=a||"black",X._namedColorToRBA(a)||X._hex3ColorToRGBA(a)||X._hex4ColorToRGBA(a)||X._hex6ColorToRGBA(a)||X._hex8ColorToRGBA(a)||X._rgbColorToRGBA(a)||X._rgbaColorToRGBA(a)||X._hslColorToRGBA(a)),_namedColorToRBA(a){let b=S[a.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(a){if(0===a.indexOf("rgb(")){let b=(a=a.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(a){if(0===a.indexOf("rgba(")){let b=(a=a.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((a,b)=>"%"===a.slice(-1)?3===b?parseInt(a)/100:parseInt(a)/100*255:Number(a));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(a){if("#"===a[0]&&9===a.length)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:parseInt(a.slice(7,9),16)/255}},_hex6ColorToRGBA(a){if("#"===a[0]&&7===a.length)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:1}},_hex4ColorToRGBA(a){if("#"===a[0]&&5===a.length)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:parseInt(a[4]+a[4],16)/255}},_hex3ColorToRGBA(a){if("#"===a[0]&&4===a.length)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:1}},_hslColorToRGBA(a){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(a)){let b,c,d,[e,...f]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a),g=Number(f[0])/360,h=Number(f[1])/100,i=Number(f[2])/100;if(0===h)return{r:Math.round(d=255*i),g:Math.round(d),b:Math.round(d),a:1};b=i<.5?i*(1+h):i+h-i*h;let j=2*i-b,k=[0,0,0];for(let a=0;a<3;a++)(c=g+-(1/3*(a-1)))<0&&c++,c>1&&c--,d=6*c<1?j+(b-j)*6*c:2*c<1?b:3*c<2?j+(b-j)*(2/3-c)*6:j,k[a]=255*d;return{r:Math.round(k[0]),g:Math.round(k[1]),b:Math.round(k[2]),a:1}}},haveIntersection:(a,b)=>!(b.x>a.x+a.width||b.x+b.width<a.x||b.y>a.y+a.height||b.y+b.height<a.y),cloneObject(a){let b={};for(let c in a)this._isPlainObject(a[c])?b[c]=this.cloneObject(a[c]):this._isArray(a[c])?b[c]=this.cloneArray(a[c]):b[c]=a[c];return b},cloneArray:a=>a.slice(0),degToRad:a=>a*P,radToDeg:a=>a*Q,_degToRad:a=>(X.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),X.degToRad(a)),_radToDeg:a=>(X.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),X.radToDeg(a)),_getRotation:a=>K.angleDeg?X.radToDeg(a):a,_capitalize:a=>a.charAt(0).toUpperCase()+a.slice(1),throw(a){throw Error(R+a)},error(a){console.error(R+a)},warn(a){K.showWarnings&&console.warn("Konva warning: "+a)},each(a,b){for(let c in a)b(c,a[c])},_inRange:(a,b,c)=>b<=a&&a<c,_getProjectionToSegment(a,b,c,d,e,f){let g,h,i,j=(a-c)*(a-c)+(b-d)*(b-d);if(0==j)g=a,h=b,i=(e-c)*(e-c)+(f-d)*(f-d);else{let k=((e-a)*(c-a)+(f-b)*(d-b))/j;k<0?(g=a,h=b,i=(a-e)*(a-e)+(b-f)*(b-f)):k>1?(g=c,h=d,i=(c-e)*(c-e)+(d-f)*(d-f)):i=((g=a+k*(c-a))-e)*(g-e)+((h=b+k*(d-b))-f)*(h-f)}return[g,h,i]},_getProjectionToLine(a,b,c){let d=X.cloneObject(a),e=Number.MAX_VALUE;return b.forEach(function(f,g){if(!c&&g===b.length-1)return;let h=b[(g+1)%b.length],i=X._getProjectionToSegment(f.x,f.y,h.x,h.y,a.x,a.y),j=i[0],k=i[1],l=i[2];l<e&&(d.x=j,d.y=k,e=l)}),d},_prepareArrayForTween(a,b,c){let d=[],e=[];if(a.length>b.length){let c=b;b=a,a=c}for(let b=0;b<a.length;b+=2)d.push({x:a[b],y:a[b+1]});for(let a=0;a<b.length;a+=2)e.push({x:b[a],y:b[a+1]});let f=[];return e.forEach(function(a){let b=X._getProjectionToLine(a,d,c);f.push(b.x),f.push(b.y)}),f},_prepareToStringify(a){let b;for(let c in a.visitedByCircularReferenceRemoval=!0,a)if(a.hasOwnProperty(c)&&a[c]&&"object"==typeof a[c]){if(b=Object.getOwnPropertyDescriptor(a,c),a[c].visitedByCircularReferenceRemoval||X._isElement(a[c]))if(!b.configurable)return null;else delete a[c];else if(null===X._prepareToStringify(a[c]))if(!b.configurable)return null;else delete a[c]}return delete a.visitedByCircularReferenceRemoval,a},_assign(a,b){for(let c in b)a[c]=b[c];return a},_getFirstPointerId:a=>a.touches?a.changedTouches[0].identifier:a.pointerId||999,releaseCanvas(...a){K.releaseCanvasOnDestroy&&a.forEach(a=>{a.width=0,a.height=0})},drawRoundedRectPath(a,b,c,d){let e=b<0?b:0,f=c<0?c:0;b=Math.abs(b),c=Math.abs(c);let g=0,h=0,i=0,j=0;"number"==typeof d?g=h=i=j=Math.min(d,b/2,c/2):(g=Math.min(d[0]||0,b/2,c/2),h=Math.min(d[1]||0,b/2,c/2),j=Math.min(d[2]||0,b/2,c/2),i=Math.min(d[3]||0,b/2,c/2)),a.moveTo(e+g,f),a.lineTo(e+b-h,f),a.arc(e+b-h,f+h,h,3*Math.PI/2,0,!1),a.lineTo(e+b,f+c-j),a.arc(e+b-j,f+c-j,j,0,Math.PI/2,!1),a.lineTo(e+i,f+c),a.arc(e+i,f+c-i,i,Math.PI/2,Math.PI,!1),a.lineTo(e,f+g),a.arc(e+g,f+g,g,Math.PI,3*Math.PI/2,!1)},drawRoundedPolygonPath(a,b,c,d,e){d=Math.abs(d);for(let f=0;f<c;f++){let g,h=b[(f-1+c)%c],i=b[f],j=b[(f+1)%c],k={x:i.x-h.x,y:i.y-h.y},l={x:j.x-i.x,y:j.y-i.y},m=Math.hypot(k.x,k.y),n=Math.hypot(l.x,l.y);g="number"==typeof e?e:f<e.length?e[f]:0,g=d*Math.cos(Math.PI/c)*Math.min(1,g/d*2);let o={x:k.x/m,y:k.y/m},p={x:l.x/n,y:l.y/n},q={x:i.x-o.x*g,y:i.y-o.y*g},r={x:i.x+p.x*g,y:i.y+p.y*g};0===f?a.moveTo(q.x,q.y):a.lineTo(q.x,q.y),a.arcTo(i.x,i.y,r.x,r.y,g)}}},Y=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Z=null;function $(){if(null!==Z)return Z;try{let a=X.createCanvasElement().getContext("2d");if(!a)return Z=!1,!1;return!!a&&"filter"in a}catch(a){return Z=!1,!1}}class _{constructor(a){this.canvas=a,K.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(a){a.fillEnabled()&&this._fill(a)}_fill(a){}strokeShape(a){a.hasStroke()&&this._stroke(a)}_stroke(a){}fillStrokeShape(a){a.attrs.fillAfterStrokeEnabled?(this.strokeShape(a),this.fillShape(a)):(this.fillShape(a),this.strokeShape(a))}getTrace(a,b){let c=this.traceArr,d=c.length,e="",f,g,h,i;for(f=0;f<d;f++)(h=(g=c[f]).method)?(i=g.args,e+=h,a?e+="()":X._isArray(i[0])?e+="(["+i.join(",")+"])":(b&&(i=i.map(a=>"number"==typeof a?Math.floor(a):a)),e+="("+i.join(",")+")")):(e+=g.property,a||(e+="="+g.val)),e+=";";return e}clearTrace(){this.traceArr=[]}_trace(a){let b=this.traceArr;b.push(a),b.length>=100&&b.shift()}reset(){let a=this.getCanvas().getPixelRatio();this.setTransform(+a,0,0,+a,0,0)}getCanvas(){return this.canvas}clear(a){let b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(a){let b=a.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(a){let b=a.getAbsoluteOpacity();1!==b&&this.setAttr("globalAlpha",b)}_applyLineJoin(a){let b=a.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}_applyMiterLimit(a){let b=a.attrs.miterLimit;null!=b&&this.setAttr("miterLimit",b)}setAttr(a,b){this._context[a]=b}arc(a,b,c,d,e,f){this._context.arc(a,b,c,d,e,f)}arcTo(a,b,c,d,e){this._context.arcTo(a,b,c,d,e)}beginPath(){this._context.beginPath()}bezierCurveTo(a,b,c,d,e,f){this._context.bezierCurveTo(a,b,c,d,e,f)}clearRect(a,b,c,d){this._context.clearRect(a,b,c,d)}clip(...a){this._context.clip.apply(this._context,a)}closePath(){this._context.closePath()}createImageData(a,b){let c=arguments;return 2===c.length?this._context.createImageData(a,b):1===c.length?this._context.createImageData(a):void 0}createLinearGradient(a,b,c,d){return this._context.createLinearGradient(a,b,c,d)}createPattern(a,b){return this._context.createPattern(a,b)}createRadialGradient(a,b,c,d,e,f){return this._context.createRadialGradient(a,b,c,d,e,f)}drawImage(a,b,c,d,e,f,g,h,i){let j=arguments,k=this._context;3===j.length?k.drawImage(a,b,c):5===j.length?k.drawImage(a,b,c,d,e):9===j.length&&k.drawImage(a,b,c,d,e,f,g,h,i)}ellipse(a,b,c,d,e,f,g,h){this._context.ellipse(a,b,c,d,e,f,g,h)}isPointInPath(a,b,c,d){return c?this._context.isPointInPath(c,a,b,d):this._context.isPointInPath(a,b,d)}fill(...a){this._context.fill.apply(this._context,a)}fillRect(a,b,c,d){this._context.fillRect(a,b,c,d)}strokeRect(a,b,c,d){this._context.strokeRect(a,b,c,d)}fillText(a,b,c,d){d?this._context.fillText(a,b,c,d):this._context.fillText(a,b,c)}measureText(a){return this._context.measureText(a)}getImageData(a,b,c,d){return this._context.getImageData(a,b,c,d)}lineTo(a,b){this._context.lineTo(a,b)}moveTo(a,b){this._context.moveTo(a,b)}rect(a,b,c,d){this._context.rect(a,b,c,d)}roundRect(a,b,c,d,e){this._context.roundRect(a,b,c,d,e)}putImageData(a,b,c){this._context.putImageData(a,b,c)}quadraticCurveTo(a,b,c,d){this._context.quadraticCurveTo(a,b,c,d)}restore(){this._context.restore()}rotate(a){this._context.rotate(a)}save(){this._context.save()}scale(a,b){this._context.scale(a,b)}setLineDash(a){this._context.setLineDash?this._context.setLineDash(a):"mozDash"in this._context?this._context.mozDash=a:"webkitLineDash"in this._context&&(this._context.webkitLineDash=a)}getLineDash(){return this._context.getLineDash()}setTransform(a,b,c,d,e,f){this._context.setTransform(a,b,c,d,e,f)}stroke(a){a?this._context.stroke(a):this._context.stroke()}strokeText(a,b,c,d){this._context.strokeText(a,b,c,d)}transform(a,b,c,d,e,f){this._context.transform(a,b,c,d,e,f)}translate(a,b){this._context.translate(a,b)}_enableTrace(){let a=this,b=Y.length,c=this.setAttr,d,e,f=function(b){let c=a[b],d;a[b]=function(){return e=function(a){let b=[],c=a.length;for(let d=0;d<c;d++){let c=a[d];X._isNumber(c)?c=Math.round(1e3*c)/1e3:X._isString(c)||(c+=""),b.push(c)}return b}(Array.prototype.slice.call(arguments,0)),d=c.apply(a,arguments),a._trace({method:b,args:e}),d}};for(d=0;d<b;d++)f(Y[d]);a.setAttr=function(){c.apply(a,arguments);let b=arguments[0],d=arguments[1];("shadowOffsetX"===b||"shadowOffsetY"===b||"shadowBlur"===b)&&(d/=this.canvas.getPixelRatio()),a._trace({property:b,val:d})}}_applyGlobalCompositeOperation(a){let b=a.attrs.globalCompositeOperation;b&&"source-over"!==b&&this.setAttr("globalCompositeOperation",b)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"].forEach(function(a){Object.defineProperty(_.prototype,a,{get(){return this._context[a]},set(b){this._context[a]=b}})});class aa extends _{constructor(a,{willReadFrequently:b=!1}={}){super(a),this._context=a._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(a){let b=a.fill();this.setAttr("fillStyle",b),a._fillFunc(this)}_fillPattern(a){this.setAttr("fillStyle",a._getFillPattern()),a._fillFunc(this)}_fillLinearGradient(a){let b=a._getLinearGradient();b&&(this.setAttr("fillStyle",b),a._fillFunc(this))}_fillRadialGradient(a){let b=a._getRadialGradient();b&&(this.setAttr("fillStyle",b),a._fillFunc(this))}_fill(a){let b=a.fill(),c=a.getFillPriority();if(b&&"color"===c)return void this._fillColor(a);let d=a.getFillPatternImage();if(d&&"pattern"===c)return void this._fillPattern(a);let e=a.getFillLinearGradientColorStops();if(e&&"linear-gradient"===c)return void this._fillLinearGradient(a);let f=a.getFillRadialGradientColorStops();f&&"radial-gradient"===c?this._fillRadialGradient(a):b?this._fillColor(a):d?this._fillPattern(a):e?this._fillLinearGradient(a):f&&this._fillRadialGradient(a)}_strokeLinearGradient(a){let b=a.getStrokeLinearGradientStartPoint(),c=a.getStrokeLinearGradientEndPoint(),d=a.getStrokeLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(let a=0;a<d.length;a+=2)e.addColorStop(d[a],d[a+1]);this.setAttr("strokeStyle",e)}}_stroke(a){let b=a.dash(),c=a.getStrokeScaleEnabled();if(a.hasStroke()){if(!c){this.save();let a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(a),b&&a.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",a.dashOffset())),this.setAttr("lineWidth",a.strokeWidth()),a.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),a.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(a):this.setAttr("strokeStyle",a.stroke()),a._strokeFunc(this),c||this.restore()}}_applyShadow(a){var b,c,d;let e=null!=(b=a.getShadowRGBA())?b:"black",f=null!=(c=a.getShadowBlur())?c:5,g=null!=(d=a.getShadowOffset())?d:{x:0,y:0},h=a.getAbsoluteScale(),i=this.canvas.getPixelRatio(),j=h.x*i,k=h.y*i;this.setAttr("shadowColor",e),this.setAttr("shadowBlur",f*Math.min(Math.abs(j),Math.abs(k))),this.setAttr("shadowOffsetX",g.x*j),this.setAttr("shadowOffsetY",g.y*k)}}class ab extends _{constructor(a){super(a),this._context=a._canvas.getContext("2d",{willReadFrequently:!0})}_fill(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()}strokeShape(a){a.hasHitStroke()&&this._stroke(a)}_stroke(a){if(a.hasHitStroke()){let b=a.getStrokeScaleEnabled();if(!b){this.save();let a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(a);let c=a.hitStrokeWidth(),d="auto"===c?a.strokeWidth():c;this.setAttr("lineWidth",d),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this),b||this.restore()}}}class ac{constructor(a){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const c=(a||{}).pixelRatio||K.pixelRatio||function(){if(b)return b;let a=X.createCanvasElement(),c=a.getContext("2d");return b=(K._global.devicePixelRatio||1)/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1),X.releaseCanvas(a),b}();this.pixelRatio=c,this._canvas=X.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(a){let b=this.pixelRatio;this.pixelRatio=a,this.setSize(this.getWidth()/b,this.getHeight()/b)}setWidth(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px";let b=this.pixelRatio;this.getContext()._context.scale(b,b)}setHeight(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px";let b=this.pixelRatio;this.getContext()._context.scale(b,b)}getWidth(){return this.width}getHeight(){return this.height}setSize(a,b){this.setWidth(a||0),this.setHeight(b||0)}toDataURL(a,b){try{return this._canvas.toDataURL(a,b)}catch(a){try{return this._canvas.toDataURL()}catch(a){return X.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class ad extends ac{constructor(a={width:0,height:0,willReadFrequently:!1}){super(a),this.context=new aa(this,{willReadFrequently:a.willReadFrequently}),this.setSize(a.width,a.height)}}class ae extends ac{constructor(a={width:0,height:0}){super(a),this.hitCanvas=!0,this.context=new ab(this),this.setSize(a.width,a.height)}}let af={get isDragging(){let a=!1;return af._dragElements.forEach(b=>{"dragging"===b.dragStatus&&(a=!0)}),a},justDragged:!1,get node(){let a;return af._dragElements.forEach(b=>{a=b.node}),a},_dragElements:new Map,_drag(a){let b=[];af._dragElements.forEach((c,d)=>{let{node:e}=c,f=e.getStage();f.setPointersPositions(a),void 0===c.pointerId&&(c.pointerId=X._getFirstPointerId(a));let g=f._changedPointerPositions.find(a=>a.id===c.pointerId);if(g){if("dragging"!==c.dragStatus){let b=e.dragDistance();if(Math.max(Math.abs(g.x-c.startPointerPos.x),Math.abs(g.y-c.startPointerPos.y))<b||(e.startDrag({evt:a}),!e.isDragging()))return}e._setDragPosition(a,c),b.push(e)}}),b.forEach(b=>{b.fire("dragmove",{type:"dragmove",target:b,evt:a},!0)})},_endDragBefore(a){let b=[];af._dragElements.forEach(c=>{let{node:d}=c,e=d.getStage();if(a&&e.setPointersPositions(a),!e._changedPointerPositions.find(a=>a.id===c.pointerId))return;("dragging"===c.dragStatus||"stopped"===c.dragStatus)&&(af.justDragged=!0,K._mouseListenClick=!1,K._touchListenClick=!1,K._pointerListenClick=!1,c.dragStatus="stopped");let f=c.node.getLayer()||c.node instanceof K.Stage&&c.node;f&&-1===b.indexOf(f)&&b.push(f)}),b.forEach(a=>{a.draw()})},_endDragAfter(a){af._dragElements.forEach((b,c)=>{"stopped"===b.dragStatus&&b.node.fire("dragend",{type:"dragend",target:b.node,evt:a},!0),"dragging"!==b.dragStatus&&af._dragElements.delete(c)})}};function ag(a){return X._isString(a)?'"'+a+'"':"[object Number]"===Object.prototype.toString.call(a)||X._isBoolean(a)?a:Object.prototype.toString.call(a)}function ah(a){return a>255?255:a<0?0:Math.round(a)}function ai(){if(K.isUnminified)return function(a,b){return X._isNumber(a)||X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a number.'),a}}function aj(a){if(K.isUnminified)return function(b,c){let d=X._isNumber(b),e=X._isArray(b)&&b.length==a;return d||e||X.warn(ag(b)+' is a not valid value for "'+c+'" attribute. The value should be a number or Array<number>('+a+")"),b}}function ak(){if(K.isUnminified)return function(a,b){let c=X._isNumber(a),d="auto"===a;return c||d||X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a number or "auto".'),a}}function al(){if(K.isUnminified)return function(a,b){return X._isString(a)||X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a string.'),a}}function am(){if(K.isUnminified)return function(a,b){let c=X._isString(a),d="[object CanvasGradient]"===Object.prototype.toString.call(a)||a&&a.addColorStop;return c||d||X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a string or a native gradient.'),a}}function an(){if(K.isUnminified)return function(a,b){return!0!==a&&!1!==a&&X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a boolean.'),a}}K.isBrowser&&(window.addEventListener("mouseup",af._endDragBefore,!0),window.addEventListener("touchend",af._endDragBefore,!0),window.addEventListener("touchcancel",af._endDragBefore,!0),window.addEventListener("mousemove",af._drag),window.addEventListener("touchmove",af._drag),window.addEventListener("mouseup",af._endDragAfter,!1),window.addEventListener("touchend",af._endDragAfter,!1),window.addEventListener("touchcancel",af._endDragAfter,!1));let ao={addGetterSetter(a,b,c,d,e){ao.addGetter(a,b,c),ao.addSetter(a,b,d,e),ao.addOverloadedGetterSetter(a,b)},addGetter(a,b,c){let d="get"+X._capitalize(b);a.prototype[d]=a.prototype[d]||function(){let a=this.attrs[b];return void 0===a?c:a}},addSetter(a,b,c,d){let e="set"+X._capitalize(b);a.prototype[e]||ao.overWriteSetter(a,b,c,d)},overWriteSetter(a,b,c,d){let e="set"+X._capitalize(b);a.prototype[e]=function(a){return c&&null!=a&&(a=c.call(this,a,b)),this._setAttr(b,a),d&&d.call(this),this}},addComponentsGetterSetter(a,b,c,d,e){let f=c.length,g=X._capitalize,h="get"+g(b),i="set"+g(b);a.prototype[h]=function(){let a={};for(let d=0;d<f;d++){let e=c[d];a[e]=this.getAttr(b+g(e))}return a};let j=function(a){if(K.isUnminified)return function(b,c){return null==b||X.isObject(b)||X.warn(ag(b)+' is a not valid value for "'+c+'" attribute. The value should be an object with properties '+a),b}}(c);a.prototype[i]=function(a){let f=this.attrs[b];for(let c in d&&(a=d.call(this,a,b)),j&&j.call(this,a,b),a)a.hasOwnProperty(c)&&this._setAttr(b+g(c),a[c]);return a||c.forEach(a=>{this._setAttr(b+g(a),void 0)}),this._fireChangeEvent(b,f,a),e&&e.call(this),this},ao.addOverloadedGetterSetter(a,b)},addOverloadedGetterSetter(a,b){let c=X._capitalize(b),d="set"+c,e="get"+c;a.prototype[b]=function(){return arguments.length?(this[d](arguments[0]),this):this[e]()}},addDeprecatedGetterSetter(a,b,c,d){X.error("Adding deprecated "+b);let e="get"+X._capitalize(b),f=b+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[e]=function(){X.error(f);let a=this.attrs[b];return void 0===a?c:a},ao.addSetter(a,b,d,function(){X.error(f)}),ao.addOverloadedGetterSetter(a,b)},backCompat(a,b){X.each(b,function(b,c){let d=a.prototype[c],e="get"+X._capitalize(b),f="set"+X._capitalize(b);function g(){d.apply(this,arguments),X.error('"'+b+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[b]=g,a.prototype[e]=g,a.prototype[f]=g})},afterSetFilter(){this._filterUpToDate=!1}},ap="absoluteOpacity",aq="allEventListeners",ar="absoluteTransform",as="absoluteScale",at="canvas",au="listening",av="Shape",aw="stage",ax="transform",ay="visible",az=1;class aA{constructor(a){this._id=az++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(a),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(a){(a===ax||a===ar)&&this._cache.get(a)?this._cache.get(a).dirty=!0:a?this._cache.delete(a):this._cache.clear()}_getCache(a,b){let c=this._cache.get(a),d=a===ax||a===ar;return(void 0===c||d&&!0===c.dirty)&&(c=b.call(this),this._cache.set(a,c)),c}_calculate(a,b,c){if(!this._attachedDepsListeners.get(a)){let c=b.map(a=>a+"Change.konva").join(" ");this.on(c,()=>{this._clearCache(a)}),this._attachedDepsListeners.set(a,!0)}return this._getCache(a,c)}_getCanvasCache(){return this._cache.get(at)}_clearSelfAndDescendantCache(a){this._clearCache(a),a===ar&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(at)){let{scene:a,filter:b,hit:c}=this._cache.get(at);X.releaseCanvas(a._canvas,b._canvas,c._canvas),this._cache.delete(at)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(a){let b=a||{},c={};(void 0===b.x||void 0===b.y||void 0===b.width||void 0===b.height)&&(c=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let d=Math.ceil(b.width||c.width),e=Math.ceil(b.height||c.height),f=b.pixelRatio,g=void 0===b.x?Math.floor(c.x):b.x,h=void 0===b.y?Math.floor(c.y):b.y,i=b.offset||0,j=b.drawBorder||!1,k=b.hitCanvasPixelRatio||1;if(!d||!e)return void X.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");let l=+(Math.abs(Math.round(c.x)-g)>.5),m=+(Math.abs(Math.round(c.y)-h)>.5);d+=2*i+l,e+=2*i+m,g-=i,h-=i;let n=new ad({pixelRatio:f,width:d,height:e}),o=new ad({pixelRatio:f,width:0,height:0,willReadFrequently:!0}),p=new ae({pixelRatio:k,width:d,height:e}),q=n.getContext(),r=p.getContext(),s=new ad({width:n.width/n.pixelRatio+Math.abs(g),height:n.height/n.pixelRatio+Math.abs(h),pixelRatio:n.pixelRatio}),t=s.getContext();return p.isCache=!0,n.isCache=!0,this._cache.delete(at),this._filterUpToDate=!1,!1===b.imageSmoothingEnabled&&(n.getContext()._context.imageSmoothingEnabled=!1,o.getContext()._context.imageSmoothingEnabled=!1),q.save(),r.save(),t.save(),q.translate(-g,-h),r.translate(-g,-h),t.translate(-g,-h),s.x=g,s.y=h,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ap),this._clearSelfAndDescendantCache(as),this.drawScene(n,this,s),this.drawHit(p,this),this._isUnderCache=!1,q.restore(),r.restore(),j&&(q.save(),q.beginPath(),q.rect(0,0,d,e),q.closePath(),q.setAttr("strokeStyle","red"),q.setAttr("lineWidth",5),q.stroke(),q.restore()),X.releaseCanvas(s._canvas),this._cache.set(at,{scene:n,filter:o,hit:p,x:g,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(at)}getClientRect(a){throw Error('abstract "getClientRect" method call')}_transformedRect(a,b){let c=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}],d=1/0,e=1/0,f=-1/0,g=-1/0,h=this.getAbsoluteTransform(b);return c.forEach(function(a){let b=h.point(a);void 0===d&&(d=f=b.x,e=g=b.y),d=Math.min(d,b.x),e=Math.min(e,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y)}),{x:d,y:e,width:f-d,height:g-e}}_drawCachedSceneCanvas(a){a.save(),a._applyOpacity(this),a._applyGlobalCompositeOperation(this);let b=this._getCanvasCache();a.translate(b.x,b.y);let c=this._getCachedSceneCanvas(),d=c.pixelRatio;a.drawImage(c._canvas,0,0,c.width/d,c.height/d),a.restore()}_drawCachedHitCanvas(a){let b=this._getCanvasCache(),c=b.hit;a.save(),a.translate(b.x,b.y),a.drawImage(c._canvas,0,0,c.width/c.pixelRatio,c.height/c.pixelRatio),a.restore()}_getCachedSceneCanvas(){let a=this.filters(),b=this._getCanvasCache(),c=b.scene,d=b.filter,e=d.getContext(),f,g,h,i;if(!a||0===a.length)return c;if(this._filterUpToDate)return d;let j=!0;for(let b=0;b<a.length;b++)if("string"==typeof a[b]&&!$(),"string"!=typeof a[b]||!$()){j=!1;break}let k=c.pixelRatio;if(d.setSize(c.width/c.pixelRatio,c.height/c.pixelRatio),j){let b=a.join(" ");return e.save(),e.setAttr("filter",b),e.drawImage(c._canvas,0,0,c.getWidth()/k,c.getHeight()/k),e.restore(),this._filterUpToDate=!0,d}try{for(f=a.length,e.clear(),e.drawImage(c._canvas,0,0,c.getWidth()/k,c.getHeight()/k),g=e.getImageData(0,0,d.getWidth(),d.getHeight()),h=0;h<f;h++)i=a[h],"string"==typeof i&&(i=function(a){let b,c=/(\w+)\(([^)]+)\)/g;for(;null!==(b=c.exec(a));){let[,a,c]=b;switch(a){case"blur":{let a=parseFloat(c.replace("px",""));return function(b){this.blurRadius(.5*a);let c=K.Filters;c&&c.Blur&&c.Blur.call(this,b)}}case"brightness":{let a=c.includes("%")?parseFloat(c)/100:parseFloat(c);return function(b){this.brightness(a);let c=K.Filters;c&&c.Brightness&&c.Brightness.call(this,b)}}case"contrast":{let a=parseFloat(c);return function(b){let c=100*(Math.sqrt(a)-1);this.contrast(c);let d=K.Filters;d&&d.Contrast&&d.Contrast.call(this,b)}}case"grayscale":return function(a){let b=K.Filters;b&&b.Grayscale&&b.Grayscale.call(this,a)};case"sepia":return function(a){let b=K.Filters;b&&b.Sepia&&b.Sepia.call(this,a)};case"invert":return function(a){let b=K.Filters;b&&b.Invert&&b.Invert.call(this,a)};default:X.warn(`CSS filter "${a}" is not supported in fallback mode. Consider using function filters for better compatibility.`)}}return()=>{}}(i)),i.call(this,g),e.putImageData(g,0,0)}catch(a){X.error("Unable to apply filter. "+a.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,d}on(a,b){if(this._cache&&this._cache.delete(aq),3==arguments.length)return this._delegate.apply(this,arguments);let c=a.split(" ");for(let a=0;a<c.length;a++){let d=c[a].split("."),e=d[0],f=d[1]||"";this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push({name:f,handler:b})}return this}off(a,b){let c=(a||"").split(" "),d=c.length,e,f,g,h,i;if(this._cache&&this._cache.delete(aq),!a)for(f in this.eventListeners)this._off(f);for(e=0;e<d;e++)if(h=(g=c[e].split("."))[0],i=g[1],h)this.eventListeners[h]&&this._off(h,i,b);else for(f in this.eventListeners)this._off(f,i,b);return this}dispatchEvent(a){let b={target:this,type:a.type,evt:a};return this.fire(a.type,b),this}addEventListener(a,b){return this.on(a,function(a){b.call(this,a.evt)}),this}removeEventListener(a){return this.off(a),this}_delegate(a,b,c){let d=this;this.on(a,function(a){let e=a.target.findAncestors(b,!0,d);for(let b=0;b<e.length;b++)(a=X.cloneObject(a)).currentTarget=e[b],c.call(e[b],a)})}remove(){return this.isDragging()&&this.stopDrag(),af._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ar),this._clearSelfAndDescendantCache(ap),this._clearSelfAndDescendantCache(as),this._clearSelfAndDescendantCache(aw),this._clearSelfAndDescendantCache(ay),this._clearSelfAndDescendantCache(au)}_remove(){this._clearCaches();let a=this.getParent();a&&a.children&&(a.children.splice(this.index,1),a._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(a){let b="get"+X._capitalize(a);return X._isFunction(this[b])?this[b]():this.attrs[a]}getAncestors(){let a=this.getParent(),b=[];for(;a;)b.push(a),a=a.getParent();return b}getAttrs(){return this.attrs||{}}setAttrs(a){return this._batchTransformChanges(()=>{let b,c;if(!a)return this;for(b in a)"children"!==b&&(c="set"+X._capitalize(b),X._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]))}),this}isListening(){return this._getCache(au,this._isListening)}_isListening(a){if(!this.listening())return!1;let b=this.getParent();return!b||b===a||this===a||b._isListening(a)}isVisible(){return this._getCache(ay,this._isVisible)}_isVisible(a){if(!this.visible())return!1;let b=this.getParent();return!b||b===a||this===a||b._isVisible(a)}shouldDrawHit(a,b=!1){if(a)return this._isVisible(a)&&this._isListening(a);let c=this.getLayer(),d=!1;af._dragElements.forEach(a=>{"dragging"!==a.dragStatus||("Stage"===a.node.nodeType?d=!0:a.node.getLayer()===c&&(d=!0))});let e=!b&&!K.hitOnDragEnabled&&(d||K.isTransforming());return this.isListening()&&this.isVisible()&&!e}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let a=this.getDepth(),b=this,c=0,d,e,f,g,h=this.getStage();return"Stage"!==b.nodeType&&h&&function h(i){for(f=0,d=[],e=i.length;f<e;f++)g=i[f],c++,g.nodeType!==av&&(d=d.concat(g.getChildren().slice())),g._id===b._id&&(f=e);d.length>0&&d[0].getDepth()<=a&&h(d)}(h.getChildren()),c}getDepth(){let a=0,b=this.parent;for(;b;)a++,b=b.parent;return a}_batchTransformChanges(a){this._batchingTransformChange=!0,a(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ax),this._clearSelfAndDescendantCache(ar)),this._needClearTransformCache=!1}setPosition(a){return this._batchTransformChanges(()=>{this.x(a.x),this.y(a.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let a=this.getStage();if(!a)return null;let b=a.getPointerPosition();if(!b)return null;let c=this.getAbsoluteTransform().copy();return c.invert(),c.point(b)}getAbsolutePosition(a){let b=!1,c=this.parent;for(;c;){if(c.isCached()){b=!0;break}c=c.parent}b&&!a&&(a=!0);let d=this.getAbsoluteTransform(a).getMatrix(),e=new O,f=this.offset();return e.m=d.slice(),e.translate(f.x,f.y),e.getTranslation()}setAbsolutePosition(a){let{x:b,y:c,...d}=this._clearTransform();this.attrs.x=b,this.attrs.y=c,this._clearCache(ax);let e=this._getAbsoluteTransform().copy();return e.invert(),e.translate(a.x,a.y),a={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this._setTransform(d),this.setPosition({x:a.x,y:a.y}),this._clearCache(ax),this._clearSelfAndDescendantCache(ar),this}_setTransform(a){let b;for(b in a)this.attrs[b]=a[b]}_clearTransform(){let a={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,a}move(a){let b=a.x,c=a.y,d=this.x(),e=this.y();return void 0!==b&&(d+=b),void 0!==c&&(e+=c),this.setPosition({x:d,y:e}),this}_eachAncestorReverse(a,b){let c=[],d=this.getParent(),e,f;if(!b||b._id!==this._id){for(c.unshift(this);d&&(!b||d._id!==b._id);)c.unshift(d),d=d.parent;for(f=0,e=c.length;f<e;f++)a(c[f])}}rotate(a){return this.rotation(this.rotation()+a),this}moveToTop(){if(!this.parent)return X.warn("Node has no parent. moveToTop function is ignored."),!1;let a=this.index;return a<this.parent.getChildren().length-1&&(this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return X.warn("Node has no parent. moveUp function is ignored."),!1;let a=this.index;return a<this.parent.getChildren().length-1&&(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return X.warn("Node has no parent. moveDown function is ignored."),!1;let a=this.index;return a>0&&(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return X.warn("Node has no parent. moveToBottom function is ignored."),!1;let a=this.index;return a>0&&(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(a){if(!this.parent)return X.warn("Node has no parent. zIndex parameter is ignored."),this;(a<0||a>=this.parent.children.length)&&X.warn("Unexpected value "+a+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");let b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ap,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let a=this.opacity(),b=this.getParent();return b&&!b._isUnderCache&&(a*=b.getAbsoluteOpacity()),a}moveTo(a){return this.getParent()!==a&&(this._remove(),a.add(this)),this}toObject(){let a=this.getAttrs(),b,c,d,e,f={attrs:{},className:this.getClassName()};for(b in a)c=a[b],(!X.isObject(c)||X._isPlainObject(c)||X._isArray(c))&&(d="function"==typeof this[b]&&this[b],delete a[b],e=d?d.call(this):null,a[b]=c,e!==c&&(f.attrs[b]=c));return X._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(a,b,c){let d=[];b&&this._isMatch(a)&&d.push(this);let e=this.parent;for(;e&&e!==c;)e._isMatch(a)&&d.push(e),e=e.parent;return d}isAncestorOf(a){return!1}findAncestor(a,b,c){return this.findAncestors(a,b,c)[0]}_isMatch(a){if(!a)return!1;if("function"==typeof a)return a(this);let b=a.replace(/ /g,"").split(","),c=b.length,d,e;for(d=0;d<c;d++)if(e=b[d],X.isValidSelector(e)||(X.warn('Selector "'+e+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),X.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),X.warn("Konva is awesome, right?")),"#"===e.charAt(0)){if(this.id()===e.slice(1))return!0}else if("."===e.charAt(0)){if(this.hasName(e.slice(1)))return!0}else if(this.className===e||this.nodeType===e)return!0;return!1}getLayer(){let a=this.getParent();return a?a.getLayer():null}getStage(){return this._getCache(aw,this._getStage)}_getStage(){let a=this.getParent();return a?a.getStage():null}fire(a,b={},c){return b.target=b.target||this,c?this._fireAndBubble(a,b):this._fire(a,b),this}getAbsoluteTransform(a){return a?this._getAbsoluteTransform(a):this._getCache(ar,this._getAbsoluteTransform)}_getAbsoluteTransform(a){let b;if(a)return b=new O,this._eachAncestorReverse(function(a){let c=a.transformsEnabled();"all"===c?b.multiply(a.getTransform()):"position"===c&&b.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},a),b;{b=this._cache.get(ar)||new O,this.parent?this.parent.getAbsoluteTransform().copyInto(b):b.reset();let a=this.transformsEnabled();if("all"===a)b.multiply(this.getTransform());else if("position"===a){let a=this.attrs.x||0,c=this.attrs.y||0,d=this.attrs.offsetX||0,e=this.attrs.offsetY||0;b.translate(a-d,c-e)}return b.dirty=!1,b}}getAbsoluteScale(a){let b=this;for(;b;)b._isUnderCache&&(a=b),b=b.getParent();let c=this.getAbsoluteTransform(a).decompose();return{x:c.scaleX,y:c.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ax,this._getTransform)}_getTransform(){var a,b;let c=this._cache.get(ax)||new O;c.reset();let d=this.x(),e=this.y(),f=K.getAngle(this.rotation()),g=null!=(a=this.attrs.scaleX)?a:1,h=null!=(b=this.attrs.scaleY)?b:1,i=this.attrs.skewX||0,j=this.attrs.skewY||0,k=this.attrs.offsetX||0,l=this.attrs.offsetY||0;return(0!==d||0!==e)&&c.translate(d,e),0!==f&&c.rotate(f),(0!==i||0!==j)&&c.skew(i,j),(1!==g||1!==h)&&c.scale(g,h),(0!==k||0!==l)&&c.translate(-1*k,-1*l),c.dirty=!1,c}clone(a){let b=X.cloneObject(this.attrs),c,d,e,f,g;for(c in a)b[c]=a[c];let h=new this.constructor(b);for(c in this.eventListeners)for(f=0,e=(d=this.eventListeners[c]).length;f<e;f++)0>(g=d[f]).name.indexOf("konva")&&(h.eventListeners[c]||(h.eventListeners[c]=[]),h.eventListeners[c].push(g));return h}_toKonvaCanvas(a){a=a||{};let b=this.getClientRect(),c=this.getStage(),d=void 0!==a.x?a.x:Math.floor(b.x),e=void 0!==a.y?a.y:Math.floor(b.y),f=a.pixelRatio||1,g=new ad({width:a.width||Math.ceil(b.width)||(c?c.width():0),height:a.height||Math.ceil(b.height)||(c?c.height():0),pixelRatio:f}),h=g.getContext(),i=new ad({width:g.width/g.pixelRatio+Math.abs(d),height:g.height/g.pixelRatio+Math.abs(e),pixelRatio:g.pixelRatio});return!1===a.imageSmoothingEnabled&&(h._context.imageSmoothingEnabled=!1),h.save(),(d||e)&&h.translate(-1*d,-1*e),this.drawScene(g,void 0,i),h.restore(),g}toCanvas(a){return this._toKonvaCanvas(a)._canvas}toDataURL(a){let b=(a=a||{}).mimeType||null,c=a.quality||null,d=this._toKonvaCanvas(a).toDataURL(b,c);return a.callback&&a.callback(d),d}toImage(a){return new Promise((b,c)=>{try{let c=null==a?void 0:a.callback;c&&delete a.callback,X._urlToImage(this.toDataURL(a),function(a){b(a),null==c||c(a)})}catch(a){c(a)}})}toBlob(a){return new Promise((b,c)=>{try{let c=null==a?void 0:a.callback;c&&delete a.callback,this.toCanvas(a).toBlob(a=>{b(a),null==c||c(a)},null==a?void 0:a.mimeType,null==a?void 0:a.quality)}catch(a){c(a)}})}setSize(a){return this.width(a.width),this.height(a.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():K.dragDistance}_off(a,b,c){let d=this.eventListeners[a],e,f,g;for(e=0;e<d.length;e++)if(f=d[e].name,g=d[e].handler,("konva"!==f||"konva"===b)&&(!b||f===b)&&(!c||c===g)){if(d.splice(e,1),0===d.length){delete this.eventListeners[a];break}e--}}_fireChangeEvent(a,b,c){this._fire(a+"Change",{oldVal:b,newVal:c})}addName(a){if(!this.hasName(a)){let b=this.name();this.name(b?b+" "+a:a)}return this}hasName(a){if(!a)return!1;let b=this.name();return!!b&&-1!==(b||"").split(/\s/g).indexOf(a)}removeName(a){let b=(this.name()||"").split(/\s/g),c=b.indexOf(a);return -1!==c&&(b.splice(c,1),this.name(b.join(" "))),this}setAttr(a,b){let c=this["set"+X._capitalize(a)];return X._isFunction(c)?c.call(this,b):this._setAttr(a,b),this}_requestDraw(){if(K.autoDrawEnabled){let a=this.getLayer()||this.getStage();null==a||a.batchDraw()}}_setAttr(a,b){let c=this.attrs[a];(c!==b||X.isObject(b))&&(null==b?delete this.attrs[a]:this.attrs[a]=b,this._shouldFireChangeEvents&&this._fireChangeEvent(a,c,b),this._requestDraw())}_setComponentAttr(a,b,c){let d;void 0!==c&&((d=this.attrs[a])||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=c,this._fireChangeEvent(a,d,c))}_fireAndBubble(a,b,c){b&&this.nodeType===av&&(b.target=this);let d=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(!(-1!==d.indexOf(a)&&(c&&(this===c||this.isAncestorOf&&this.isAncestorOf(c))||"Stage"===this.nodeType&&!c))){this._fire(a,b);let e=-1!==d.indexOf(a)&&c&&c.isAncestorOf&&c.isAncestorOf(this)&&!c.isAncestorOf(this.parent);(b&&!b.cancelBubble||!b)&&this.parent&&this.parent.isListening()&&!e&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c):this._fireAndBubble.call(this.parent,a,b))}}_getProtoListeners(a){var b,c;let{nodeType:d}=this,e=aA.protoListenerMap.get(d)||{},f=null==e?void 0:e[a];if(void 0===f){f=[];let g=Object.getPrototypeOf(this);for(;g;){let d=null!=(c=null==(b=g.eventListeners)?void 0:b[a])?c:[];f.push(...d),g=Object.getPrototypeOf(g)}e[a]=f,aA.protoListenerMap.set(d,e)}return f}_fire(a,b){(b=b||{}).currentTarget=this,b.type=a;let c=this._getProtoListeners(a);if(c)for(let a=0;a<c.length;a++)c[a].handler.call(this,b);let d=this.eventListeners[a];if(d)for(let a=0;a<d.length;a++)d[a].handler.call(this,b)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(a){let b=a?a.pointerId:void 0,c=this.getStage(),d=this.getAbsolutePosition();if(!c)return;let e=c._getPointerById(b)||c._changedPointerPositions[0]||d;af._dragElements.set(this._id,{node:this,startPointerPos:e,offset:{x:e.x-d.x,y:e.y-d.y},dragStatus:"ready",pointerId:b})}startDrag(a,b=!0){af._dragElements.has(this._id)||this._createDragElement(a),af._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:a&&a.evt},b)}_setDragPosition(a,b){let c=this.getStage()._getPointerById(b.pointerId);if(!c)return;let d={x:c.x-b.offset.x,y:c.y-b.offset.y},e=this.dragBoundFunc();if(void 0!==e){let b=e.call(this,d,a);b?d=b:X.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===d.x&&this._lastPos.y===d.y||(this.setAbsolutePosition(d),this._requestDraw()),this._lastPos=d}stopDrag(a){let b=af._dragElements.get(this._id);b&&(b.dragStatus="stopped"),af._endDragBefore(a),af._endDragAfter(a)}setDraggable(a){this._setAttr("draggable",a),this._dragChange()}isDragging(){let a=af._dragElements.get(this._id);return!!a&&"dragging"===a.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(a){if(!(void 0===a.evt.button||K.dragButtons.indexOf(a.evt.button)>=0)||this.isDragging())return;let b=!1;af._dragElements.forEach(a=>{this.isAncestorOf(a.node)&&(b=!0)}),b||this._createDragElement(a)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let a=af._dragElements.get(this._id),b=a&&"dragging"===a.dragStatus,c=a&&"ready"===a.dragStatus;b?this.stopDrag():c&&af._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(a={x:0,y:0}){let b=this.getStage();if(!b)return!1;let c={x:-a.x,y:-a.y,width:b.width()+2*a.x,height:b.height()+2*a.y};return X.haveIntersection(c,this.getClientRect())}static create(a,b){return X._isString(a)&&(a=JSON.parse(a)),this._createNode(a,b)}static _createNode(a,b){let c=aA.prototype.getClassName.call(a),d=a.children,e,f,g;if(b&&(a.attrs.container=b),K[c]||(X.warn('Can not find a node with class name "'+c+'". Fallback to "Shape".'),c="Shape"),e=new K[c](a.attrs),d)for(g=0,f=d.length;g<f;g++)e.add(aA._createNode(d[g]));return e}}aA.protoListenerMap=new Map,aA.prototype.nodeType="Node",aA.prototype._attrsAffectingSize=[],aA.prototype.eventListeners={},aA.prototype.on.call(aA.prototype,"xChange.konva yChange.konva scaleXChange.konva scaleYChange.konva skewXChange.konva skewYChange.konva rotationChange.konva offsetXChange.konva offsetYChange.konva transformsEnabledChange.konva",function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ax),this._clearSelfAndDescendantCache(ar)}),aA.prototype.on.call(aA.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ay)}),aA.prototype.on.call(aA.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(au)}),aA.prototype.on.call(aA.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ap)});let aB=ao.addGetterSetter;aB(aA,"zIndex"),aB(aA,"absolutePosition"),aB(aA,"position"),aB(aA,"x",0,ai()),aB(aA,"y",0,ai()),aB(aA,"globalCompositeOperation","source-over",al()),aB(aA,"opacity",1,ai()),aB(aA,"name","",al()),aB(aA,"id","",al()),aB(aA,"rotation",0,ai()),ao.addComponentsGetterSetter(aA,"scale",["x","y"]),aB(aA,"scaleX",1,ai()),aB(aA,"scaleY",1,ai()),ao.addComponentsGetterSetter(aA,"skew",["x","y"]),aB(aA,"skewX",0,ai()),aB(aA,"skewY",0,ai()),ao.addComponentsGetterSetter(aA,"offset",["x","y"]),aB(aA,"offsetX",0,ai()),aB(aA,"offsetY",0,ai()),aB(aA,"dragDistance",void 0,ai()),aB(aA,"width",0,ai()),aB(aA,"height",0,ai()),aB(aA,"listening",!0,an()),aB(aA,"preventDefault",!0,an()),aB(aA,"filters",void 0,function(a){return this._filterUpToDate=!1,a}),aB(aA,"visible",!0,an()),aB(aA,"transformsEnabled","all",al()),aB(aA,"size"),aB(aA,"dragBoundFunc"),aB(aA,"draggable",!1,an()),ao.backCompat(aA,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class aC extends aA{constructor(){super(...arguments),this.children=[]}getChildren(a){let b=this.children||[];return a?b.filter(a):b}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(0===a.length)return this;if(a.length>1){for(let b=0;b<a.length;b++)this.add(a[b]);return this}let b=a[0];return b.getParent()?b.moveTo(this):(this._validateAdd(b),b.index=this.getChildren().length,b.parent=this,b._clearCaches(),this.getChildren().push(b),this._fire("add",{child:b}),this._requestDraw()),this}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){let b=this._generalFind(a,!0);return b.length>0?b[0]:void 0}_generalFind(a,b){let c=[];return this._descendants(d=>{let e=d._isMatch(a);return e&&c.push(d),!!e&&!!b}),c}_descendants(a){for(let b of this.getChildren())if(a(b)||b.hasChildren()&&b._descendants(a))return!0;return!1}toObject(){let a=aA.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(b=>{a.children.push(b.toObject())}),a}isAncestorOf(a){let b=a.getParent();for(;b;){if(b._id===this._id)return!0;b=b.getParent()}return!1}clone(a){let b=aA.prototype.clone.call(this,a);return this.getChildren().forEach(function(a){b.add(a.clone())}),b}getAllIntersections(a){let b=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(a)&&b.push(c)}),b}_clearSelfAndDescendantCache(a){var b;super._clearSelfAndDescendantCache(a),this.isCached()||null==(b=this.children)||b.forEach(function(b){b._clearSelfAndDescendantCache(a)})}_setChildrenIndices(){var a;null==(a=this.children)||a.forEach(function(a,b){a.index=b}),this._requestDraw()}drawScene(a,b,c){let d=this.getLayer(),e=a||d&&d.getCanvas(),f=e&&e.getContext(),g=this._getCanvasCache(),h=g&&g.scene,i=e&&e.isCache;if(!this.isVisible()&&!i)return this;if(h){f.save();let a=this.getAbsoluteTransform(b).getMatrix();f.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",e,b,c);return this}drawHit(a,b){if(!this.shouldDrawHit(b))return this;let c=this.getLayer(),d=a||c&&c.hitCanvas,e=d&&d.getContext(),f=this._getCanvasCache();if(f&&f.hit){e.save();let a=this.getAbsoluteTransform(b).getMatrix();e.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(e),e.restore()}else this._drawChildren("drawHit",d,b);return this}_drawChildren(a,b,c,d){var e;let f=b&&b.getContext(),g=this.clipWidth(),h=this.clipHeight(),i=this.clipFunc(),j="number"==typeof g&&"number"==typeof h||i,k=c===this;if(j){let a;f.save();let b=this.getAbsoluteTransform(c),d=b.getMatrix();if(f.transform(d[0],d[1],d[2],d[3],d[4],d[5]),f.beginPath(),i)a=i.call(this,f,this);else{let a=this.clipX(),b=this.clipY();f.rect(a||0,b||0,g,h)}f.clip.apply(f,a),d=b.copy().invert().getMatrix(),f.transform(d[0],d[1],d[2],d[3],d[4],d[5])}let l=!k&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===a;l&&(f.save(),f._applyGlobalCompositeOperation(this)),null==(e=this.children)||e.forEach(function(e){e[a](b,c,d)}),l&&f.restore(),j&&f.restore()}getClientRect(a={}){var b;let c,d,e,f,g=a.skipTransform,h=a.relativeTo,i={x:1/0,y:1/0,width:0,height:0},j=this;null==(b=this.children)||b.forEach(function(b){if(!b.visible())return;let g=b.getClientRect({relativeTo:j,skipShadow:a.skipShadow,skipStroke:a.skipStroke});(0!==g.width||0!==g.height)&&(void 0===c?(c=g.x,d=g.y,e=g.x+g.width,f=g.y+g.height):(c=Math.min(c,g.x),d=Math.min(d,g.y),e=Math.max(e,g.x+g.width),f=Math.max(f,g.y+g.height)))});let k=this.find("Shape"),l=!1;for(let a=0;a<k.length;a++)if(k[a]._isVisible(this)){l=!0;break}return(i=l&&void 0!==c?{x:c,y:d,width:e-c,height:f-d}:{x:0,y:0,width:0,height:0},g)?i:this._transformedRect(i,h)}}ao.addComponentsGetterSetter(aC,"clip",["x","y","width","height"]),ao.addGetterSetter(aC,"clipX",void 0,ai()),ao.addGetterSetter(aC,"clipY",void 0,ai()),ao.addGetterSetter(aC,"clipWidth",void 0,ai()),ao.addGetterSetter(aC,"clipHeight",void 0,ai()),ao.addGetterSetter(aC,"clipFunc");let aD=new Map,aE=void 0!==K._global.PointerEvent;function aF(a){return{evt:a,pointerId:a.pointerId}}function aG(a,b){aH(a),b.getStage()&&(aD.set(a,b),aE&&b._fire("gotpointercapture",aF(new PointerEvent("gotpointercapture"))))}function aH(a,b){let c=aD.get(a);if(!c)return;let d=c.getStage();d&&d.content,aD.delete(a),aE&&c._fire("lostpointercapture",aF(new PointerEvent("lostpointercapture")))}let aI="mouseleave",aJ="mouseover",aK="mouseenter",aL="mousemove",aM="mousedown",aN="mouseup",aO="pointermove",aP="pointerdown",aQ="pointerup",aR="pointercancel",aS="pointerout",aT="pointerleave",aU="pointerover",aV="pointerenter",aW="contextmenu",aX="touchstart",aY="touchend",aZ="touchmove",a$="touchcancel",a_="wheel",a0=[[aK,"_pointerenter"],[aM,"_pointerdown"],[aL,"_pointermove"],[aN,"_pointerup"],[aI,"_pointerleave"],[aX,"_pointerdown"],[aZ,"_pointermove"],[aY,"_pointerup"],[a$,"_pointercancel"],[aJ,"_pointerover"],[a_,"_wheel"],[aW,"_contextmenu"],[aP,"_pointerdown"],[aO,"_pointermove"],[aQ,"_pointerup"],[aR,"_pointercancel"],[aT,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],a1={[aS]:"mouseout",[aT]:aI,[aU]:aJ,[aV]:aK,[aO]:aL,[aP]:aM,[aQ]:aN,[aR]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},a2={[aS]:"touchout",[aT]:"touchleave",[aU]:"touchover",[aV]:"touchenter",[aO]:aZ,[aP]:aX,[aQ]:aY,[aR]:a$,pointerclick:"tap",pointerdblclick:"dbltap"},a3={[aS]:aS,[aT]:aT,[aU]:aU,[aV]:aV,[aO]:aO,[aP]:aP,[aQ]:aQ,[aR]:aR,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"},a4=a=>a.indexOf("pointer")>=0?"pointer":a.indexOf("touch")>=0?"touch":"mouse",a5=a=>{let b=a4(a);return"pointer"===b?K.pointerEventsEnabled&&a3:"touch"===b?a2:"mouse"===b?a1:void 0};function a6(a={}){return(a.clipFunc||a.clipWidth||a.clipHeight)&&X.warn("Stage does not support clipping. Please use clip for Layers or Groups."),a}let a7=[];class a8 extends aC{constructor(a){super(a6(a)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a7.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{a6(this.attrs)}),this._checkVisibility()}_validateAdd(a){let b="Layer"===a.getType(),c="FastLayer"===a.getType();b||c||X.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let a=this.visible()?"":"none";this.content.style.display=a}setContainer(a){if("string"==typeof a){let b;if("."===a.charAt(0)){let b=a.slice(1);a=document.getElementsByClassName(b)[0]}else b="#"!==a.charAt(0)?a:a.slice(1),a=document.getElementById(b);if(!a)throw"Can not find container in document with id "+b}return this._setAttr("container",a),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),a.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let a=this.children,b=a.length;for(let c=0;c<b;c++)a[c].clear();return this}clone(a){return a||(a={}),a.container="u">typeof document&&document.createElement("div"),aC.prototype.clone.call(this,a)}destroy(){super.destroy();let a=this.content;a&&X._isInDocument(a)&&this.container().removeChild(a);let b=a7.indexOf(this);return b>-1&&a7.splice(b,1),X.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let a=this._pointerPositions[0]||this._changedPointerPositions[0];return a?{x:a.x,y:a.y}:(X.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(a){return this._pointerPositions.find(b=>b.id===a)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(a){(a={...a}).x=a.x||0,a.y=a.y||0,a.width=a.width||this.width(),a.height=a.height||this.height();let b=new ad({width:a.width,height:a.height,pixelRatio:a.pixelRatio||1}),c=b.getContext()._context,d=this.children;return(a.x||a.y)&&c.translate(-1*a.x,-1*a.y),d.forEach(function(b){if(!b.isVisible())return;let d=b._toKonvaCanvas(a);c.drawImage(d._canvas,a.x,a.y,d.getWidth()/d.getPixelRatio(),d.getHeight()/d.getPixelRatio())}),b}getIntersection(a){if(!a)return null;let b=this.children,c=b.length-1;for(let d=c;d>=0;d--){let c=b[d].getIntersection(a);if(c)return c}return null}_resizeDOM(){let a=this.width(),b=this.height();this.content&&(this.content.style.width=a+"px",this.content.style.height=b+"px"),this.bufferCanvas.setSize(a,b),this.bufferHitCanvas.setSize(a,b),this.children.forEach(c=>{c.setSize({width:a,height:b}),c.draw()})}add(a){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(a);let b=this.children.length;return b>5&&X.warn("The stage has "+b+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),a.setSize({width:this.width(),height:this.height()}),a.draw(),K.isBrowser&&this.content.appendChild(a.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(a){return aD.get(a)===this}setPointerCapture(a){aG(a,this)}releaseCapture(a){aH(a,this)}getLayers(){return this.children}_bindContentEvents(){K.isBrowser&&a0.forEach(([a,b])=>{this.content.addEventListener(a,a=>{this[b](a)},{passive:!1})})}_pointerenter(a){this.setPointersPositions(a);let b=a5(a.type);b&&this._fire(b.pointerenter,{evt:a,target:this,currentTarget:this})}_pointerover(a){this.setPointersPositions(a);let b=a5(a.type);b&&this._fire(b.pointerover,{evt:a,target:this,currentTarget:this})}_getTargetShape(a){let b=this[a+"targetShape"];return b&&!b.getStage()&&(b=null),b}_pointerleave(a){let b=a5(a.type),c=a4(a.type);if(!b)return;this.setPointersPositions(a);let d=this._getTargetShape(c),e=!(K.isDragging()||K.isTransforming())||K.hitOnDragEnabled;d&&e?(d._fireAndBubble(b.pointerout,{evt:a}),d._fireAndBubble(b.pointerleave,{evt:a}),this._fire(b.pointerleave,{evt:a,target:this,currentTarget:this}),this[c+"targetShape"]=null):e&&(this._fire(b.pointerleave,{evt:a,target:this,currentTarget:this}),this._fire(b.pointerout,{evt:a,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(a){let b=a5(a.type),c=a4(a.type);if(!b)return;this.setPointersPositions(a);let d=!1;this._changedPointerPositions.forEach(e=>{let f=this.getIntersection(e);if(af.justDragged=!1,K["_"+c+"ListenClick"]=!0,!f||!f.isListening()){this[c+"ClickStartShape"]=void 0;return}K.capturePointerEventsEnabled&&f.setPointerCapture(e.id),this[c+"ClickStartShape"]=f,f._fireAndBubble(b.pointerdown,{evt:a,pointerId:e.id}),d=!0;let g=a.type.indexOf("touch")>=0;f.preventDefault()&&a.cancelable&&g&&a.preventDefault()}),d||this._fire(b.pointerdown,{evt:a,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(a){let b=a5(a.type),c=a4(a.type);if(!b)return;let d=a.type.indexOf("touch")>=0||"touch"===a.pointerType;if(K.isDragging()&&af.node.preventDefault()&&a.cancelable&&d&&a.preventDefault(),this.setPointersPositions(a),!(!(K.isDragging()||K.isTransforming())||K.hitOnDragEnabled))return;let e={},f=!1,g=this._getTargetShape(c);this._changedPointerPositions.forEach(d=>{var h;let i=(h=d.id,aD.get(h)||this.getIntersection(d)),j=d.id,k={evt:a,pointerId:j},l=g!==i;if(l&&g&&(g._fireAndBubble(b.pointerout,{...k},i),g._fireAndBubble(b.pointerleave,{...k},i)),i){if(e[i._id])return;e[i._id]=!0}i&&i.isListening()?(f=!0,l&&(i._fireAndBubble(b.pointerover,{...k},g),i._fireAndBubble(b.pointerenter,{...k},g),this[c+"targetShape"]=i),i._fireAndBubble(b.pointermove,{...k})):g&&(this._fire(b.pointerover,{evt:a,target:this,currentTarget:this,pointerId:j}),this[c+"targetShape"]=null)}),f||this._fire(b.pointermove,{evt:a,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(a){let b=a5(a.type),c=a4(a.type);if(!b)return;this.setPointersPositions(a);let d=this[c+"ClickStartShape"],e=this[c+"ClickEndShape"],f={},g=!1;this._changedPointerPositions.forEach(h=>{var i;let j=(i=h.id,aD.get(i)||this.getIntersection(h));if(j){if(j.releaseCapture(h.id),f[j._id])return;f[j._id]=!0}let k=h.id,l={evt:a,pointerId:k},m=!1;K["_"+c+"InDblClickWindow"]?(m=!0,clearTimeout(this[c+"DblTimeout"])):af.justDragged||(K["_"+c+"InDblClickWindow"]=!0,clearTimeout(this[c+"DblTimeout"])),this[c+"DblTimeout"]=setTimeout(function(){K["_"+c+"InDblClickWindow"]=!1},K.dblClickWindow),j&&j.isListening()?(g=!0,this[c+"ClickEndShape"]=j,j._fireAndBubble(b.pointerup,{...l}),K["_"+c+"ListenClick"]&&d&&d===j&&(j._fireAndBubble(b.pointerclick,{...l}),m&&e&&e===j&&j._fireAndBubble(b.pointerdblclick,{...l}))):(this[c+"ClickEndShape"]=null,g||(this._fire(b.pointerup,{evt:a,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),g=!0),K["_"+c+"ListenClick"]&&this._fire(b.pointerclick,{evt:a,target:this,currentTarget:this,pointerId:k}),m&&this._fire(b.pointerdblclick,{evt:a,target:this,currentTarget:this,pointerId:k}))}),g||this._fire(b.pointerup,{evt:a,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),K["_"+c+"ListenClick"]=!1,a.cancelable&&"touch"!==c&&"pointer"!==c&&a.preventDefault()}_contextmenu(a){this.setPointersPositions(a);let b=this.getIntersection(this.getPointerPosition());b&&b.isListening()?b._fireAndBubble(aW,{evt:a}):this._fire(aW,{evt:a,target:this,currentTarget:this})}_wheel(a){this.setPointersPositions(a);let b=this.getIntersection(this.getPointerPosition());b&&b.isListening()?b._fireAndBubble(a_,{evt:a}):this._fire(a_,{evt:a,target:this,currentTarget:this})}_pointercancel(a){var b;this.setPointersPositions(a);let c=(b=a.pointerId,aD.get(b)||this.getIntersection(this.getPointerPosition()));c&&c._fireAndBubble(aQ,aF(a)),aH(a.pointerId)}_lostpointercapture(a){aH(a.pointerId)}setPointersPositions(a){let b=this._getContentPosition(),c=null,d=null;void 0!==(a=a||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(a.touches,a=>{this._pointerPositions.push({id:a.identifier,x:(a.clientX-b.left)/b.scaleX,y:(a.clientY-b.top)/b.scaleY})}),Array.prototype.forEach.call(a.changedTouches||a.touches,a=>{this._changedPointerPositions.push({id:a.identifier,x:(a.clientX-b.left)/b.scaleX,y:(a.clientY-b.top)/b.scaleY})})):(c=(a.clientX-b.left)/b.scaleX,d=(a.clientY-b.top)/b.scaleY,this.pointerPos={x:c,y:d},this._pointerPositions=[{x:c,y:d,id:X._getFirstPointerId(a)}],this._changedPointerPositions=[{x:c,y:d,id:X._getFirstPointerId(a)}])}_setPointerPosition(a){X.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(a)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};let a=this.content.getBoundingClientRect();return{top:a.top,left:a.left,scaleX:a.width/this.content.clientWidth||1,scaleY:a.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new ad({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ae({pixelRatio:1,width:this.width(),height:this.height()}),!K.isBrowser)return;let a=this.container();if(!a)throw"Stage has no container. A container is required.";a.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),a.appendChild(this.content),this._resizeDOM()}cache(){return X.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(a){a.batchDraw()}),this}}a8.prototype.nodeType="Stage",L(a8),ao.addGetterSetter(a8,"container"),K.isBrowser&&document.addEventListener("visibilitychange",()=>{a7.forEach(a=>{a.batchDraw()})});let a9="hasShadow",ba="shadowRGBA",bb="patternImage",bc="linearGradient",bd="radialGradient";function be(){return c||(c=X.createCanvasElement().getContext("2d"))}let bf={};class bg extends aA{constructor(a){let b;super(a);let c=0;for(;!(b=X.getHitColor())||b in bf;)if(++c>=1e4){X.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),b=X.getRandomColor();break}this.colorKey=b,bf[b]=this}getContext(){return X.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return X.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(a9,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(bb,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){let a=be().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(a&&a.setTransform){let b=new O;b.translate(this.fillPatternX(),this.fillPatternY()),b.rotate(K.getAngle(this.fillPatternRotation())),b.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),b.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let c=b.getMatrix(),d="u"<typeof DOMMatrix?{a:c[0],b:c[1],c:c[2],d:c[3],e:c[4],f:c[5]}:new DOMMatrix(c);a.setTransform(d)}return a}}_getLinearGradient(){return this._getCache(bc,this.__getLinearGradient)}__getLinearGradient(){let a=this.fillLinearGradientColorStops();if(a){let b=be(),c=this.fillLinearGradientStartPoint(),d=this.fillLinearGradientEndPoint(),e=b.createLinearGradient(c.x,c.y,d.x,d.y);for(let b=0;b<a.length;b+=2)e.addColorStop(a[b],a[b+1]);return e}}_getRadialGradient(){return this._getCache(bd,this.__getRadialGradient)}__getRadialGradient(){let a=this.fillRadialGradientColorStops();if(a){let b=be(),c=this.fillRadialGradientStartPoint(),d=this.fillRadialGradientEndPoint(),e=b.createRadialGradient(c.x,c.y,this.fillRadialGradientStartRadius(),d.x,d.y,this.fillRadialGradientEndRadius());for(let b=0;b<a.length;b+=2)e.addColorStop(a[b],a[b+1]);return e}}getShadowRGBA(){return this._getCache(ba,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;let a=X.colorToRGBA(this.shadowColor());if(a)return"rgba("+a.r+","+a.g+","+a.b+","+a.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let a=this.hitStrokeWidth();return"auto"===a?this.hasStroke():this.strokeEnabled()&&!!a}intersects(a){let b=this.getStage();if(!b)return!1;let c=b.bufferHitCanvas;return c.getContext().clear(),this.drawHit(c,void 0,!0),c.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data[3]>0}destroy(){return aA.prototype.destroy.call(this),delete bf[this.colorKey],delete this.colorKey,this}_useBufferCanvas(a){var b;if(!(null==(b=this.attrs.perfectDrawEnabled)||b))return!1;let c=a||this.hasFill(),d=this.hasStroke(),e=1!==this.getAbsoluteOpacity();if(c&&d&&e)return!0;let f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!c&&!!d&&!!f&&!!g}setStrokeHitEnabled(a){X.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),a?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){let a=this.size();return{x:this._centroid?-a.width/2:0,y:this._centroid?-a.height/2:0,width:a.width,height:a.height}}getClientRect(a={}){let b=!1,c=this.getParent();for(;c;){if(c.isCached()){b=!0;break}c=c.getParent()}let d=a.skipTransform,e=a.relativeTo||b&&this.getStage()||void 0,f=this.getSelfRect(),g=!a.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,h=f.width+g,i=f.height+g,j=!a.skipShadow&&this.hasShadow(),k=j?this.shadowOffsetX():0,l=j?this.shadowOffsetY():0,m=h+Math.abs(k),n=i+Math.abs(l),o=j&&this.shadowBlur()||0,p={width:m+2*o,height:n+2*o,x:-(g/2+o)+Math.min(k,0)+f.x,y:-(g/2+o)+Math.min(l,0)+f.y};return d?p:this._transformedRect(p,e)}drawScene(a,b,c){let d,e=this.getLayer(),f=(a||e.getCanvas()).getContext(),g=this._getCanvasCache(),h=this.getSceneFunc(),i=this.hasShadow(),j=b===this;if(!this.isVisible()&&!j)return this;if(g){f.save();let a=this.getAbsoluteTransform(b).getMatrix();return f.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedSceneCanvas(f),f.restore(),this}if(!h)return this;if(f.save(),this._useBufferCanvas()&&1){d=this.getStage();let a=c||d.bufferCanvas,e=a.getContext();c?(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,a.width,a.height),e.restore()):e.clear(),e.save(),e._applyLineJoin(this),e._applyMiterLimit(this);let g=this.getAbsoluteTransform(b).getMatrix();e.transform(g[0],g[1],g[2],g[3],g[4],g[5]),h.call(this,e,this),e.restore();let k=a.pixelRatio;i&&f._applyShadow(this),j||(f._applyOpacity(this),f._applyGlobalCompositeOperation(this)),f.drawImage(a._canvas,a.x||0,a.y||0,a.width/k,a.height/k)}else{if(f._applyLineJoin(this),f._applyMiterLimit(this),!j){let a=this.getAbsoluteTransform(b).getMatrix();f.transform(a[0],a[1],a[2],a[3],a[4],a[5]),f._applyOpacity(this),f._applyGlobalCompositeOperation(this)}i&&f._applyShadow(this),h.call(this,f,this)}return f.restore(),this}drawHit(a,b,c=!1){if(!this.shouldDrawHit(b,c))return this;let d=this.getLayer(),e=a||d.hitCanvas,f=e&&e.getContext(),g=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),i=h&&h.hit;if(this.colorKey||X.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),i){f.save();let a=this.getAbsoluteTransform(b).getMatrix();return f.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(f),f.restore(),this}if(!g)return this;if(f.save(),f._applyLineJoin(this),f._applyMiterLimit(this),this!==b){let a=this.getAbsoluteTransform(b).getMatrix();f.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return g.call(this,f,this),f.restore(),this}drawHitFromCache(a=0){let b=this._getCanvasCache(),c=this._getCachedSceneCanvas(),d=b.hit,e=d.getContext(),f=d.getWidth(),g=d.getHeight();e.clear(),e.drawImage(c._canvas,0,0,f,g);try{let b=e.getImageData(0,0,f,g),c=b.data,d=c.length,h=X._hexToRgb(this.colorKey);for(let b=0;b<d;b+=4)c[b+3]>a?(c[b]=h.r,c[b+1]=h.g,c[b+2]=h.b,c[b+3]=255):c[b+3]=0;e.putImageData(b,0,0)}catch(a){X.error("Unable to draw hit graph from cached scene canvas. "+a.message)}return this}hasPointerCapture(a){return aD.get(a)===this}setPointerCapture(a){aG(a,this)}releaseCapture(a){aH(a,this)}}bg.prototype._fillFunc=function(a){let b=this.attrs.fillRule;b?a.fill(b):a.fill()},bg.prototype._strokeFunc=function(a){a.stroke()},bg.prototype._fillFuncHit=function(a){let b=this.attrs.fillRule;b?a.fill(b):a.fill()},bg.prototype._strokeFuncHit=function(a){a.stroke()},bg.prototype._centroid=!1,bg.prototype.nodeType="Shape",L(bg),bg.prototype.eventListeners={},bg.prototype.on.call(bg.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(a9)}),bg.prototype.on.call(bg.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(ba)}),bg.prototype.on.call(bg.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(bb)}),bg.prototype.on.call(bg.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(bc)}),bg.prototype.on.call(bg.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(bd)}),ao.addGetterSetter(bg,"stroke",void 0,am()),ao.addGetterSetter(bg,"strokeWidth",2,ai()),ao.addGetterSetter(bg,"fillAfterStrokeEnabled",!1),ao.addGetterSetter(bg,"hitStrokeWidth","auto",ak()),ao.addGetterSetter(bg,"strokeHitEnabled",!0,an()),ao.addGetterSetter(bg,"perfectDrawEnabled",!0,an()),ao.addGetterSetter(bg,"shadowForStrokeEnabled",!0,an()),ao.addGetterSetter(bg,"lineJoin"),ao.addGetterSetter(bg,"lineCap"),ao.addGetterSetter(bg,"miterLimit"),ao.addGetterSetter(bg,"sceneFunc"),ao.addGetterSetter(bg,"hitFunc"),ao.addGetterSetter(bg,"dash"),ao.addGetterSetter(bg,"dashOffset",0,ai()),ao.addGetterSetter(bg,"shadowColor",void 0,al()),ao.addGetterSetter(bg,"shadowBlur",0,ai()),ao.addGetterSetter(bg,"shadowOpacity",1,ai()),ao.addComponentsGetterSetter(bg,"shadowOffset",["x","y"]),ao.addGetterSetter(bg,"shadowOffsetX",0,ai()),ao.addGetterSetter(bg,"shadowOffsetY",0,ai()),ao.addGetterSetter(bg,"fillPatternImage"),ao.addGetterSetter(bg,"fill",void 0,am()),ao.addGetterSetter(bg,"fillPatternX",0,ai()),ao.addGetterSetter(bg,"fillPatternY",0,ai()),ao.addGetterSetter(bg,"fillLinearGradientColorStops"),ao.addGetterSetter(bg,"strokeLinearGradientColorStops"),ao.addGetterSetter(bg,"fillRadialGradientStartRadius",0),ao.addGetterSetter(bg,"fillRadialGradientEndRadius",0),ao.addGetterSetter(bg,"fillRadialGradientColorStops"),ao.addGetterSetter(bg,"fillPatternRepeat","repeat"),ao.addGetterSetter(bg,"fillEnabled",!0),ao.addGetterSetter(bg,"strokeEnabled",!0),ao.addGetterSetter(bg,"shadowEnabled",!0),ao.addGetterSetter(bg,"dashEnabled",!0),ao.addGetterSetter(bg,"strokeScaleEnabled",!0),ao.addGetterSetter(bg,"fillPriority","color"),ao.addComponentsGetterSetter(bg,"fillPatternOffset",["x","y"]),ao.addGetterSetter(bg,"fillPatternOffsetX",0,ai()),ao.addGetterSetter(bg,"fillPatternOffsetY",0,ai()),ao.addComponentsGetterSetter(bg,"fillPatternScale",["x","y"]),ao.addGetterSetter(bg,"fillPatternScaleX",1,ai()),ao.addGetterSetter(bg,"fillPatternScaleY",1,ai()),ao.addComponentsGetterSetter(bg,"fillLinearGradientStartPoint",["x","y"]),ao.addComponentsGetterSetter(bg,"strokeLinearGradientStartPoint",["x","y"]),ao.addGetterSetter(bg,"fillLinearGradientStartPointX",0),ao.addGetterSetter(bg,"strokeLinearGradientStartPointX",0),ao.addGetterSetter(bg,"fillLinearGradientStartPointY",0),ao.addGetterSetter(bg,"strokeLinearGradientStartPointY",0),ao.addComponentsGetterSetter(bg,"fillLinearGradientEndPoint",["x","y"]),ao.addComponentsGetterSetter(bg,"strokeLinearGradientEndPoint",["x","y"]),ao.addGetterSetter(bg,"fillLinearGradientEndPointX",0),ao.addGetterSetter(bg,"strokeLinearGradientEndPointX",0),ao.addGetterSetter(bg,"fillLinearGradientEndPointY",0),ao.addGetterSetter(bg,"strokeLinearGradientEndPointY",0),ao.addComponentsGetterSetter(bg,"fillRadialGradientStartPoint",["x","y"]),ao.addGetterSetter(bg,"fillRadialGradientStartPointX",0),ao.addGetterSetter(bg,"fillRadialGradientStartPointY",0),ao.addComponentsGetterSetter(bg,"fillRadialGradientEndPoint",["x","y"]),ao.addGetterSetter(bg,"fillRadialGradientEndPointX",0),ao.addGetterSetter(bg,"fillRadialGradientEndPointY",0),ao.addGetterSetter(bg,"fillPatternRotation",0),ao.addGetterSetter(bg,"fillRule",void 0,al()),ao.backCompat(bg,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});let bh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],bi=bh.length;class bj extends aC{constructor(a){super(a),this.canvas=new ad,this.hitCanvas=new ae({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this}setZIndex(a){super.setZIndex(a);let b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),a<b.children.length-1?b.content.insertBefore(this.getNativeCanvasElement(),b.children[a+1].getCanvas()._canvas):b.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){aA.prototype.moveToTop.call(this);let a=this.getStage();return a&&a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!aA.prototype.moveUp.call(this))return!1;let a=this.getStage();return!!a&&!!a.content&&(a.content.removeChild(this.getNativeCanvasElement()),this.index<a.children.length-1?a.content.insertBefore(this.getNativeCanvasElement(),a.children[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(aA.prototype.moveDown.call(this)){let a=this.getStage();if(a){let b=a.children;a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.insertBefore(this.getNativeCanvasElement(),b[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(aA.prototype.moveToBottom.call(this)){let a=this.getStage();if(a){let b=a.children;a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.insertBefore(this.getNativeCanvasElement(),b[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){let a=this.getNativeCanvasElement();return aA.prototype.remove.call(this),a&&a.parentNode&&X._isInDocument(a)&&a.parentNode.removeChild(a),this}getStage(){return this.parent}setSize({width:a,height:b}){return this.canvas.setSize(a,b),this.hitCanvas.setSize(a,b),this._setSmoothEnabled(),this}_validateAdd(a){let b=a.getType();"Group"!==b&&"Shape"!==b&&X.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(a){return(a={...a}).width=a.width||this.getWidth(),a.height=a.height||this.getHeight(),a.x=void 0!==a.x?a.x:this.x(),a.y=void 0!==a.y?a.y:this.y(),aA.prototype._toKonvaCanvas.call(this,a)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){X.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){X.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,X.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(a){if(!this.isListening()||!this.isVisible())return null;let b=1,c=!1;for(;;){for(let d=0;d<bi;d++){let e=bh[d],f=this._getIntersection({x:a.x+e.x*b,y:a.y+e.y*b}),g=f.shape;if(g)return g;if(c=!!f.antialiased,!f.antialiased)break}if(!c)return null;b+=1}}_getIntersection(a){let b=this.hitCanvas.pixelRatio,c=this.hitCanvas.context.getImageData(Math.round(a.x*b),Math.round(a.y*b),1,1).data,d=c[3];if(255===d){let a=bf[X.getHitColorKey(c[0],c[1],c[2])];return a?{shape:a}:{antialiased:!0}}return d>0?{antialiased:!0}:{}}drawScene(a,b,c){let d=this.getLayer(),e=a||d&&d.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&e.getContext().clear(),aC.prototype.drawScene.call(this,e,b,c),this._fire("draw",{node:this}),this}drawHit(a,b){let c=this.getLayer(),d=a||c&&c.hitCanvas;return c&&c.clearBeforeDraw()&&c.getHitCanvas().getContext().clear(),aC.prototype.drawHit.call(this,d,b),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(a){X.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(a)}getHitGraphEnabled(a){return X.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;let a=this.parent;this.hitCanvas._canvas.parentNode?a.content.removeChild(this.hitCanvas._canvas):a.content.appendChild(this.hitCanvas._canvas)}destroy(){return X.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}bj.prototype.nodeType="Layer",L(bj),ao.addGetterSetter(bj,"imageSmoothingEnabled",!0),ao.addGetterSetter(bj,"clearBeforeDraw",!0),ao.addGetterSetter(bj,"hitGraphEnabled",!0,an());class bk extends bj{constructor(a){super(a),this.listening(!1),X.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}bk.prototype.nodeType="FastLayer",L(bk);class bl extends aC{_validateAdd(a){let b=a.getType();"Group"!==b&&"Shape"!==b&&X.throw("You may only add groups and shapes to groups.")}}bl.prototype.nodeType="Group",L(bl);let bm=J.performance&&J.performance.now?function(){return J.performance.now()}:function(){return new Date().getTime()};class bn{constructor(a,b){this.id=bn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:bm(),frameRate:0},this.func=a,this.setLayers(b)}setLayers(a){let b=[];return a&&(b=Array.isArray(a)?a:[a]),this.layers=b,this}getLayers(){return this.layers}addLayer(a){let b=this.layers,c=b.length;for(let d=0;d<c;d++)if(b[d]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){let a=bn.animations,b=a.length;for(let c=0;c<b;c++)if(a[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=bm(),bn._addAnimation(this),this}stop(){return bn._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){let b=a.id,c=this.animations,d=c.length;for(let a=0;a<d;a++)if(c[a].id===b){this.animations.splice(a,1);break}}static _runFrames(){let a={},b=this.animations;for(let c=0;c<b.length;c++){let d=b[c],e=d.layers,f=d.func;d._updateFrameObject(bm());let g=e.length;if(!f||!1!==f.call(d,d.frame))for(let b=0;b<g;b++){let c=e[b];void 0!==c._id&&(a[c._id]=c)}}for(let b in a)a.hasOwnProperty(b)&&a[b].batchDraw()}static _animationLoop(){bn.animations.length?(bn._runFrames(),X.requestAnimFrame(bn._animationLoop)):bn.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,X.requestAnimFrame(this._animationLoop))}}bn.animations=[],bn.animIdCounter=0,bn.animRunning=!1;let bo={node:1,duration:1,easing:1,onFinish:1,yoyo:1},bp=["fill","stroke","shadowColor"],bq=0;class br{constructor(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()}fire(a){let b=this[a];b&&b()}setTime(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():a<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())}getTime(){return this._time}setPosition(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a}getPosition(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){let a=this.getTimer()-this._startTime;2===this.state?this.setTime(a):3===this.state&&this.setTime(this.duration-a)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class bs{constructor(a){let b,c;const d=this,e=a.node,f=e._id,g=a.easing||bt.Linear,h=!!a.yoyo;b=void 0===a.duration?.3:0===a.duration?.001:a.duration,this.node=e,this._id=bq++;const i=e.getLayer()||(e instanceof K.Stage?e.getLayers():null);for(c in i||X.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new bn(function(){d.tween.onEnterFrame()},i),this.tween=new br(c,function(a){d._tweenFunc(a)},g,0,1,1e3*b,h),this._addListeners(),bs.attrs[f]||(bs.attrs[f]={}),bs.attrs[f][this._id]||(bs.attrs[f][this._id]={}),bs.tweens[f]||(bs.tweens[f]={}),a)void 0===bo[c]&&this._addAttr(c,a[c]);this.reset(),this.onFinish=a.onFinish,this.onReset=a.onReset,this.onUpdate=a.onUpdate}_addAttr(a,b){let c,d,e,f,g,h=this.node,i=h._id,j=bs.tweens[i][a];j&&delete bs.attrs[i][j][a];let k=h.getAttr(a);if(X._isArray(b))if(c=[],d=Math.max(b.length,k.length),"points"===a&&b.length!==k.length&&(b.length>k.length?(f=k,k=X._prepareArrayForTween(k,b,h.closed())):(e=b,b=X._prepareArrayForTween(b,k,h.closed()))),0===a.indexOf("fill"))for(let a=0;a<d;a++)if(a%2==0)c.push(b[a]-k[a]);else{let d=X.colorToRGBA(k[a]);g=X.colorToRGBA(b[a]),k[a]=d,c.push({r:g.r-d.r,g:g.g-d.g,b:g.b-d.b,a:g.a-d.a})}else for(let a=0;a<d;a++)c.push(b[a]-k[a]);else -1!==bp.indexOf(a)?(k=X.colorToRGBA(k),c={r:(g=X.colorToRGBA(b)).r-k.r,g:g.g-k.g,b:g.b-k.b,a:g.a-k.a}):c=b-k;bs.attrs[i][this._id][a]={start:k,diff:c,end:b,trueEnd:e,trueStart:f},bs.tweens[i][a]=this._id}_tweenFunc(a){let b,c,d,e,f,g,h,i,j=this.node,k=bs.attrs[j._id][this._id];for(b in k){if(d=(c=k[b]).start,e=c.diff,i=c.end,X._isArray(d))if(f=[],h=Math.max(d.length,i.length),0===b.indexOf("fill"))for(g=0;g<h;g++)g%2==0?f.push((d[g]||0)+e[g]*a):f.push("rgba("+Math.round(d[g].r+e[g].r*a)+","+Math.round(d[g].g+e[g].g*a)+","+Math.round(d[g].b+e[g].b*a)+","+(d[g].a+e[g].a*a)+")");else for(g=0;g<h;g++)f.push((d[g]||0)+e[g]*a);else f=-1!==bp.indexOf(b)?"rgba("+Math.round(d.r+e.r*a)+","+Math.round(d.g+e.g*a)+","+Math.round(d.b+e.b*a)+","+(d.a+e.a*a)+")":d+e*a;j.setAttr(b,f)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{let a=this.node,b=bs.attrs[a._id][this._id];b.points&&b.points.trueEnd&&a.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{let a=this.node,b=bs.attrs[a._id][this._id];b.points&&b.points.trueStart&&a.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(a){return this.tween.seek(1e3*a),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let a=this.node._id,b=this._id,c=bs.tweens[a];for(let b in this.pause(),this.anim&&this.anim.stop(),c)delete bs.tweens[a][b];delete bs.attrs[a][b],bs.tweens[a]&&(0===Object.keys(bs.tweens[a]).length&&delete bs.tweens[a],0===Object.keys(bs.attrs[a]).length&&delete bs.attrs[a])}}bs.attrs={},bs.tweens={},aA.prototype.to=function(a){let b=a.onFinish;a.node=this,a.onFinish=function(){this.destroy(),b&&b()},new bs(a).play()};let bt={BackEaseIn:(a,b,c,d)=>c*(a/=d)*a*(2.70158*a-1.70158)+b,BackEaseOut:(a,b,c,d)=>c*((a=a/d-1)*a*(2.70158*a+1.70158)+1)+b,BackEaseInOut(a,b,c,d){let e=1.70158;return(a/=d/2)<1?c/2*(a*a*(((e*=1.525)+1)*a-e))+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},ElasticEaseIn(a,b,c,d,e,f){let g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin(2*Math.PI*(a*d-g)/f))+b)},ElasticEaseOut(a,b,c,d,e,f){let g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin(2*Math.PI*(a*d-g)/f)+c+b)},ElasticEaseInOut(a,b,c,d,e,f){let g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=.3*1.5*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),a<1)?-.5*(e*Math.pow(2,10*(a-=1))*Math.sin(2*Math.PI*(a*d-g)/f))+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*Math.PI*(a*d-g)/f)*.5+c+b},BounceEaseOut:(a,b,c,d)=>(a/=d)<1/2.75?7.5625*a*a*c+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b,BounceEaseIn:(a,b,c,d)=>c-bt.BounceEaseOut(d-a,0,c,d)+b,BounceEaseInOut:(a,b,c,d)=>a<d/2?.5*bt.BounceEaseIn(2*a,0,c,d)+b:.5*bt.BounceEaseOut(2*a-d,0,c,d)+.5*c+b,EaseIn:(a,b,c,d)=>c*(a/=d)*a+b,EaseOut:(a,b,c,d)=>-c*(a/=d)*(a-2)+b,EaseInOut:(a,b,c,d)=>(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b,StrongEaseIn:(a,b,c,d)=>c*(a/=d)*a*a*a*a+b,StrongEaseOut:(a,b,c,d)=>c*((a=a/d-1)*a*a*a*a+1)+b,StrongEaseInOut:(a,b,c,d)=>(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b,Linear:(a,b,c,d)=>c*a/d+b},bu=X._assign(K,{Util:X,Transform:O,Node:aA,Container:aC,Stage:a8,stages:a7,Layer:bj,FastLayer:bk,Group:bl,DD:af,Shape:bg,shapes:bf,Animation:bn,Tween:bs,Easings:bt,Context:_,Canvas:ac});class bv extends bg{_sceneFunc(a){let b=K.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,b,c),a.arc(0,0,this.innerRadius(),b,0,!c),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){let a=this.innerRadius(),b=this.outerRadius(),c=this.clockwise(),d=K.getAngle(c?360-this.angle():this.angle()),e=Math.cos(Math.min(d,Math.PI)),f=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),g=Math.sin(Math.min(d,Math.PI/2)),h=e*(e>0?a:b),i=f*(f>0?a:b),j=g*(g>0?b:a);return{x:h,y:c?-1*j:i,width:b-h,height:j-i}}}function bw(a,b,c,d,e,f,g){let h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g*i/(h+i);return[c-j*(e-a),d-j*(f-b),c+k*(e-a),d+k*(f-b)]}function bx(a,b){let c=a.length,d=[];for(let e=2;e<c-2;e+=2){let c=bw(a[e-2],a[e-1],a[e],a[e+1],a[e+2],a[e+3],b);isNaN(c[0])||(d.push(c[0]),d.push(c[1]),d.push(a[e]),d.push(a[e+1]),d.push(c[2]),d.push(c[3]))}return d}bv.prototype._centroid=!0,bv.prototype.className="Arc",bv.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],L(bv),ao.addGetterSetter(bv,"innerRadius",0,ai()),ao.addGetterSetter(bv,"outerRadius",0,ai()),ao.addGetterSetter(bv,"angle",0,ai()),ao.addGetterSetter(bv,"clockwise",!1,an());class by extends bg{constructor(a){super(a),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(a){let b=this.points(),c=b.length,d=this.tension(),e=this.closed(),f=this.bezier();if(!c)return;let g=0;if(a.beginPath(),a.moveTo(b[0],b[1]),0!==d&&c>4){let d=this.getTensionPoints(),f=d.length;for(g=4*!e,e||a.quadraticCurveTo(d[0],d[1],d[2],d[3]);g<f-2;)a.bezierCurveTo(d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]);e||a.quadraticCurveTo(d[f-2],d[f-1],b[c-2],b[c-1])}else if(f)for(g=2;g<c;)a.bezierCurveTo(b[g++],b[g++],b[g++],b[g++],b[g++],b[g++]);else for(g=2;g<c;g+=2)a.lineTo(b[g],b[g+1]);e?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():bx(this.points(),this.tension())}_getTensionPointsClosed(){let a=this.points(),b=a.length,c=this.tension(),d=bw(a[b-2],a[b-1],a[0],a[1],a[2],a[3],c),e=bw(a[b-4],a[b-3],a[b-2],a[b-1],a[0],a[1],c),f=bx(a,c);return[d[2],d[3]].concat(f).concat([e[0],e[1],a[b-2],a[b-1],e[2],e[3],d[0],d[1],a[0],a[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let a,b,c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};let d=(c=0!==this.tension()?[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:this.bezier()?[c[0],c[1],...function(a){let b=[[a[0],a[2],a[4],a[6]],[a[1],a[3],a[5],a[7]]],c=[];for(let a of b){let b=-3*a[0]+9*a[1]-9*a[2]+3*a[3];if(0!==b){let d=6*a[0]-12*a[1]+6*a[2],e=d*d-4*b*(-3*a[0]+3*a[1]);if(e>=0){let a=Math.sqrt(e);c.push((-d+a)/(2*b)),c.push((-d-a)/(2*b))}}}return c.filter(a=>a>0&&a<1).flatMap(a=>b.map(b=>{let c=1-a;return c*c*c*b[0]+3*c*c*a*b[1]+3*c*a*a*b[2]+a*a*a*b[3]}))}(this.points()),c[c.length-2],c[c.length-1]]:this.points())[0],e=c[0],f=c[1],g=c[1];for(let h=0;h<c.length/2;h++)a=c[2*h],b=c[2*h+1],d=Math.min(d,a),e=Math.max(e,a),f=Math.min(f,b),g=Math.max(g,b);return{x:d,y:f,width:e-d,height:g-f}}}by.prototype.className="Line",by.prototype._attrsAffectingSize=["points","bezier","tension"],L(by),ao.addGetterSetter(by,"closed",!1),ao.addGetterSetter(by,"bezier",!1),ao.addGetterSetter(by,"tension",0,ai()),ao.addGetterSetter(by,"points",[],function(){if(K.isUnminified)return function(a,b){let c=Int8Array?Object.getPrototypeOf(Int8Array):null;return c&&a instanceof c||(X._isArray(a)?a.forEach(function(a){X._isNumber(a)||X.warn('"'+b+'" attribute has non numeric element '+a+". Make sure that all elements are numbers.")}):X.warn(ag(a)+' is a not valid value for "'+b+'" attribute. The value should be a array of numbers.')),a}}());let bz=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],bA=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],bB=[[1],[1,1],[1,2,1],[1,3,3,1]],bC=(a,b,c)=>{let d,e,f=c/2;d=0;for(let c=0;c<20;c++)e=f*bz[20][c]+f,d+=bA[20][c]*function(a,b,c){let d=bE(1,c,a),e=bE(1,c,b);return Math.sqrt(d*d+e*e)}(a,b,e);return f*d},bD=(a,b,c)=>{void 0===c&&(c=1);let d=a[0]-2*a[1]+a[2],e=b[0]-2*b[1]+b[2],f=2*a[1]-2*a[0],g=2*b[1]-2*b[0],h=4*(d*d+e*e);if(0===h)return c*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(b[2]-b[0],2));let i=4*(d*f+e*g)/(2*h),j=c+i,k=(f*f+g*g)/h-i*i,l=j*j+k>0?Math.sqrt(j*j+k):0,m=i*i+k>0?Math.sqrt(i*i+k):0,n=i+Math.sqrt(i*i+k)!==0?k*Math.log(Math.abs((j+l)/(i+m))):0;return Math.sqrt(h)/2*(j*l-i*m+n)},bE=(a,b,c)=>{let d,e,f=c.length-1;if(0===f)return 0;if(0===a){e=0;for(let a=0;a<=f;a++)e+=bB[f][a]*Math.pow(1-b,f-a)*Math.pow(b,a)*c[a];return e}d=Array(f);for(let a=0;a<f;a++)d[a]=f*(c[a+1]-c[a]);return bE(a-1,b,d)},bF=(a,b,c)=>{let d=1,e=a/b,f=(a-c(e))/b,g=0;for(;d>.001;){let h=Math.abs(a-c(e+f))/b;if(h<d)d=h,e+=f;else{let g=Math.abs(a-c(e-f))/b;g<d?(d=g,e-=f):f/=2}if(++g>500)break}return e};class bG extends bg{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=bG.parsePathData(this.data()),this.pathLength=bG.getPathLength(this.dataArray)}_sceneFunc(a){let b=this.dataArray;a.beginPath();let c=!1;for(let d=0;d<b.length;d++){let e=b[d].command,f=b[d].points;switch(e){case"L":a.lineTo(f[0],f[1]);break;case"M":a.moveTo(f[0],f[1]);break;case"C":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":let g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case"z":c=!0,a.closePath()}}c||this.hasFill()?a.fillStrokeShape(this):a.strokeShape(this)}getSelfRect(){let a,b,c=[];this.dataArray.forEach(function(a){if("A"===a.command){let b=a.points[4],d=a.points[5],e=a.points[4]+d,f=Math.PI/180;if(Math.abs(b-e)<f&&(f=Math.abs(b-e)),d<0)for(let d=b-f;d>e;d-=f){let b=bG.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],d,0);c.push(b.x,b.y)}else for(let d=b+f;d<e;d+=f){let b=bG.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],d,0);c.push(b.x,b.y)}}else if("C"===a.command)for(let b=0;b<=1;b+=.01){let d=bG.getPointOnCubicBezier(b,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);c.push(d.x,d.y)}else c=c.concat(a.points)});let d=c[0],e=c[0],f=c[1],g=c[1];for(let h=0;h<c.length/2;h++)a=c[2*h],b=c[2*h+1],isNaN(a)||(d=Math.min(d,a),e=Math.max(e,a)),isNaN(b)||(f=Math.min(f,b),g=Math.max(g,b));return{x:d,y:f,width:e-d,height:g-f}}getLength(){return this.pathLength}getPointAtLength(a){return bG.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}static getPathLength(a){let b=0;for(let c=0;c<a.length;++c)b+=a[c].pathLength;return b}static getPointAtLengthOfDataArray(a,b){let c,d=0,e=b.length;if(!e)return null;for(;d<e&&a>b[d].pathLength;)a-=b[d].pathLength,++d;if(d===e)return{x:(c=b[d-1].points.slice(-2))[0],y:c[1]};if(a<.01)return"M"===b[d].command?{x:(c=b[d].points.slice(0,2))[0],y:c[1]}:{x:b[d].start.x,y:b[d].start.y};let f=b[d],g=f.points;switch(f.command){case"L":return bG.getPointOnLine(a,f.start.x,f.start.y,g[0],g[1]);case"C":return bG.getPointOnCubicBezier(bF(a,bG.getPathLength(b),a=>bC([f.start.x,g[0],g[2],g[4]],[f.start.y,g[1],g[3],g[5]],a)),f.start.x,f.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return bG.getPointOnQuadraticBezier(bF(a,bG.getPathLength(b),a=>bD([f.start.x,g[0],g[2]],[f.start.y,g[1],g[3]],a)),f.start.x,f.start.y,g[0],g[1],g[2],g[3]);case"A":let h=g[0],i=g[1],j=g[2],k=g[3],l=g[5],m=g[6],n=g[4];return n+=l*a/f.pathLength,bG.getPointOnEllipticalArc(h,i,j,k,n,m)}return null}static getPointOnLine(a,b,c,d,e,f,g){f=null!=f?f:b,g=null!=g?g:c;let h=this.getLineLength(b,c,d,e);if(h<1e-10)return{x:b,y:c};if(d===b)return{x:f,y:g+(e>c?a:-a)};let i=(e-c)/(d-b),j=Math.sqrt(a*a/(1+i*i))*(d<b?-1:1);if(1e-10>Math.abs(g-c-i*(f-b)))return{x:f+j,y:g+i*j};let k=((f-b)*(d-b)+(g-c)*(e-c))/(h*h),l=b+k*(d-b),m=c+k*(e-c),n=this.getLineLength(f,g,l,m),o=Math.sqrt(a*a-n*n),p=Math.sqrt(o*o/(1+i*i))*(d<b?-1:1);return{x:l+p,y:m+i*p}}static getPointOnCubicBezier(a,b,c,d,e,f,g,h,i){function j(a){return 3*a*(1-a)*(1-a)}return{x:a*a*a*h+3*a*a*(1-a)*f+d*j(a)+(1-a)*(1-a)*(1-a)*b,y:a*a*a*i+3*a*a*(1-a)*g+e*j(a)+(1-a)*(1-a)*(1-a)*c}}static getPointOnQuadraticBezier(a,b,c,d,e,f,g){return{x:a*a*f+2*a*(1-a)*d+(1-a)*(1-a)*b,y:a*a*g+2*a*(1-a)*e+(1-a)*(1-a)*c}}static getPointOnEllipticalArc(a,b,c,d,e,f){let g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}}static parsePathData(a){let b;if(!a)return[];let c=a,d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(RegExp(" ","g"),",");for(let a=0;a<d.length;a++)c=c.replace(RegExp(d[a],"g"),"|"+d[a]);let e=c.split("|"),f=[],g=[],h=0,i=0,j=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(let a=1;a<e.length;a++){let c=e[a],d=c.charAt(0);for(c=c.slice(1),g.length=0;b=j.exec(c);)g.push(b[0]);let k=[],l="A"===d||"a"===d?0:-1;for(let a=0,b=g.length;a<b;a++){let b=g[a];if("00"===b){k.push(0,0),l>=0&&(l+=2)>=7&&(l-=7);continue}if(l>=0){if(3===l){if(/^[01]{2}\d+(?:\.\d+)?$/.test(b)){k.push(parseInt(b[0],10)),k.push(parseInt(b[1],10)),k.push(parseFloat(b.slice(2))),(l+=3)>=7&&(l-=7);continue}if("11"===b||"10"===b||"01"===b){k.push(parseInt(b[0],10)),k.push(parseInt(b[1],10)),(l+=2)>=7&&(l-=7);continue}if("0"===b||"1"===b){k.push(parseInt(b,10)),(l+=1)>=7&&(l-=7);continue}}else if(4===l){if(/^[01]\d+(?:\.\d+)?$/.test(b)){k.push(parseInt(b[0],10)),k.push(parseFloat(b.slice(1))),(l+=2)>=7&&(l-=7);continue}if("0"===b||"1"===b){k.push(parseInt(b,10)),(l+=1)>=7&&(l-=7);continue}}let a=parseFloat(b);isNaN(a)?k.push(0):k.push(a),(l+=1)>=7&&(l-=7)}else{let a=parseFloat(b);isNaN(a)?k.push(0):k.push(a)}}for(;k.length>0;){let a,b,c,e,g,j,l,m,n,o;if(isNaN(k[0]))break;let p="",q=[],r=h,s=i;switch(d){case"l":h+=k.shift(),i+=k.shift(),p="L",q.push(h,i);break;case"L":h=k.shift(),i=k.shift(),q.push(h,i);break;case"m":let t=k.shift(),u=k.shift();if(h+=t,i+=u,p="M",f.length>2&&"z"===f[f.length-1].command){for(let a=f.length-2;a>=0;a--)if("M"===f[a].command){h=f[a].points[0]+t,i=f[a].points[1]+u;break}}q.push(h,i),d="l";break;case"M":h=k.shift(),i=k.shift(),p="M",q.push(h,i),d="L";break;case"h":h+=k.shift(),p="L",q.push(h,i);break;case"H":h=k.shift(),p="L",q.push(h,i);break;case"v":i+=k.shift(),p="L",q.push(h,i);break;case"V":i=k.shift(),p="L",q.push(h,i);break;case"C":q.push(k.shift(),k.shift(),k.shift(),k.shift()),h=k.shift(),i=k.shift(),q.push(h,i);break;case"c":q.push(h+k.shift(),i+k.shift(),h+k.shift(),i+k.shift()),h+=k.shift(),i+=k.shift(),p="C",q.push(h,i);break;case"S":b=h,c=i,"C"===(a=f[f.length-1]).command&&(b=h+(h-a.points[2]),c=i+(i-a.points[3])),q.push(b,c,k.shift(),k.shift()),h=k.shift(),i=k.shift(),p="C",q.push(h,i);break;case"s":b=h,c=i,"C"===(a=f[f.length-1]).command&&(b=h+(h-a.points[2]),c=i+(i-a.points[3])),q.push(b,c,h+k.shift(),i+k.shift()),h+=k.shift(),i+=k.shift(),p="C",q.push(h,i);break;case"Q":q.push(k.shift(),k.shift()),h=k.shift(),i=k.shift(),q.push(h,i);break;case"q":q.push(h+k.shift(),i+k.shift()),h+=k.shift(),i+=k.shift(),p="Q",q.push(h,i);break;case"T":b=h,c=i,"Q"===(a=f[f.length-1]).command&&(b=h+(h-a.points[0]),c=i+(i-a.points[1])),h=k.shift(),i=k.shift(),p="Q",q.push(b,c,h,i);break;case"t":b=h,c=i,"Q"===(a=f[f.length-1]).command&&(b=h+(h-a.points[0]),c=i+(i-a.points[1])),h+=k.shift(),i+=k.shift(),p="Q",q.push(b,c,h,i);break;case"A":e=k.shift(),g=k.shift(),j=k.shift(),l=k.shift(),m=k.shift(),n=h,o=i,h=k.shift(),i=k.shift(),p="A",q=this.convertEndpointToCenterParameterization(n,o,h,i,l,m,e,g,j);break;case"a":e=k.shift(),g=k.shift(),j=k.shift(),l=k.shift(),m=k.shift(),n=h,o=i,h+=k.shift(),i+=k.shift(),p="A",q=this.convertEndpointToCenterParameterization(n,o,h,i,l,m,e,g,j)}f.push({command:p||d,points:q,start:{x:r,y:s},pathLength:this.calcLength(r,s,p||d,q)})}("z"===d||"Z"===d)&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f}static calcLength(a,b,c,d){let e,f,g,h;switch(c){case"L":return bG.getLineLength(a,b,d[0],d[1]);case"C":return bC([a,d[0],d[2],d[4]],[b,d[1],d[3],d[5]],1);case"Q":return bD([a,d[0],d[2]],[b,d[1],d[3]],1);case"A":e=0;let i=d[4],j=d[5],k=d[4]+j,l=Math.PI/180;if(Math.abs(i-k)<l&&(l=Math.abs(i-k)),f=bG.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],i,0),j<0)for(h=i-l;h>k;h-=l)g=bG.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=bG.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(h=i+l;h<k;h+=l)g=bG.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=bG.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=bG.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],k,0),e+=bG.getLineLength(f.x,f.y,g.x,g.y)}return 0}static convertEndpointToCenterParameterization(a,b,c,d,e,f,g,h,i){let j=Math.PI/180*i,k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));let n=Math.sqrt((g*g*(h*h)-g*g*(l*l)-h*h*(k*k))/(g*g*(l*l)+h*h*(k*k)));e===f&&(n*=-1),isNaN(n)&&(n=0);let o=n*g*l/h,p=-(n*h)*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return -1>=t(w,x)&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1===f&&y<0&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]}}bG.prototype.className="Path",bG.prototype._attrsAffectingSize=["data"],L(bG),ao.addGetterSetter(bG,"data");class bH extends by{_sceneFunc(a){let b,c;super._sceneFunc(a);let d=2*Math.PI,e=this.points(),f=e,g=0!==this.tension()&&e.length>4;g&&(f=this.getTensionPoints());let h=this.pointerLength(),i=e.length;if(g){let a=[f[f.length-4],f[f.length-3],f[f.length-2],f[f.length-1],e[i-2],e[i-1]],d=bG.calcLength(f[f.length-4],f[f.length-3],"C",a),g=bG.getPointOnQuadraticBezier(Math.min(1,1-h/d),a[0],a[1],a[2],a[3],a[4],a[5]);b=e[i-2]-g.x,c=e[i-1]-g.y}else b=e[i-2]-e[i-4],c=e[i-1]-e[i-3];let j=(Math.atan2(c,b)+d)%d,k=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(e[i-2],e[i-1]),a.rotate(j),a.moveTo(0,0),a.lineTo(-h,k/2),a.lineTo(-h,-k/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(e[0],e[1]),g?(b=(f[0]+f[2])/2-e[0],c=(f[1]+f[3])/2-e[1]):(b=e[2]-e[0],c=e[3]-e[1]),a.rotate((Math.atan2(-c,-b)+d)%d),a.moveTo(0,0),a.lineTo(-h,k/2),a.lineTo(-h,-k/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){let b=this.dashEnabled();b&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),b&&(this.attrs.dashEnabled=!0)}getSelfRect(){let a=super.getSelfRect(),b=this.pointerWidth()/2;return{x:a.x,y:a.y-b,width:a.width,height:a.height+2*b}}}bH.prototype.className="Arrow",L(bH),ao.addGetterSetter(bH,"pointerLength",10,ai()),ao.addGetterSetter(bH,"pointerWidth",10,ai()),ao.addGetterSetter(bH,"pointerAtBeginning",!1),ao.addGetterSetter(bH,"pointerAtEnding",!0);class bI extends bg{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}}bI.prototype._centroid=!0,bI.prototype.className="Circle",bI.prototype._attrsAffectingSize=["radius"],L(bI),ao.addGetterSetter(bI,"radius",0,ai());class bJ extends bg{_sceneFunc(a){let b=this.radiusX(),c=this.radiusY();a.beginPath(),a.save(),b!==c&&a.scale(1,c/b),a.arc(0,0,b,0,2*Math.PI,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}}bJ.prototype.className="Ellipse",bJ.prototype._centroid=!0,bJ.prototype._attrsAffectingSize=["radiusX","radiusY"],L(bJ),ao.addComponentsGetterSetter(bJ,"radius",["x","y"]),ao.addGetterSetter(bJ,"radiusX",0,ai()),ao.addGetterSetter(bJ,"radiusY",0,ai());class bK extends bg{constructor(a){super(a),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",a=>{this._removeImageLoad(a.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let a=this.image();a&&a.complete||(!a||4!==a.readyState)&&a&&a.addEventListener&&a.addEventListener("load",this._loadListener)}_removeImageLoad(a){a&&a.removeEventListener&&a.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){let a=!!this.cornerRadius(),b=this.hasShadow();return!!a&&!!b||super._useBufferCanvas(!0)}_sceneFunc(a){let b,c=this.getWidth(),d=this.getHeight(),e=this.cornerRadius(),f=this.attrs.image;if(f){let a=this.attrs.cropWidth,e=this.attrs.cropHeight;b=a&&e?[f,this.cropX(),this.cropY(),a,e,0,0,c,d]:[f,0,0,c,d]}(this.hasFill()||this.hasStroke()||e)&&(a.beginPath(),e?X.drawRoundedRectPath(a,c,d,e):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)),f&&(e&&a.clip(),a.drawImage.apply(a,b))}_hitFunc(a){let b=this.width(),c=this.height(),d=this.cornerRadius();a.beginPath(),d?X.drawRoundedRectPath(a,b,c,d):a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,b,c;return null!=(c=null!=(a=this.attrs.width)?a:null==(b=this.image())?void 0:b.width)?c:0}getHeight(){var a,b,c;return null!=(c=null!=(a=this.attrs.height)?a:null==(b=this.image())?void 0:b.height)?c:0}static fromURL(a,b,c=null){let d=X.createImageElement();d.onload=function(){b(new bK({image:d}))},d.onerror=c,d.crossOrigin="Anonymous",d.src=a}}bK.prototype.className="Image",bK.prototype._attrsAffectingSize=["image"],L(bK),ao.addGetterSetter(bK,"cornerRadius",0,aj(4)),ao.addGetterSetter(bK,"image"),ao.addComponentsGetterSetter(bK,"crop",["x","y","width","height"]),ao.addGetterSetter(bK,"cropX",0,ai()),ao.addGetterSetter(bK,"cropY",0,ai()),ao.addGetterSetter(bK,"cropWidth",0,ai()),ao.addGetterSetter(bK,"cropHeight",0,ai());let bL=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],bM="right",bN="down",bO="left",bP=bL.length;class bQ extends bl{constructor(a){super(a),this.on("add.konva",function(a){this._addListeners(a.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(a){let b=this,c,d=function(){b._sync()};for(c=0;c<bP;c++)a.on(bL[c]+"Change.konva",d)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let a=this.getText(),b=this.getTag(),c,d,e,f,g,h,i;if(a&&b){switch(c=a.width(),d=a.height(),e=b.pointerDirection(),f=b.pointerWidth(),i=b.pointerHeight(),g=0,h=0,e){case"up":g=c/2,h=-1*i;break;case bM:g=c+f,h=d/2;break;case bN:g=c/2,h=d+i;break;case bO:g=-1*f,h=d/2}b.setAttrs({x:-1*g,y:-1*h,width:c,height:d}),a.setAttrs({x:-1*g,y:-1*h})}}}bQ.prototype.className="Label",L(bQ);class bR extends bg{_sceneFunc(a){let b=this.width(),c=this.height(),d=this.pointerDirection(),e=this.pointerWidth(),f=this.pointerHeight(),g=this.cornerRadius(),h=0,i=0,j=0,k=0;"number"==typeof g?h=i=j=k=Math.min(g,b/2,c/2):(h=Math.min(g[0]||0,b/2,c/2),i=Math.min(g[1]||0,b/2,c/2),k=Math.min(g[2]||0,b/2,c/2),j=Math.min(g[3]||0,b/2,c/2)),a.beginPath(),a.moveTo(h,0),"up"===d&&(a.lineTo((b-e)/2,0),a.lineTo(b/2,-1*f),a.lineTo((b+e)/2,0)),a.lineTo(b-i,0),a.arc(b-i,i,i,3*Math.PI/2,0,!1),d===bM&&(a.lineTo(b,(c-f)/2),a.lineTo(b+e,c/2),a.lineTo(b,(c+f)/2)),a.lineTo(b,c-k),a.arc(b-k,c-k,k,0,Math.PI/2,!1),d===bN&&(a.lineTo((b+e)/2,c),a.lineTo(b/2,c+f),a.lineTo((b-e)/2,c)),a.lineTo(j,c),a.arc(j,c-j,j,Math.PI/2,Math.PI,!1),d===bO&&(a.lineTo(0,(c+f)/2),a.lineTo(-1*e,c/2),a.lineTo(0,(c-f)/2)),a.lineTo(0,h),a.arc(h,h,h,Math.PI,3*Math.PI/2,!1),a.closePath(),a.fillStrokeShape(this)}getSelfRect(){let a=0,b=0,c=this.pointerWidth(),d=this.pointerHeight(),e=this.pointerDirection(),f=this.width(),g=this.height();return"up"===e?(b-=d,g+=d):e===bN?g+=d:e===bO?(a-=1.5*c,f+=c):e===bM&&(f+=1.5*c),{x:a,y:b,width:f,height:g}}}bR.prototype.className="Tag",L(bR),ao.addGetterSetter(bR,"pointerDirection","none"),ao.addGetterSetter(bR,"pointerWidth",0,ai()),ao.addGetterSetter(bR,"pointerHeight",0,ai()),ao.addGetterSetter(bR,"cornerRadius",0,aj(4));class bS extends bg{_sceneFunc(a){let b=this.cornerRadius(),c=this.width(),d=this.height();a.beginPath(),b?X.drawRoundedRectPath(a,c,d,b):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}}bS.prototype.className="Rect",L(bS),ao.addGetterSetter(bS,"cornerRadius",0,aj(4));class bT extends bg{_sceneFunc(a){let b=this._getPoints(),c=this.radius(),d=this.sides(),e=this.cornerRadius();if(a.beginPath(),e)X.drawRoundedPolygonPath(a,b,d,c,e);else{a.moveTo(b[0].x,b[0].y);for(let c=1;c<b.length;c++)a.lineTo(b[c].x,b[c].y)}a.closePath(),a.fillStrokeShape(this)}_getPoints(){let a=this.attrs.sides,b=this.attrs.radius||0,c=[];for(let d=0;d<a;d++)c.push({x:b*Math.sin(2*d*Math.PI/a),y:-1*b*Math.cos(2*d*Math.PI/a)});return c}getSelfRect(){let a=this._getPoints(),b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y;return a.forEach(a=>{b=Math.min(b,a.x),c=Math.max(c,a.x),d=Math.min(d,a.y),e=Math.max(e,a.y)}),{x:b,y:d,width:c-b,height:e-d}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}}bT.prototype.className="RegularPolygon",bT.prototype._centroid=!0,bT.prototype._attrsAffectingSize=["radius"],L(bT),ao.addGetterSetter(bT,"radius",0,ai()),ao.addGetterSetter(bT,"sides",0,ai()),ao.addGetterSetter(bT,"cornerRadius",0,aj(4));let bU=2*Math.PI;class bV extends bg{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,bU,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),bU,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}}bV.prototype.className="Ring",bV.prototype._centroid=!0,bV.prototype._attrsAffectingSize=["innerRadius","outerRadius"],L(bV),ao.addGetterSetter(bV,"innerRadius",0,ai()),ao.addGetterSetter(bV,"outerRadius",0,ai());class bW extends bg{constructor(a){super(a),this._updated=!0,this.anim=new bn(()=>{let a=this._updated;return this._updated=!1,a}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){let b=this.animation(),c=this.frameIndex(),d=4*c,e=this.animations()[b],f=this.frameOffsets(),g=e[d+0],h=e[d+1],i=e[d+2],j=e[d+3],k=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,i,j),a.closePath(),a.fillStrokeShape(this)),k)if(f){let d=f[b],e=2*c;a.drawImage(k,g,h,i,j,d[e+0],d[e+1],i,j)}else a.drawImage(k,g,h,i,j,0,0,i,j)}_hitFunc(a){let b=this.animation(),c=this.frameIndex(),d=4*c,e=this.animations()[b],f=this.frameOffsets(),g=e[d+2],h=e[d+3];if(a.beginPath(),f){let d=f[b],e=2*c;a.rect(d[e+0],d[e+1],g,h)}else a.rect(0,0,g,h);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){let a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;let a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){let a=this.frameIndex(),b=this.animation();a<this.animations()[b].length/4-1?this.frameIndex(a+1):this.frameIndex(0)}}bW.prototype.className="Sprite",L(bW),ao.addGetterSetter(bW,"animation"),ao.addGetterSetter(bW,"animations"),ao.addGetterSetter(bW,"frameOffsets"),ao.addGetterSetter(bW,"image"),ao.addGetterSetter(bW,"frameIndex",0,ai()),ao.addGetterSetter(bW,"frameRate",17,ai()),ao.backCompat(bW,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class bX extends bg{_sceneFunc(a){let b=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(let e=1;e<2*d;e++){let f=e%2==0?c:b,g=f*Math.sin(e*Math.PI/d),h=-1*f*Math.cos(e*Math.PI/d);a.lineTo(g,h)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}}function bY(a){return[...a].reduce((a,b,c,d)=>{if(/\p{Emoji}/u.test(b)){let e=d[c+1];e&&/\p{Emoji_Modifier}|\u200D/u.test(e)?(a.push(b+e),d[c+1]=""):a.push(b)}else/\p{Regional_Indicator}{2}/u.test(b+(d[c+1]||""))?a.push(b+d[c+1]):c>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(b)?a[a.length-1]+=b:b&&a.push(b);return a},[])}bX.prototype.className="Star",bX.prototype._centroid=!0,bX.prototype._attrsAffectingSize=["innerRadius","outerRadius"],L(bX),ao.addGetterSetter(bX,"numPoints",5,ai()),ao.addGetterSetter(bX,"innerRadius",0,ai()),ao.addGetterSetter(bX,"outerRadius",0,ai());let bZ="auto",b$="inherit",b_="justify",b0="left",b1="middle",b2="normal",b3="none",b4=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],b5=b4.length;function b6(){return d||(d=X.createCanvasElement().getContext("2d"))}class b7 extends bg{constructor(a){super(function(a){return(a=a||{}).fillLinearGradientColorStops||a.fillRadialGradientColorStops||a.fillPatternImage||(a.fill=a.fill||"black"),a}(a)),this._partialTextX=0,this._partialTextY=0;for(let a=0;a<b5;a++)this.on(b4[a]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(a){var b,c;let d=this.textArr,e=d.length;if(!this.text())return;let f=this.padding(),g=this.fontSize(),h=this.lineHeight()*g,i=this.verticalAlign(),j=this.direction(),k=0,l=this.align(),m=this.getWidth(),n=this.letterSpacing(),o=this.charRenderFunc(),p=this.fill(),q=this.textDecoration(),r=this.underlineOffset(),s=-1!==q.indexOf("underline"),t=-1!==q.indexOf("line-through"),u;j=j===b$?a.direction:j;let v=h/2,w=b1;if(!K.legacyTextRendering){let a=this.measureSize("M");w="alphabetic",v=((null!=(b=a.fontBoundingBoxAscent)?b:a.actualBoundingBoxAscent)-(null!=(c=a.fontBoundingBoxDescent)?c:a.actualBoundingBoxDescent))/2+h/2}for("rtl"===j&&a.setAttr("direction",j),a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",w),a.setAttr("textAlign",b0),i===b1?k=(this.getHeight()-e*h-2*f)/2:"bottom"===i&&(k=this.getHeight()-e*h-2*f),a.translate(f,k+f),u=0;u<e;u++){let b=0,c=d[u],i=c.text,k=c.width,q=c.lastInParagraph;if(a.save(),"right"===l?b+=m-k-2*f:"center"===l&&(b+=(m-k-2*f)/2),s){a.save(),a.beginPath();let c=null!=r?r:K.legacyTextRendering?Math.round(g/2):Math.round(g/4),d=b,e=v+0+c;a.moveTo(d,e);let h=l!==b_||q?k:m-2*f;a.lineTo(d+Math.round(h),e),a.lineWidth=g/15,a.strokeStyle=this._getLinearGradient()||p,a.stroke(),a.restore()}let w=b;if("rtl"!==j&&(0!==n||l===b_||o)){let c=i.split(" ").length-1,e=bY(i);for(let g=0;g<e.length;g++){let h=e[g];" "!==h||q||l!==b_||(b+=(m-2*f-k)/c),this._partialTextX=b,this._partialTextY=v+0,this._partialText=h,o&&(a.save(),o({char:h,index:g+d.slice(0,u).reduce((a,b)=>a+bY(b.text).length,0),x:b,y:v+0,lineIndex:u,column:g,isLastInLine:q,width:this.measureSize(h).width,context:a})),a.fillStrokeShape(this),o&&a.restore(),b+=this.measureSize(h).width+n}}else 0!==n&&a.setAttr("letterSpacing",`${n}px`),this._partialTextX=b,this._partialTextY=v+0,this._partialText=i,a.fillStrokeShape(this);if(t){a.save(),a.beginPath();let b=K.legacyTextRendering?0:-Math.round(g/4);a.moveTo(w,v+0+b);let c=l!==b_||q?k:m-2*f;a.lineTo(w+Math.round(c),v+0+b),a.lineWidth=g/15,a.strokeStyle=this._getLinearGradient()||p,a.stroke(),a.restore()}a.restore(),e>1&&(v+=h)}}_hitFunc(a){let b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)}setText(a){let b=X._isString(a)?a:null==a?"":a+"";return this._setAttr("text",b),this}getWidth(){return this.attrs.width===bZ||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===bZ||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return X.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(a){var b,c,d,e,f,g,h,i,j,k,l;let m=b6(),n=this.fontSize(),o;m.save(),m.font=this._getContextFont(),o=m.measureText(a),m.restore();let p=n/100;return{actualBoundingBoxAscent:null!=(b=o.actualBoundingBoxAscent)?b:71.58203125*p,actualBoundingBoxDescent:null!=(c=o.actualBoundingBoxDescent)?c:0,actualBoundingBoxLeft:null!=(d=o.actualBoundingBoxLeft)?d:-7.421875*p,actualBoundingBoxRight:null!=(e=o.actualBoundingBoxRight)?e:75.732421875*p,alphabeticBaseline:null!=(f=o.alphabeticBaseline)?f:0,emHeightAscent:null!=(g=o.emHeightAscent)?g:100*p,emHeightDescent:null!=(h=o.emHeightDescent)?h:-20*p,fontBoundingBoxAscent:null!=(i=o.fontBoundingBoxAscent)?i:91*p,fontBoundingBoxDescent:null!=(j=o.fontBoundingBoxDescent)?j:21*p,hangingBaseline:null!=(k=o.hangingBaseline)?k:72.80000305175781*p,ideographicBaseline:null!=(l=o.ideographicBaseline)?l:-21*p,width:o.width,height:n}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(a=>{let b=(a=a.trim()).indexOf(" ")>=0,c=a.indexOf('"')>=0||a.indexOf("'")>=0;return b&&!c&&(a=`"${a}"`),a}).join(", ")}_addTextLine(a){this.align()===b_&&(a=a.trim());let b=this._getTextWidth(a);return this.textArr.push({text:a,width:b,lastInParagraph:!1})}_getTextWidth(a){let b=this.letterSpacing(),c=a.length;return b6().measureText(a).width+b*c}_setTextData(){let a=this.text().split("\n"),b=+this.fontSize(),c=0,d=this.lineHeight()*b,e=this.attrs.width,f=this.attrs.height,g=e!==bZ&&void 0!==e,h=f!==bZ&&void 0!==f,i=this.padding(),j=e-2*i,k=f-2*i,l=0,m=this.wrap(),n="char"!==m&&m!==b3,o=this.ellipsis();this.textArr=[],b6().font=this._getContextFont();let p=o?this._getTextWidth(""):0;for(let b=0,e=a.length;b<e;++b){let f=a[b],i=this._getTextWidth(f);if(g&&i>j)for(;f.length>0;){let a=0,b=bY(f).length,e="",g=0;for(;a<b;){let c=a+b>>>1,i=bY(f).slice(0,c+1).join(""),m=this._getTextWidth(i);(o&&h&&l+d>k?m+p:m)<=j?(a=c+1,e=i,g=m):b=c}if(e){if(n){let b,c=bY(f),d=bY(e),h=c[d.length];(b=(" "===h||"-"===h)&&g<=j?d.length:Math.max(d.lastIndexOf(" "),d.lastIndexOf("-"))+1)>0&&(a=b,e=c.slice(0,a).join(""),g=this._getTextWidth(e))}if(e=e.trimRight(),this._addTextLine(e),c=Math.max(c,g),l+=d,this._shouldHandleEllipsis(l)){this._tryToAddEllipsisToLastLine();break}if((f=bY(f).slice(a).join("").trimLeft()).length>0&&(i=this._getTextWidth(f))<=j){this._addTextLine(f),l+=d,c=Math.max(c,i);break}}else break}else this._addTextLine(f),l+=d,c=Math.max(c,i),this._shouldHandleEllipsis(l)&&b<e-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),h&&l+d>k)break}this.textHeight=b,this.textWidth=c}_shouldHandleEllipsis(a){let b=+this.fontSize(),c=this.lineHeight()*b,d=this.attrs.height,e=this.padding();return this.wrap()===b3||d!==bZ&&void 0!==d&&a+c>d-2*e}_tryToAddEllipsisToLastLine(){let a=this.attrs.width,b=this.padding(),c=this.ellipsis(),d=this.textArr[this.textArr.length-1];d&&c&&(a!==bZ&&void 0!==a&&(this._getTextWidth(d.text+"")<a-2*b||(d.text=d.text.slice(0,d.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(d.text+""))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let a=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),b=this.hasShadow();return!!a&&!!b||super._useBufferCanvas()}}b7.prototype._fillFunc=function(a){a.fillText(this._partialText,this._partialTextX,this._partialTextY)},b7.prototype._strokeFunc=function(a){a.setAttr("miterLimit",2),a.strokeText(this._partialText,this._partialTextX,this._partialTextY)},b7.prototype.className="Text",b7.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],L(b7),ao.overWriteSetter(b7,"width",ak()),ao.overWriteSetter(b7,"height",ak()),ao.addGetterSetter(b7,"direction",b$),ao.addGetterSetter(b7,"fontFamily","Arial"),ao.addGetterSetter(b7,"fontSize",12,ai()),ao.addGetterSetter(b7,"fontStyle",b2),ao.addGetterSetter(b7,"fontVariant",b2),ao.addGetterSetter(b7,"padding",0,ai()),ao.addGetterSetter(b7,"align",b0),ao.addGetterSetter(b7,"verticalAlign","top"),ao.addGetterSetter(b7,"lineHeight",1,ai()),ao.addGetterSetter(b7,"wrap","word"),ao.addGetterSetter(b7,"ellipsis",!1,an()),ao.addGetterSetter(b7,"letterSpacing",0,ai()),ao.addGetterSetter(b7,"text","",al()),ao.addGetterSetter(b7,"textDecoration",""),ao.addGetterSetter(b7,"underlineOffset",void 0,ai()),ao.addGetterSetter(b7,"charRenderFunc",void 0);let b8="normal";function b9(a){a.fillText(this.partialText,0,0)}function ca(a){a.strokeText(this.partialText,0,0)}class cb extends bg{constructor(a){super(a),this.dummyCanvas=X.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return bG.getPathLength(this.dataArray)}_getPointAtLength(a){return!this.attrs.data||a>this.pathLength?null:bG.getPointAtLengthOfDataArray(a,this.dataArray)}_readDataAttribute(){this.dataArray=bG.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(a){a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",this.textBaseline()),a.setAttr("textAlign","left"),a.save();let b=this.textDecoration(),c=this.fill(),d=this.fontSize(),e=this.glyphInfo,f=-1!==b.indexOf("underline"),g=-1!==b.indexOf("line-through");f&&a.beginPath();for(let b=0;b<e.length;b++){a.save();let c=e[b].p0;a.translate(c.x,c.y),a.rotate(e[b].rotation),this.partialText=e[b].text,a.fillStrokeShape(this),f&&(0===b&&a.moveTo(0,d/2+1),a.lineTo(e[b].width,d/2+1)),a.restore()}if(f&&(a.strokeStyle=c,a.lineWidth=d/20,a.stroke()),g){a.beginPath();for(let b=0;b<e.length;b++){a.save();let c=e[b].p0;a.translate(c.x,c.y),a.rotate(e[b].rotation),0===b&&a.moveTo(0,0),a.lineTo(e[b].width,0),a.restore()}a.strokeStyle=c,a.lineWidth=d/20,a.stroke()}a.restore()}_hitFunc(a){a.beginPath();let b=this.glyphInfo;if(b.length>=1){let c=b[0].p0;a.moveTo(c.x,c.y)}for(let c=0;c<b.length;c++){let d=b[c].p1;a.lineTo(d.x,d.y)}a.setAttr("lineWidth",this.fontSize()),a.setAttr("strokeStyle",this.colorKey),a.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return X.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(a){return b7.prototype.setText.call(this,a)}_getContextFont(){return b7.prototype._getContextFont.call(this)}_getTextSize(a){let b=this.dummyCanvas.getContext("2d");b.save(),b.font=this._getContextFont();let c=b.measureText(a);return b.restore(),{width:c.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let a=bY(this.text()),b=[],c=0;for(let d=0;d<a.length;d++)b.push({char:a[d],width:this._getTextSize(a[d]).width}),c+=b[d].width;let{height:d}=this._getTextSize(this.attrs.text);if(this.textWidth=c,this.textHeight=d,this.glyphInfo=[],!this.attrs.data)return null;let e=this.letterSpacing(),f=this.align(),g=this.kerningFunc(),h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*e,0),i=0;"center"===f&&(i=Math.max(0,this.pathLength/2-h/2)),"right"===f&&(i=Math.max(0,this.pathLength-h));let j=i;for(let c=0;c<b.length;c++){let d=this._getPointAtLength(j);if(!d)return;let i=b[c].char,k=b[c].width+e;if(" "===i&&"justify"===f){let a=this.text().split(" ").length-1;k+=(this.pathLength-h)/a}let l=this._getPointAtLength(j+k);if(!l)return;let m=bG.getLineLength(d.x,d.y,l.x,l.y),n=0;if(g)try{n=g(b[c-1].char,i)*this.fontSize()}catch(a){n=0}d.x+=n,l.x+=n,this.textWidth+=n;let o=bG.getPointOnLine(n+m/2,d.x,d.y,l.x,l.y),p=Math.atan2(l.y-d.y,l.x-d.x);this.glyphInfo.push({transposeX:o.x,transposeY:o.y,text:a[c],rotation:p,p0:d,p1:l,width:m}),j+=k}}getSelfRect(){let a,b;if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};let c=[];this.glyphInfo.forEach(function(a){c.push(a.p0.x),c.push(a.p0.y),c.push(a.p1.x),c.push(a.p1.y)});let d=c[0]||0,e=c[0]||0,f=c[1]||0,g=c[1]||0;for(let h=0;h<c.length/2;h++)a=c[2*h],b=c[2*h+1],d=Math.min(d,a),e=Math.max(e,a),f=Math.min(f,b),g=Math.max(g,b);let h=this.fontSize();return{x:d-h/2,y:f-h/2,width:e-d+h,height:g-f+h}}destroy(){return X.releaseCanvas(this.dummyCanvas),super.destroy()}}cb.prototype._fillFunc=b9,cb.prototype._strokeFunc=ca,cb.prototype._fillFuncHit=b9,cb.prototype._strokeFuncHit=ca,cb.prototype.className="TextPath",cb.prototype._attrsAffectingSize=["text","fontSize","data"],L(cb),ao.addGetterSetter(cb,"data"),ao.addGetterSetter(cb,"fontFamily","Arial"),ao.addGetterSetter(cb,"fontSize",12,ai()),ao.addGetterSetter(cb,"fontStyle",b8),ao.addGetterSetter(cb,"align","left"),ao.addGetterSetter(cb,"letterSpacing",0,ai()),ao.addGetterSetter(cb,"textBaseline","middle"),ao.addGetterSetter(cb,"fontVariant",b8),ao.addGetterSetter(cb,"text",""),ao.addGetterSetter(cb,"textDecoration",""),ao.addGetterSetter(cb,"kerningFunc",void 0);let cc="tr-konva",cd=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(a=>a+`.${cc}`).join(" "),ce="nodesRect",cf=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],cg={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},ch="ontouchstart"in K._global,ci=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function cj(a,b,c){let d=c.x+(a.x-c.x)*Math.cos(b)-(a.y-c.y)*Math.sin(b),e=c.y+(a.x-c.x)*Math.sin(b)+(a.y-c.y)*Math.cos(b);return{...a,rotation:a.rotation+b,x:d,y:e}}let ck=0;class cl extends bl{constructor(a){super(a),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(cd,this.update),this.getNode()&&this.update()}attachTo(a){return this.setNode(a),this}setNode(a){return X.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([a])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return cc+this._id}setNodes(a=[]){this._nodes&&this._nodes.length&&this.detach();let b=a.filter(a=>!a.isAncestorOf(this)||(X.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=a=b,1===a.length&&this.useSingleNodeRotation()?this.rotation(a[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{let b=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(a._attrsAffectingSize.length){let c=a._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");a.on(c,b)}a.on(cf.map(a=>a+`.${this._getEventNamespace()}`).join(" "),b),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,b),this._proxyDrag(a)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(a){let b;a.on(`dragstart.${this._getEventNamespace()}`,c=>{b=a.getAbsolutePosition(),this.isDragging()||a===this.findOne(".back")||this.startDrag(c,!1)}),a.on(`dragmove.${this._getEventNamespace()}`,c=>{if(!b)return;let d=a.getAbsolutePosition(),e=d.x-b.x,f=d.y-b.y;this.nodes().forEach(b=>{if(b===a||b.isDragging())return;let d=b.getAbsolutePosition();b.setAbsolutePosition({x:d.x+e,y:d.y+f}),b.startDrag(c)}),b=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(a=>{a.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ce),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ce,this.__getNodeRect)}__getNodeShape(a,b=this.rotation(),c){let d=a.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),e=a.getAbsoluteScale(c),f=a.getAbsolutePosition(c),g=d.x*e.x-a.offsetX()*e.x,h=d.y*e.y-a.offsetY()*e.y,i=(K.getAngle(a.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return cj({x:f.x+g*Math.cos(i)+h*Math.sin(-i),y:f.y+h*Math.cos(i)+g*Math.sin(i),width:d.width*e.x,height:d.height*e.y,rotation:i},-K.getAngle(b),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};let a=[];this.nodes().map(b=>{let c=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],e=b.getAbsoluteTransform();d.forEach(function(b){let c=e.point(b);a.push(c)})});let b=new O;b.rotate(-K.getAngle(this.rotation()));let c=1/0,d=1/0,e=-1/0,f=-1/0;a.forEach(function(a){let g=b.point(a);void 0===c&&(c=e=g.x,d=f=g.y),c=Math.min(c,g.x),d=Math.min(d,g.y),e=Math.max(e,g.x),f=Math.max(f,g.y)}),b.invert();let g=b.point({x:c,y:d});return{x:g.x,y:g.y,width:e-c,height:f-d,rotation:K.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ci.forEach(a=>{this._createAnchor(a)}),this._createAnchor("rotater")}_createAnchor(a){let b=new bS({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:a+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ch?10:"auto"}),c=this;b.on("mousedown touchstart",function(a){c._handleMouseDown(a)}),b.on("dragstart",a=>{b.stopDrag(),a.cancelBubble=!0}),b.on("dragend",a=>{a.cancelBubble=!0}),b.on("mouseenter",()=>{let c=function(a,b,c){if("rotater"===a)return c;b+=X.degToRad(cg[a]||0);let d=(X.radToDeg(b)%360+360)%360;return X._inRange(d,337.5,360)||X._inRange(d,0,22.5)?"ns-resize":X._inRange(d,22.5,67.5)?"nesw-resize":X._inRange(d,67.5,112.5)?"ew-resize":X._inRange(d,112.5,157.5)?"nwse-resize":X._inRange(d,157.5,202.5)?"ns-resize":X._inRange(d,202.5,247.5)?"nesw-resize":X._inRange(d,247.5,292.5)?"ew-resize":X._inRange(d,292.5,337.5)?"nwse-resize":(X.error("Transformer has unknown angle for cursor detection: "+d),"pointer")}(a,K.getAngle(this.rotation()),this.rotateAnchorCursor());b.getStage().content&&(b.getStage().content.style.cursor=c),this._cursorChange=!0}),b.on("mouseout",()=>{b.getStage().content&&(b.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(b)}_createBack(){let a=new bg({name:"back",width:0,height:0,sceneFunc(a,b){let c=b.getParent(),d=c.padding(),e=b.width(),f=b.height();if(a.beginPath(),a.rect(-d,-d,e+2*d,f+2*d),c.rotateEnabled()&&c.rotateLineVisible()){let b=c.rotateAnchorAngle(),d=c.rotateAnchorOffset(),g=X.degToRad(b),h=Math.sin(g),i=-Math.cos(g),j=e/2,k=f/2,l=1/0;i<0?l=Math.min(l,-k/i):i>0&&(l=Math.min(l,(f-k)/i)),h<0?l=Math.min(l,-j/h):h>0&&(l=Math.min(l,(e-j)/h));let m=j+h*l,n=k+i*l,o=X._sign(f);a.moveTo(m,n),a.lineTo(m+h*d*o,n+i*d*o)}a.fillStrokeShape(b)},hitFunc:(a,b)=>{if(!this.shouldOverdrawWholeArea())return;let c=this.padding();a.beginPath(),a.rect(-c,-c,b.width()+2*c,b.height()+2*c),a.fillStrokeShape(b)}});this.add(a),this._proxyDrag(a),a.on("dragstart",a=>{a.cancelBubble=!0}),a.on("dragmove",a=>{a.cancelBubble=!0}),a.on("dragend",a=>{a.cancelBubble=!0}),this.on("dragmove",a=>{this.update()})}_handleMouseDown(a){if(this._transforming)return;this._movingAnchorName=a.target.name().split(" ")[0];let b=this._getNodeRect(),c=b.width,d=b.height,e=Math.sqrt(Math.pow(c,2)+Math.pow(d,2));this.sin=Math.abs(d/e),this.cos=Math.abs(c/e),this._transforming=!0;let f=a.target.getAbsolutePosition(),g=a.target.getStage().getPointerPosition();this._anchorDragOffset={x:g.x-f.x,y:g.y-f.y},ck++,this._fire("transformstart",{evt:a.evt,target:this.getNode()}),this._nodes.forEach(b=>{b._fire("transformstart",{evt:a.evt,target:b})})}_handleMouseMove(a){let b,c,d,e,f=this.findOne("."+this._movingAnchorName),g=f.getStage();g.setPointersPositions(a);let h=g.getPointerPosition(),i={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y},j=f.getAbsolutePosition();this.anchorDragBoundFunc()&&(i=this.anchorDragBoundFunc()(j,i,a)),f.setAbsolutePosition(i);let k=f.getAbsolutePosition();if(j.x===k.x&&j.y===k.y)return;if("rotater"===this._movingAnchorName){let d,e=this._getNodeRect();b=f.x()-e.width/2;let g=Math.atan2(-(c=-f.y()+e.height/2),b)+Math.PI/2-K.getAngle(this.rotateAnchorAngle());e.height<0&&(g-=Math.PI);let h=K.getAngle(this.rotation())+g,i=K.getAngle(this.rotationSnapTolerance()),j=function(a,b,c){let d=b;for(let e=0;e<a.length;e++){let f=K.getAngle(a[e]),g=Math.abs(f-b)%(2*Math.PI);Math.min(g,2*Math.PI-g)<c&&(d=f)}return d}(this.rotationSnaps(),h,i)-e.rotation,k=(d={x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)},cj(e,j,d));this._fitNodesInto(k,a);return}let l=this.shiftBehavior();e="inverted"===l?this.keepRatio()&&!a.shiftKey:"none"===l?this.keepRatio():this.keepRatio()||a.shiftKey;let m=this.centeredScaling()||a.altKey;if("top-left"===this._movingAnchorName){if(e){let a=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};d=Math.sqrt(Math.pow(a.x-f.x(),2)+Math.pow(a.y-f.y(),2));let e=this.findOne(".top-left").x()>a.x?-1:1,g=this.findOne(".top-left").y()>a.y?-1:1;b=d*this.cos*e,c=d*this.sin*g,this.findOne(".top-left").x(a.x-b),this.findOne(".top-left").y(a.y-c)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(f.y());else if("top-right"===this._movingAnchorName){if(e){let a=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};d=Math.sqrt(Math.pow(f.x()-a.x,2)+Math.pow(a.y-f.y(),2));let e=this.findOne(".top-right").x()<a.x?-1:1,g=this.findOne(".top-right").y()>a.y?-1:1;b=d*this.cos*e,c=d*this.sin*g,this.findOne(".top-right").x(a.x+b),this.findOne(".top-right").y(a.y-c)}var n=f.position();this.findOne(".top-left").y(n.y),this.findOne(".bottom-right").x(n.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(f.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(f.x());else if("bottom-left"===this._movingAnchorName){if(e){let a=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};d=Math.sqrt(Math.pow(a.x-f.x(),2)+Math.pow(f.y()-a.y,2));let e=a.x<f.x()?-1:1,g=f.y()<a.y?-1:1;b=d*this.cos*e,c=d*this.sin*g,f.x(a.x-b),f.y(a.y+c)}n=f.position(),this.findOne(".top-left").x(n.x),this.findOne(".bottom-right").y(n.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(f.y());else if("bottom-right"===this._movingAnchorName){if(e){let a=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};d=Math.sqrt(Math.pow(f.x()-a.x,2)+Math.pow(f.y()-a.y,2));let e=this.findOne(".bottom-right").x()<a.x?-1:1,g=this.findOne(".bottom-right").y()<a.y?-1:1;b=d*this.cos*e,c=d*this.sin*g,this.findOne(".bottom-right").x(a.x+b),this.findOne(".bottom-right").y(a.y+c)}}else console.error(Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(m=this.centeredScaling()||a.altKey){let a=this.findOne(".top-left"),b=this.findOne(".bottom-right"),c=a.x(),d=a.y(),e=this.getWidth()-b.x(),f=this.getHeight()-b.y();b.move({x:-c,y:-d}),a.move({x:e,y:f})}let o=this.findOne(".top-left").getAbsolutePosition();b=o.x,c=o.y;let p=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:b,y:c,width:p,height:q,rotation:K.getAngle(this.rotation())},a)}_handleMouseUp(a){this._removeEvents(a)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(a){var b;if(this._transforming){this._transforming=!1;let c=this.getNode();ck--,this._fire("transformend",{evt:a,target:c}),null==(b=this.getLayer())||b.batchDraw(),c&&this._nodes.forEach(b=>{var c;b._fire("transformend",{evt:a,target:b}),null==(c=b.getLayer())||c.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(a,b){let c=this._getNodeRect();if(X._inRange(a.width,-(2*this.padding())-1,1)||X._inRange(a.height,-(2*this.padding())-1,1))return void this.update();let d=new O;if(d.rotate(K.getAngle(this.rotation())),this._movingAnchorName&&a.width<0&&this._movingAnchorName.indexOf("left")>=0){let b=d.point({x:-(2*this.padding()),y:0});a.x+=b.x,a.y+=b.y,a.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y}else if(this._movingAnchorName&&a.width<0&&this._movingAnchorName.indexOf("right")>=0){let b=d.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,a.width+=2*this.padding()}if(this._movingAnchorName&&a.height<0&&this._movingAnchorName.indexOf("top")>=0){let b=d.point({x:0,y:-(2*this.padding())});a.x+=b.x,a.y+=b.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,a.height+=2*this.padding()}else if(this._movingAnchorName&&a.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let b=d.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=b.x,this._anchorDragOffset.y-=b.y,a.height+=2*this.padding()}if(this.boundBoxFunc()){let b=this.boundBoxFunc()(c,a);b?a=b:X.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let e=new O;e.translate(c.x,c.y),e.rotate(c.rotation),e.scale(c.width/1e7,c.height/1e7);let f=new O,g=a.width/1e7,h=a.height/1e7;!1===this.flipEnabled()?(f.translate(a.x,a.y),f.rotate(a.rotation),f.translate(a.width<0?a.width:0,a.height<0?a.height:0),f.scale(Math.abs(g),Math.abs(h))):(f.translate(a.x,a.y),f.rotate(a.rotation),f.scale(g,h));let i=f.multiply(e.invert());this._nodes.forEach(a=>{var b;if(!a.getStage())return;let c=a.getParent().getAbsoluteTransform(),d=a.getTransform().copy();d.translate(a.offsetX(),a.offsetY());let e=new O;e.multiply(c.copy().invert()).multiply(i).multiply(c).multiply(d);let f=e.decompose();a.setAttrs(f),null==(b=a.getLayer())||b.batchDraw()}),this.rotation(X._getRotation(a.rotation)),this._nodes.forEach(a=>{this._fire("transform",{evt:b,target:a}),a._fire("transform",{evt:b,target:a})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(a,b){this.findOne(a).setAttrs(b)}update(){var a;let b=this._getNodeRect();this.rotation(X._getRotation(b.rotation));let c=b.width,d=b.height,e=this.enabledAnchors(),f=this.resizeEnabled(),g=this.padding(),h=this.anchorSize(),i=this.find("._anchor");i.forEach(a=>{a.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+g,offsetY:h/2+g,visible:f&&e.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:c/2,y:0,offsetY:h/2+g,visible:f&&e.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:c,y:0,offsetX:h/2-g,offsetY:h/2+g,visible:f&&e.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:d/2,offsetX:h/2+g,visible:f&&e.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:c,y:d/2,offsetX:h/2-g,visible:f&&e.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:d,offsetX:h/2+g,offsetY:h/2-g,visible:f&&e.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:c/2,y:d,offsetY:h/2-g,visible:f&&e.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:c,y:d,offsetX:h/2-g,offsetY:h/2-g,visible:f&&e.indexOf("bottom-right")>=0});let j=this.rotateAnchorAngle(),k=this.rotateAnchorOffset(),l=X.degToRad(j),m=Math.sin(l),n=-Math.cos(l),o=c/2,p=d/2,q=1/0;n<0?q=Math.min(q,-p/n):n>0&&(q=Math.min(q,(d-p)/n)),m<0?q=Math.min(q,-o/m):m>0&&(q=Math.min(q,(c-o)/m));let r=o+m*q,s=p+n*q,t=X._sign(d);this._batchChangeChild(".rotater",{x:r+m*k*t,y:s+n*k*t-g*n,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:c,height:d,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(a=>a.draggable()),x:0,y:0});let u=this.anchorStyleFunc();u&&i.forEach(a=>{u(a)}),null==(a=this.getLayer())||a.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();let a=this.findOne("."+this._movingAnchorName);a&&a.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),bl.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return aA.prototype.toObject.call(this)}clone(a){return aA.prototype.clone.call(this,a)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}cl.isTransforming=()=>ck>0,cl.prototype.className="Transformer",L(cl),ao.addGetterSetter(cl,"enabledAnchors",ci,function(a){return a instanceof Array||X.warn("enabledAnchors value should be an array"),a instanceof Array&&a.forEach(function(a){-1===ci.indexOf(a)&&X.warn("Unknown anchor name: "+a+". Available names are: "+ci.join(", "))}),a||[]}),ao.addGetterSetter(cl,"flipEnabled",!0,an()),ao.addGetterSetter(cl,"resizeEnabled",!0),ao.addGetterSetter(cl,"anchorSize",10,ai()),ao.addGetterSetter(cl,"rotateEnabled",!0),ao.addGetterSetter(cl,"rotateLineVisible",!0),ao.addGetterSetter(cl,"rotationSnaps",[]),ao.addGetterSetter(cl,"rotateAnchorOffset",50,ai()),ao.addGetterSetter(cl,"rotateAnchorAngle",0,ai()),ao.addGetterSetter(cl,"rotateAnchorCursor","crosshair"),ao.addGetterSetter(cl,"rotationSnapTolerance",5,ai()),ao.addGetterSetter(cl,"borderEnabled",!0),ao.addGetterSetter(cl,"anchorStroke","rgb(0, 161, 255)"),ao.addGetterSetter(cl,"anchorStrokeWidth",1,ai()),ao.addGetterSetter(cl,"anchorFill","white"),ao.addGetterSetter(cl,"anchorCornerRadius",0,ai()),ao.addGetterSetter(cl,"borderStroke","rgb(0, 161, 255)"),ao.addGetterSetter(cl,"borderStrokeWidth",1,ai()),ao.addGetterSetter(cl,"borderDash"),ao.addGetterSetter(cl,"keepRatio",!0),ao.addGetterSetter(cl,"shiftBehavior","default"),ao.addGetterSetter(cl,"centeredScaling",!1),ao.addGetterSetter(cl,"ignoreStroke",!1),ao.addGetterSetter(cl,"padding",0,ai()),ao.addGetterSetter(cl,"nodes"),ao.addGetterSetter(cl,"node"),ao.addGetterSetter(cl,"boundBoxFunc"),ao.addGetterSetter(cl,"anchorDragBoundFunc"),ao.addGetterSetter(cl,"anchorStyleFunc"),ao.addGetterSetter(cl,"shouldOverdrawWholeArea",!1),ao.addGetterSetter(cl,"useSingleNodeRotation",!0),ao.backCompat(cl,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class cm extends bg{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,K.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}}function cn(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}cm.prototype.className="Wedge",cm.prototype._centroid=!0,cm.prototype._attrsAffectingSize=["radius"],L(cm),ao.addGetterSetter(cm,"radius",0,ai()),ao.addGetterSetter(cm,"angle",0,ai()),ao.addGetterSetter(cm,"clockwise",!1),ao.backCompat(cm,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});let co=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],cp=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function cq(a,b,c,d,e){let f=c-b,g=e-d;if(0===f)return d+g/2;if(0===g)return d;let h=(a-b)/f;return g*h+d}ao.addGetterSetter(aA,"blurRadius",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"brightness",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"contrast",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"embossStrength",.5,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"embossWhiteLevel",.5,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"embossDirection","top-left",void 0,ao.afterSetFilter),ao.addGetterSetter(aA,"embossBlend",!1,void 0,ao.afterSetFilter),ao.addGetterSetter(aA,"enhance",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"hue",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"saturation",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"luminance",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"hue",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"saturation",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"value",0,ai(),ao.afterSetFilter);let cr=function(a,b,c){let d=a.data,e=b.data,f=a.width,g=a.height,h=c.polarCenterX||f/2,i=c.polarCenterY||g/2,j=Math.sqrt(h*h+i*i),k=f-h,l=g-i,m=Math.sqrt(k*k+l*l);j=m>j?m:j;let n=360/f*Math.PI/180;for(let a=0;a<f;a+=1){let b=Math.sin(a*n),c=Math.cos(a*n);for(let m=0;m<g;m+=1){k=Math.floor(h+j*m/g*c);let n=((l=Math.floor(i+j*m/g*b))*f+k)*4,o=d[n+0],p=d[n+1],q=d[n+2],r=d[n+3];e[(n=(a+m*f)*4)+0]=o,e[n+1]=p,e[n+2]=q,e[n+3]=r}}},cs=function(a,b,c){let d,e=a.data,f=b.data,g=a.width,h=a.height,i=c.polarCenterX||g/2,j=c.polarCenterY||h/2,k=Math.sqrt(i*i+j*j),l=g-i,m=h-j,n=Math.sqrt(l*l+m*m);k=n>k?n:k;let o=c.polarRotation||0;for(l=0;l<g;l+=1)for(m=0;m<h;m+=1){let a=l-i,b=m-j,c=Math.sqrt(a*a+b*b)*h/k,n=(180*Math.atan2(b,a)/Math.PI+360+o)%360;d=Math.floor(n=n*g/360);let p=(Math.floor(c)*g+d)*4,q=e[p+0],r=e[p+1],s=e[p+2],t=e[p+3];f[(p=(m*g+l)*4)+0]=q,f[p+1]=r,f[p+2]=s,f[p+3]=t}};function ct(a,b,c){let d=(c*a.width+b)*4,e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function cu(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}ao.addGetterSetter(aA,"kaleidoscopePower",2,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"kaleidoscopeAngle",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"threshold",0,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"noise",.2,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"pixelSize",8,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"levels",.5,ai(),ao.afterSetFilter),ao.addGetterSetter(aA,"red",0,function(a){return(this._filterUpToDate=!1,a>255)?255:a<0?0:Math.round(a)}),ao.addGetterSetter(aA,"green",0,function(a){return(this._filterUpToDate=!1,a>255)?255:a<0?0:Math.round(a)}),ao.addGetterSetter(aA,"blue",0,ah,ao.afterSetFilter),ao.addGetterSetter(aA,"red",0,function(a){return(this._filterUpToDate=!1,a>255)?255:a<0?0:Math.round(a)}),ao.addGetterSetter(aA,"green",0,function(a){return(this._filterUpToDate=!1,a>255)?255:a<0?0:Math.round(a)}),ao.addGetterSetter(aA,"blue",0,ah,ao.afterSetFilter),ao.addGetterSetter(aA,"alpha",1,function(a){return(this._filterUpToDate=!1,a>1)?1:a<0?0:a}),ao.addGetterSetter(aA,"threshold",.5,ai(),ao.afterSetFilter),bu.Util._assign(bu,{Arc:bv,Arrow:bH,Circle:bI,Ellipse:bJ,Image:bK,Label:bQ,Tag:bR,Line:by,Path:bG,Rect:bS,RegularPolygon:bT,Ring:bV,Sprite:bW,Star:bX,Text:b7,TextPath:cb,Transformer:cl,Wedge:cm,Filters:{Blur:function(a){let b=Math.round(this.blurRadius());b>0&&function(a,b){let c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.data,x=a.width,y=a.height,z=b+b+1,A=x-1,B=y-1,C=b+1,D=C*(C+1)/2,E=new cn,F=co[b],G=cp[b],H=null,I=E,J=null,K=null;for(let a=1;a<z;a++)I=I.next=new cn,a===C&&(H=I);I.next=E,e=d=0;for(let a=0;a<y;a++){n=o=p=q=f=g=h=i=0,j=C*(r=w[d]),k=C*(s=w[d+1]),l=C*(t=w[d+2]),m=C*(u=w[d+3]),f+=D*r,g+=D*s,h+=D*t,i+=D*u,I=E;for(let a=0;a<C;a++)I.r=r,I.g=s,I.b=t,I.a=u,I=I.next;for(let a=1;a<C;a++)c=d+((A<a?A:a)<<2),f+=(I.r=r=w[c])*(v=C-a),g+=(I.g=s=w[c+1])*v,h+=(I.b=t=w[c+2])*v,i+=(I.a=u=w[c+3])*v,n+=r,o+=s,p+=t,q+=u,I=I.next;J=E,K=H;for(let a=0;a<x;a++)w[d+3]=u=i*F>>G,0!==u?(u=255/u,w[d]=(f*F>>G)*u,w[d+1]=(g*F>>G)*u,w[d+2]=(h*F>>G)*u):w[d]=w[d+1]=w[d+2]=0,f-=j,g-=k,h-=l,i-=m,j-=J.r,k-=J.g,l-=J.b,m-=J.a,c=e+((c=a+b+1)<A?c:A)<<2,n+=J.r=w[c],o+=J.g=w[c+1],p+=J.b=w[c+2],q+=J.a=w[c+3],f+=n,g+=o,h+=p,i+=q,J=J.next,j+=r=K.r,k+=s=K.g,l+=t=K.b,m+=u=K.a,n-=r,o-=s,p-=t,q-=u,K=K.next,d+=4;e+=x}for(let a=0;a<x;a++){o=p=q=n=g=h=i=f=0,j=C*(r=w[d=a<<2]),k=C*(s=w[d+1]),l=C*(t=w[d+2]),m=C*(u=w[d+3]),f+=D*r,g+=D*s,h+=D*t,i+=D*u,I=E;for(let a=0;a<C;a++)I.r=r,I.g=s,I.b=t,I.a=u,I=I.next;let e=x;for(let c=1;c<=b;c++)d=e+a<<2,f+=(I.r=r=w[d])*(v=C-c),g+=(I.g=s=w[d+1])*v,h+=(I.b=t=w[d+2])*v,i+=(I.a=u=w[d+3])*v,n+=r,o+=s,p+=t,q+=u,I=I.next,c<B&&(e+=x);d=a,J=E,K=H;for(let b=0;b<y;b++)w[(c=d<<2)+3]=u=i*F>>G,u>0?(u=255/u,w[c]=(f*F>>G)*u,w[c+1]=(g*F>>G)*u,w[c+2]=(h*F>>G)*u):w[c]=w[c+1]=w[c+2]=0,f-=j,g-=k,h-=l,i-=m,j-=J.r,k-=J.g,l-=J.b,m-=J.a,c=a+((c=b+C)<B?c:B)*x<<2,f+=n+=J.r=w[c],g+=o+=J.g=w[c+1],h+=p+=J.b=w[c+2],i+=q+=J.a=w[c+3],J=J.next,j+=r=K.r,k+=s=K.g,l+=t=K.b,m+=u=K.a,n-=r,o-=s,p-=t,q-=u,K=K.next,d+=x}}(a,b)},Brightness:function(a){let b=this.brightness(),c=a.data,d=c.length;for(let a=0;a<d;a+=4)c[a]=Math.min(255,c[a]*b),c[a+1]=Math.min(255,c[a+1]*b),c[a+2]=Math.min(255,c[a+2]*b)},Brighten:function(a){let b=255*this.brightness(),c=a.data,d=c.length;for(let a=0;a<d;a+=4)c[a]+=b,c[a+1]+=b,c[a+2]+=b},Contrast:function(a){let b=Math.pow((this.contrast()+100)/100,2),c=a.data,d=c.length,e=150,f=150,g=150;for(let a=0;a<d;a+=4)e=c[a],f=c[a+1],g=c[a+2],e/=255,e-=.5,e*=b,e+=.5,e*=255,f/=255,f-=.5,f*=b,f+=.5,f*=255,g/=255,g-=.5,g*=b,g+=.5,g*=255,e=e<0?0:e>255?255:e,f=f<0?0:f>255?255:f,g=g<0?0:g>255?255:g,c[a]=e,c[a+1]=f,c[a+2]=g},Emboss:function(a){var b,c,d,e,f,g,h,i,j;let k=a.data,l=a.width,m=a.height,n=Math.min(1,Math.max(0,null!=(c=null==(b=this.embossStrength)?void 0:b.call(this))?c:.5)),o=Math.min(1,Math.max(0,null!=(e=null==(d=this.embossWhiteLevel)?void 0:d.call(this))?e:.5)),p=null!=(h=({"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0})[null!=(g=null==(f=this.embossDirection)?void 0:f.call(this))?g:"top-left"])?h:315,q=!!(null!=(j=null==(i=this.embossBlend)?void 0:i.call(this))&&j),r=255*o,s=p*Math.PI/180,t=Math.cos(s),u=Math.sin(s),v=128/1020*(10*n),w=new Uint8ClampedArray(k),x=new Float32Array(l*m);for(let a=0,b=0;b<k.length;b+=4,a++)x[a]=.2126*w[b]+.7152*w[b+1]+.0722*w[b+2];let y=[-l-1,-l,-l+1,-1,0,1,l-1,l,l+1],z=a=>a<0?0:a>255?255:a;for(let a=1;a<m-1;a++)for(let b=1;b<l-1;b++){let c=a*l+b,d,e=0;d=0+-1*x[c+y[0]],e+=-1*x[c+y[0]],d+=0*x[c+y[1]],e+=-2*x[c+y[1]],d+=+x[c+y[2]],e+=-1*x[c+y[2]],d+=-2*x[c+y[3]],e+=0*x[c+y[3]],d+=2*x[c+y[5]],e+=0*x[c+y[5]],d+=-1*x[c+y[6]],e+=+x[c+y[6]],d+=0*x[c+y[7]],e+=2*x[c+y[7]];let f=z(r+(t*(d+=+x[c+y[8]])+u*(e+=+x[c+y[8]]))*v),g=4*c;if(q){let a=f-r;k[g]=z(w[g]+a),k[g+1]=z(w[g+1]+a),k[g+2]=z(w[g+2]+a),k[g+3]=w[g+3]}else k[g]=k[g+1]=k[g+2]=f,k[g+3]=w[g+3]}for(let a=0;a<l;a++){let b=4*a,c=((m-1)*l+a)*4;k[b]=w[b],k[b+1]=w[b+1],k[b+2]=w[b+2],k[b+3]=w[b+3],k[c]=w[c],k[c+1]=w[c+1],k[c+2]=w[c+2],k[c+3]=w[c+3]}for(let a=1;a<m-1;a++){let b=a*l*4,c=(a*l+(l-1))*4;k[b]=w[b],k[b+1]=w[b+1],k[b+2]=w[b+2],k[b+3]=w[b+3],k[c]=w[c],k[c+1]=w[c+1],k[c+2]=w[c+2],k[c+3]=w[c+3]}return a},Enhance:function(a){let b,c,d,e,f,g,h=a.data,i=h.length,j=h[0],k=j,l,m=h[1],n=m,o,p=h[2],q=p,r,s=this.enhance();if(0!==s){for(let a=0;a<i;a+=4)(l=h[a+0])<j?j=l:l>k&&(k=l),(o=h[a+1])<m?m=o:o>n&&(n=o),(r=h[a+2])<p?p=r:r>q&&(q=r);if(k===j&&(k=255,j=0),n===m&&(n=255,m=0),q===p&&(q=255,p=0),s>0)b=k+s*(255-k),c=j-s*(j-0),d=n+s*(255-n),e=m-s*(m-0),f=q+s*(255-q),g=p-s*(p-0);else{let a=(k+j)*.5;b=k+s*(k-a),c=j+s*(j-a);let h=(n+m)*.5;d=n+s*(n-h),e=m+s*(m-h);let i=(q+p)*.5;f=q+s*(q-i),g=p+s*(p-i)}for(let a=0;a<i;a+=4)h[a+0]=cq(h[a+0],j,k,c,b),h[a+1]=cq(h[a+1],m,n,e,d),h[a+2]=cq(h[a+2],p,q,g,f)}},Grayscale:function(a){let b=a.data,c=b.length;for(let a=0;a<c;a+=4){let c=.34*b[a]+.5*b[a+1]+.16*b[a+2];b[a]=c,b[a+1]=c,b[a+2]=c}},HSL:function(a){let b,c,d,e,f=a.data,g=f.length,h=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,j=127*this.luminance(),k=h*Math.cos(i*Math.PI/180),l=h*Math.sin(i*Math.PI/180),m=.299+.701*k+.167*l,n=.587-.587*k+.33*l,o=.114-.114*k-.497*l,p=.299-.299*k-.328*l,q=.587+.413*k+.035*l,r=.114-.114*k+.293*l,s=.299-.3*k+1.25*l,t=.587-.586*k-1.05*l,u=.114+.886*k-.2*l;for(let a=0;a<g;a+=4)b=f[a+0],c=f[a+1],d=f[a+2],e=f[a+3],f[a+0]=m*b+n*c+o*d+j,f[a+1]=p*b+q*c+r*d+j,f[a+2]=s*b+t*c+u*d+j,f[a+3]=e},HSV:function(a){let b=a.data,c=b.length,d=Math.pow(2,this.value()),e=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,g=d*e*Math.cos(f*Math.PI/180),h=d*e*Math.sin(f*Math.PI/180),i=.299*d+.701*g+.167*h,j=.587*d-.587*g+.33*h,k=.114*d-.114*g-.497*h,l=.299*d-.299*g-.328*h,m=.587*d+.413*g+.035*h,n=.114*d-.114*g+.293*h,o=.299*d-.3*g+1.25*h,p=.587*d-.586*g-1.05*h,q=.114*d+.886*g-.2*h;for(let a=0;a<c;a+=4){let c=b[a+0],d=b[a+1],e=b[a+2],f=b[a+3];b[a+0]=i*c+j*d+k*e,b[a+1]=l*c+m*d+n*e,b[a+2]=o*c+p*d+q*e,b[a+3]=f}},Invert:function(a){let b=a.data,c=b.length;for(let a=0;a<c;a+=4)b[a]=255-b[a],b[a+1]=255-b[a+1],b[a+2]=255-b[a+2]},Kaleidoscope:function(a){let b,c,d,e,f,g,h,i,j,k,l=a.width,m=a.height,n=Math.round(this.kaleidoscopePower()),o=Math.floor(Math.round(this.kaleidoscopeAngle())%360*l/360);if(n<1)return;let p=X.createCanvasElement();p.width=l,p.height=m;let q=p.getContext("2d").getImageData(0,0,l,m);X.releaseCanvas(p),cr(a,q,{polarCenterX:l/2,polarCenterY:m/2});let r=l/Math.pow(2,n);for(;r<=8;)r*=2,n-=1;let s=r=Math.ceil(r),t=0,u=s,v=1;for(o+r>l&&(t=s,u=0,v=-1),c=0;c<m;c+=1)for(b=t;b!==u;b+=v)d=Math.round(b+o)%l,j=(l*c+d)*4,f=q.data[j+0],g=q.data[j+1],h=q.data[j+2],i=q.data[j+3],k=(l*c+b)*4,q.data[k+0]=f,q.data[k+1]=g,q.data[k+2]=h,q.data[k+3]=i;for(c=0;c<m;c+=1)for(e=0,s=Math.floor(r);e<n;e+=1){for(b=0;b<s+1;b+=1)j=(l*c+b)*4,f=q.data[j+0],g=q.data[j+1],h=q.data[j+2],i=q.data[j+3],k=(l*c+2*s-b-1)*4,q.data[k+0]=f,q.data[k+1]=g,q.data[k+2]=h,q.data[k+3]=i;s*=2}cs(q,a,{polarRotation:0})},Mask:function(a){let b=function(a,b){let c=ct(a,0,0),d=ct(a,a.width-1,0),e=ct(a,0,a.height-1),f=ct(a,a.width-1,a.height-1),g=b||10;if(cu(c,d)<g&&cu(d,f)<g&&cu(f,e)<g&&cu(e,c)<g){let b=function(a){let b=[0,0,0];for(let c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}([d,c,f,e]),h=[];for(let c=0;c<a.width*a.height;c++){let d=cu(b,[a.data[4*c],a.data[4*c+1],a.data[4*c+2]]);h[c]=d<g?0:255}return h}}(a,this.threshold());if(b){var c=b=function(a,b,c){let d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[];for(let h=0;h<c;h++)for(let i=0;i<b;i++){let j=h*b+i,k=0;for(let g=0;g<e;g++)for(let j=0;j<e;j++){let l=h+g-f,m=i+j-f;if(l>=0&&l<c&&m>=0&&m<b){let c=l*b+m,f=d[g*e+j];k+=a[c]*f}}g[j]=k}return g}(b=function(a,b,c){let d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[];for(let h=0;h<c;h++)for(let i=0;i<b;i++){let j=h*b+i,k=0;for(let g=0;g<e;g++)for(let j=0;j<e;j++){let l=h+g-f,m=i+j-f;if(l>=0&&l<c&&m>=0&&m<b){let c=l*b+m,f=d[g*e+j];k+=a[c]*f}}g[j]=255*(k>=1020)}return g}(b=function(a,b,c){let d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[];for(let h=0;h<c;h++)for(let i=0;i<b;i++){let j=h*b+i,k=0;for(let g=0;g<e;g++)for(let j=0;j<e;j++){let l=h+g-f,m=i+j-f;if(l>=0&&l<c&&m>=0&&m<b){let c=l*b+m,f=d[g*e+j];k+=a[c]*f}}g[j]=255*(2040===k)}return g}(b,a.width,a.height),a.width,a.height),a.width,a.height);for(let b=0;b<a.width*a.height;b++)a.data[4*b+3]=c[b]}return a},Noise:function(a){let b=255*this.noise(),c=a.data,d=c.length,e=b/2;for(let a=0;a<d;a+=4)c[a+0]+=e-2*e*Math.random(),c[a+1]+=e-2*e*Math.random(),c[a+2]+=e-2*e*Math.random()},Pixelate:function(a){let b=Math.ceil(this.pixelSize()),c=a.width,d=a.height,e=Math.ceil(c/b),f=Math.ceil(d/b),g=a.data;if(b<=0)return void X.error("pixelSize value can not be <= 0");for(let a=0;a<e;a+=1)for(let e=0;e<f;e+=1){let f=0,h=0,i=0,j=0,k=a*b,l=k+b,m=e*b,n=m+b,o=0;for(let a=k;a<l;a+=1)if(!(a>=c))for(let b=m;b<n;b+=1){if(b>=d)continue;let e=(c*b+a)*4;f+=g[e+0],h+=g[e+1],i+=g[e+2],j+=g[e+3],o+=1}f/=o,h/=o,i/=o,j/=o;for(let a=k;a<l;a+=1)if(!(a>=c))for(let b=m;b<n;b+=1){if(b>=d)continue;let e=(c*b+a)*4;g[e+0]=f,g[e+1]=h,g[e+2]=i,g[e+3]=j}}},Posterize:function(a){let b=Math.round(254*this.levels())+1,c=a.data,d=c.length,e=255/b;for(let a=0;a<d;a+=1)c[a]=Math.floor(c[a]/e)*e},RGB:function(a){let b=a.data,c=b.length,d=this.red(),e=this.green(),f=this.blue();for(let a=0;a<c;a+=4){let c=(.34*b[a]+.5*b[a+1]+.16*b[a+2])/255;b[a]=c*d,b[a+1]=c*e,b[a+2]=c*f,b[a+3]=b[a+3]}},RGBA:function(a){let b=a.data,c=b.length,d=this.red(),e=this.green(),f=this.blue(),g=this.alpha();for(let a=0;a<c;a+=4){let c=1-g;b[a]=d*g+b[a]*c,b[a+1]=e*g+b[a+1]*c,b[a+2]=f*g+b[a+2]*c}},Sepia:function(a){let b=a.data,c=b.length;for(let a=0;a<c;a+=4){let c=b[a+0],d=b[a+1],e=b[a+2];b[a+0]=Math.min(255,.393*c+.769*d+.189*e),b[a+1]=Math.min(255,.349*c+.686*d+.168*e),b[a+2]=Math.min(255,.272*c+.534*d+.131*e)}},Solarize:function(a){let b=a.data;for(let a=0;a<b.length;a+=4){let c=b[a],d=b[a+1],e=b[a+2];.2126*c+.7152*d+.0722*e>=128&&(b[a]=255-c,b[a+1]=255-d,b[a+2]=255-e)}return a},Threshold:function(a){let b=255*this.threshold(),c=a.data,d=c.length;for(let a=0;a<d;a+=1)c[a]=c[a]<b?0:255}}});var cv=a.i(63491),cw=a.i(55791);let cx={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0},cy=!1,cz=!1,cA=".react-konva-event",cB=!1,cC=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,cD=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,cE={};function cF(a,b,c=cE){if(!cy&&"zIndex"in b&&(console.warn(cD),cy=!0),!cz&&b.draggable){var d=void 0!==b.x||void 0!==b.y,e=b.onDragEnd||b.onDragMove;d&&!e&&(console.warn(cC),cz=!0)}for(var f in c)if(!cx[f]){var g="on"===f.slice(0,2),h=c[f]!==b[f];if(g&&h){var i=f.substr(2).toLowerCase();"content"===i.substr(0,7)&&(i="content"+i.substr(7,1).toUpperCase()+i.substr(8)),a.off(i,c[f])}b.hasOwnProperty(f)||a.setAttr(f,void 0)}var j=cB||b._useStrictMode,k={},l=!1;let m={};for(var f in b)if(!cx[f]){var g="on"===f.slice(0,2),n=c[f]!==b[f];if(g&&n){var i=f.substr(2).toLowerCase();"content"===i.substr(0,7)&&(i="content"+i.substr(7,1).toUpperCase()+i.substr(8)),b[f]&&(m[i]=b[f])}!g&&(b[f]!==c[f]||j&&b[f]!==a.getAttr(f))&&(l=!0,k[f]=b[f])}for(var i in l&&(a.setAttrs(k),cG(a)),m)a.off(i+cA),a.on(i+cA,m[i])}function cG(a){if(!K.autoDrawEnabled){var b=a.getLayer()||a.getStage();b&&b.batchDraw()}}var cH=a.i(90693);let cI={},cJ={};bu.Node.prototype._applyProps=cF;let cK=cw.DefaultEventPriority;function cL(a,b){"string"==typeof b?console.error(`Do not use plain text as child of Konva.Node. You are using text: ${b}`):(a.add(b),cG(a))}function cM(a,b,c){let d=bu[a];d||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),d=bu.Group);let e={},f={};for(var g in b)"ref"!==g&&("on"===g.slice(0,2)?f[g]=b[g]:e[g]=b[g]);let h=new d(e);return cF(h,f),h}function cN(a,b,c){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function cO(a,b,c){return!1}function cP(a){return a}function cQ(){return null}function cR(){return null}function cS(a,b,c,d){return cJ}function cT(){}function cU(a){}function cV(a,b){return!1}function cW(){return cI}function cX(){return cI}let cY=setTimeout,cZ=clearTimeout,c$=a=>{a()};function c_(a,b){return!1}function c0(a,b){b.parent===a?b.moveToTop():a.add(b),cG(a)}function c1(a,b){b.parent===a?b.moveToTop():a.add(b),cG(a)}function c2(a,b,c){b._remove(),a.add(b),b.setZIndex(c.getZIndex()),cG(a)}function c3(a,b,c){c2(a,b,c)}function c4(a,b){b.destroy(),b.off(cA),cG(a)}function c5(a,b){b.destroy(),b.off(cA),cG(a)}function c6(a,b,c){console.error(`Text components are not yet supported in ReactKonva. You text is: "${c}"`)}function c7(a,b,c){}function c8(a,b,c,d){cF(a,d,c)}function c9(a){a.hide(),cG(a)}function da(a){}function db(a,b){(null==b.visible||b.visible)&&a.show()}function dc(a,b){}function dd(a){}function de(){}function df(){return null}function dg(){}function dh(){}function di(){return cw.DefaultEventPriority}function dj(){}function dk(){return null}function dl(a){cK=a}function dm(){return cK}function dn(){return cw.DiscreteEventPriority}function dp(){return!1}function dq(){}function dr(){return null}function ds(){return -1.1}function dt(){}function du(){return!1}function dv(){return!0}function dw(){}function dx(){}function dy(){return null}let dz=g.default.createContext(null);function dA(){}a.s(["HostTransitionContext",0,dz,"NotPendingTransition",0,null,"afterActiveInstanceBlur",()=>dh,"appendChild",()=>c0,"appendChildToContainer",()=>c1,"appendInitialChild",()=>cL,"beforeActiveInstanceBlur",()=>dg,"cancelTimeout",0,cZ,"clearContainer",()=>dd,"commitMount",()=>c7,"commitTextUpdate",()=>c6,"commitUpdate",()=>c8,"createInstance",()=>cM,"createTextInstance",()=>cN,"detachDeletedInstance",()=>de,"finalizeInitialChildren",()=>cO,"getChildHostContext",()=>cX,"getCurrentEventPriority",()=>di,"getCurrentUpdatePriority",()=>dm,"getInstanceFromNode",()=>df,"getInstanceFromScope",()=>dk,"getPublicInstance",()=>cP,"getRootHostContext",()=>cW,"hideInstance",()=>c9,"hideTextInstance",()=>da,"insertBefore",()=>c2,"insertInContainerBefore",()=>c3,"isPrimaryRenderer",0,!1,"maySuspendCommit",()=>du,"noTimeout",0,-1,"preloadInstance",()=>dv,"prepareForCommit",()=>cQ,"preparePortalMount",()=>cR,"prepareScopeUpdate",()=>dj,"prepareUpdate",()=>cS,"removeChild",()=>c4,"removeChildFromContainer",()=>c5,"requestPostPaintCallback",()=>dt,"resetAfterCommit",()=>cT,"resetFormInstance",()=>dA,"resetTextContent",()=>cU,"resolveEventTimeStamp",()=>ds,"resolveEventType",()=>dr,"resolveUpdatePriority",()=>dn,"scheduleMicrotask",0,c$,"scheduleTimeout",0,cY,"setCurrentUpdatePriority",()=>dl,"shouldAttemptEagerTransition",()=>dp,"shouldDeprioritizeSubtree",()=>cV,"shouldSetTextContent",()=>c_,"startSuspendingCommit",()=>dw,"supportsHydration",0,!1,"supportsMicrotasks",0,!0,"supportsMutation",0,!0,"supportsPersistence",0,!1,"suspendInstance",()=>dx,"trackSchedulerEvent",()=>dq,"unhideInstance",()=>db,"unhideTextInstance",()=>dc,"waitForCommitToBeReady",()=>dy,"warnsIfNotActing",0,!1],80145),a.i(80145),a.s(["HostTransitionContext",0,dz,"NotPendingTransition",0,null,"afterActiveInstanceBlur",()=>dh,"appendChild",()=>c0,"appendChildToContainer",()=>c1,"appendInitialChild",()=>cL,"beforeActiveInstanceBlur",()=>dg,"cancelTimeout",0,cZ,"clearContainer",()=>dd,"commitMount",()=>c7,"commitTextUpdate",()=>c6,"commitUpdate",()=>c8,"createInstance",()=>cM,"createTextInstance",()=>cN,"detachDeletedInstance",()=>de,"finalizeInitialChildren",()=>cO,"getChildHostContext",()=>cX,"getCurrentEventPriority",()=>di,"getCurrentUpdatePriority",()=>dm,"getInstanceFromNode",()=>df,"getInstanceFromScope",()=>dk,"getPublicInstance",()=>cP,"getRootHostContext",()=>cW,"hideInstance",()=>c9,"hideTextInstance",()=>da,"idlePriority",()=>cH.unstable_IdlePriority,"insertBefore",()=>c2,"insertInContainerBefore",()=>c3,"isPrimaryRenderer",0,!1,"maySuspendCommit",()=>du,"noTimeout",0,-1,"now",()=>cH.unstable_now,"preloadInstance",()=>dv,"prepareForCommit",()=>cQ,"preparePortalMount",()=>cR,"prepareScopeUpdate",()=>dj,"prepareUpdate",()=>cS,"removeChild",()=>c4,"removeChildFromContainer",()=>c5,"requestPostPaintCallback",()=>dt,"resetAfterCommit",()=>cT,"resetFormInstance",()=>dA,"resetTextContent",()=>cU,"resolveEventTimeStamp",()=>ds,"resolveEventType",()=>dr,"resolveUpdatePriority",()=>dn,"run",()=>cH.unstable_runWithPriority,"scheduleMicrotask",0,c$,"scheduleTimeout",0,cY,"setCurrentUpdatePriority",()=>dl,"shouldAttemptEagerTransition",()=>dp,"shouldDeprioritizeSubtree",()=>cV,"shouldSetTextContent",()=>c_,"startSuspendingCommit",()=>dw,"supportsHydration",0,!1,"supportsMicrotasks",0,!0,"supportsMutation",0,!0,"supportsPersistence",0,!1,"suspendInstance",()=>dx,"trackSchedulerEvent",()=>dq,"unhideInstance",()=>db,"unhideTextInstance",()=>dc,"waitForCommitToBeReady",()=>dy,"warnsIfNotActing",0,!1],19066);var dB=a.i(19066),dC=a.i(63701);if(-1===g.default.version.indexOf("19"))throw Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");let dD=a=>{let b,c,d=g.default.useRef(null),e=g.default.useRef(null),f=g.default.useRef(null),h=(b=g.default.useRef({}),g.default.useLayoutEffect(()=>{b.current=a}),g.default.useLayoutEffect(()=>()=>{b.current={}},[]),b.current),i=(0,dC.useContextBridge)(),j=g.default.useRef(null),k=b=>{let{forwardedRef:c}=a;c&&("function"==typeof c?c(b):c.current=b)},l=(c=g.default.useRef(0),g.default.useMemo(()=>{c.current++},[]),c.current>1),m=()=>{k(null),dK.updateContainer(null,f.current,null),e.current?.destroy(),e.current=null};return g.default.useLayoutEffect(()=>(j.current&&(clearTimeout(j.current),j.current=null),e.current?k(e.current):(e.current=new bu.Stage({width:a.width,height:a.height,container:d.current}),k(e.current),f.current=dK.createContainer(e.current,cw.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),dK.updateContainer(g.default.createElement(i,{},a.children),f.current,null,()=>{})),()=>{l?j.current=setTimeout(m,0):m()}),[]),g.default.useLayoutEffect(()=>{k(e.current),cF(e.current,a,h),dK.updateContainer(g.default.createElement(i,{},a.children),f.current,null)}),g.default.createElement("div",{ref:d,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},dE="Layer",dF="Group",dG="Rect",dH="Circle",dI="Line",dJ="Text",dK=(0,cv.default)(dB),dL=g.default.forwardRef((a,b)=>g.default.createElement(dC.FiberProvider,{},g.default.createElement(dD,{...a,forwardedRef:b})));a.s(["Arc",0,"Arc","Arrow",0,"Arrow","Circle",0,dH,"Ellipse",0,"Ellipse","FastLayer",0,"FastLayer","Group",0,dF,"Image",0,"Image","KonvaRenderer",0,dK,"Label",0,"Label","Layer",0,dE,"Line",0,dI,"Path",0,"Path","Rect",0,dG,"RegularPolygon",0,"RegularPolygon","Ring",0,"Ring","Shape",0,"Shape","Sprite",0,"Sprite","Stage",0,dL,"Star",0,"Star","Tag",0,"Tag","Text",0,dJ,"TextPath",0,"TextPath","Transformer",0,"Transformer","Wedge",0,"Wedge","useStrictMode",0,function(a){cB=a},"version",0,"19.2.1"],86717),a.i(86717);var dM=a.i(77893);function dN(a){return String(a||"").trim().toLowerCase()}function dO(a,b){return b.some(b=>a.includes(b))}function dP(a){let b=dN(a.getAttribute("stroke")),c=dN(a.getAttribute("fill")),d=`${b} ${c}`;return dO(d,["#d97927","#fde8d1"])?"mep-electrical":dO(d,["#d95c5c","#2b77c3","#4d9c6f","#8d8d8d","#c0392b"])?"mep-plumbing":(dO(d,["#2d6f8e","#dceef4"]),"mep-hvac")}function dQ(a){let b=a.getAttribute("class")||"",c=dN(a.getAttribute("stroke")),d=dN(a.getAttribute("fill")),e=`${c} ${d}`,f=function(a){let b=a;for(;b;){let a=b.getAttribute("data-layer");if(a)return a;let c=function(a){let b=a.toLowerCase();return b.includes("layer-arch")?"architectural":b.includes("layer-struct")?"structural":b.includes("layer-mep")?"mep":b.includes("layer-axes")?"grid":b.includes("layer-dims")?"dimensions":b.includes("layer-legend")?"annotations":null}(b.getAttribute("class")||"");if(c)return c;b=b.parentElement}return null}(a);if(f)return"mep"===f?dP(a):f;let g=b.toLowerCase();return g.includes("wall")||g.includes("outline")?"architectural":g.includes("column")||g.includes("beam")||g.includes("structural")?"structural":g.includes("hvac")||g.includes("duct")?"mep-hvac":g.includes("electrical")||g.includes("panel")?"mep-electrical":g.includes("plumbing")||g.includes("pipe")||g.includes("riser")?"mep-plumbing":g.includes("grid")||g.includes("axis")?"grid":g.includes("dimension")||g.includes("dim")?"dimensions":g.includes("annotation")||g.includes("label")||g.includes("text")?"annotations":g.includes("furniture")||g.includes("equipment")?"furniture":c.includes("#ff0000")||c.includes("red")?"structural":c.includes("#00ffff")||c.includes("cyan")?"mep-hvac":c.includes("#ff00ff")||c.includes("magenta")?"mep-electrical":c.includes("#0000ff")||c.includes("blue")?"mep-plumbing":dO(e,["#8a5a3c","#6d4a34","#6f4f38"])?"structural":dO(e,["#2d6f8e","#dceef4","#d97927","#fde8d1","#d95c5c","#2b77c3","#4d9c6f","#8d8d8d","#c0392b"])?dP(a):"architectural"}function dR(a){let b=a.getAttribute("class")||"",c=a.getAttribute("id")||"",d=a.getAttribute("data-type");if(d)return d;let e=b.toLowerCase(),f=c.toLowerCase();if(e.includes("wall")||f.includes("wall"))return"wall";if(e.includes("door")||f.includes("door"))return"door";if(e.includes("window")||f.includes("window"))return"window";if(e.includes("column")||f.includes("column"))return"column";if(e.includes("beam")||f.includes("beam"))return"beam";if(e.includes("space")||f.includes("space"))return"space";if(e.includes("core")||f.includes("core"))return"core";if(e.includes("stair")||f.includes("stair"))return"stairs";if(e.includes("elevator")||f.includes("elevator"))return"elevator";if(e.includes("duct")||f.includes("duct"))return"duct";if(e.includes("pipe")||f.includes("pipe"))return"pipe";if(e.includes("grid")||f.includes("grid"))return"grid-line";if(e.includes("dimension")||f.includes("dim"))return"dimension";if(e.includes("text")||f.includes("text")||f.includes("label"))return"text";let g=a.tagName.toLowerCase();return"text"===g||"tspan"===g?"text":"rect"===g?"space":("line"===g,"wall")}function dS(a){let b=[];for(let c of a.trim().split(/\s+/)){let[a,d]=c.split(",").map(Number);isNaN(a)||isNaN(d)||b.push({x:a,y:d})}return b}let dT="#808080",dU="#00FFFF";function dV({projectId:a,runId:b,fileName:c,className:d}){let f=(0,g.useRef)(null),h=(0,g.useRef)(null),[i,j]=(0,g.useState)({width:800,height:600}),[k,l]=(0,g.useState)([]),[m,n]=(0,g.useState)(!0),[o,p]=(0,g.useState)(null),[q,r]=(0,g.useState)({width:100,height:100}),[s,t]=(0,g.useState)({gridX:[],gridY:[]}),{viewTransform:u,setViewTransform:v,backgroundColor:w,showGrid:x,layers:y,selectedElementIds:z,selectElement:A,clearSelection:B,setHoveredElement:C,hoveredElementId:D,measurementActive:E,measurementPoints:F,addMeasurementPoint:H}=(0,dM.useViewerStore)(),I=(0,g.useCallback)(()=>{let a=h.current;if(!a)return null;let b=a.getPointerPosition();return b?{x:(b.x-u.panX)/u.zoom,y:(b.y-u.panY)/u.zoom}:null},[u]);(0,g.useEffect)(()=>{let a=()=>{if(f.current){let a=f.current.getBoundingClientRect();j({width:a.width||800,height:a.height||600})}};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,g.useEffect)(()=>{let d=async()=>{try{n(!0),p(null);let d=G.apiClient.getFileUrl(a,b,c),e=await fetch(d);if(!e.ok)throw Error(`Failed to fetch plan: ${e.statusText}`);let g=await e.text();if(!g.includes("<svg"))throw Error("Invalid SVG content");let h=function(a){let b=new DOMParser().parseFromString(a,"image/svg+xml").querySelector("svg");if(!b)throw Error("Invalid SVG: No SVG element found");let c=parseFloat(b.getAttribute("width")||"800"),d=parseFloat(b.getAttribute("height")||"600"),e=null,f=b.getAttribute("viewBox");if(f){let a=f.split(/\s+/).map(Number);4===a.length&&(e={x:a[0],y:a[1],width:a[2],height:a[3]})}let g=function(a){let b={gridX:[],gridY:[],labelsX:[],labelsY:[]},c=a.getAttribute("data-grid-x"),d=a.getAttribute("data-grid-y");if(c)try{b.gridX=JSON.parse(c)}catch{}if(d)try{b.gridY=JSON.parse(d)}catch{}return(0===b.gridX.length||0===b.gridY.length)&&a.querySelectorAll('line[class*="grid"], line[class*="axis"]').forEach(a=>{let c=parseFloat(a.getAttribute("x1")||"0"),d=parseFloat(a.getAttribute("y1")||"0"),e=parseFloat(a.getAttribute("x2")||"0"),f=parseFloat(a.getAttribute("y2")||"0");.1>Math.abs(c-e)&&!b.gridX.includes(c)&&b.gridX.push(c),.1>Math.abs(d-f)&&!b.gridY.includes(d)&&b.gridY.push(d)}),b.gridX.sort((a,b)=>a-b),b.gridY.sort((a,b)=>a-b),b.labelsX=b.gridX.map((a,b)=>String.fromCharCode(65+b)),b.labelsY=b.gridY.map((a,b)=>String(b+1)),b}(b),h=[],i=0;b.querySelectorAll("line").forEach(a=>{let b=function(a,b){let c=parseFloat(a.getAttribute("x1")||"0"),d=parseFloat(a.getAttribute("y1")||"0"),e=parseFloat(a.getAttribute("x2")||"0"),f=parseFloat(a.getAttribute("y2")||"0");if(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f))return null;let g=dR(a),h=dQ(a);return{id:a.getAttribute("id")||`line-${b}`,type:g,layer:h,points:[{x:c,y:d},{x:e,y:f}],bounds:{minX:Math.min(c,e),minY:Math.min(d,f),maxX:Math.max(c,e),maxY:Math.max(d,f)},properties:{stroke:a.getAttribute("stroke")||"#FFFFFF",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")}}(a,i++);b&&h.push(b)}),b.querySelectorAll("rect").forEach(a=>{let b=function(a,b){let c=parseFloat(a.getAttribute("x")||"0"),d=parseFloat(a.getAttribute("y")||"0"),e=parseFloat(a.getAttribute("width")||"0"),f=parseFloat(a.getAttribute("height")||"0");if(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f)||0===e||0===f)return null;let g=dR(a),h=dQ(a),i={id:a.getAttribute("id")||`rect-${b}`,type:g,layer:h,points:[{x:c,y:d},{x:c+e,y:d},{x:c+e,y:d+f},{x:c,y:d+f}],bounds:{minX:c,minY:d,maxX:c+e,maxY:d+f},properties:{width:e,height:f,fill:a.getAttribute("fill"),stroke:a.getAttribute("stroke"),strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",fillColor:a.getAttribute("fill")||"transparent",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")};return"space"===g||"core"===g?{...i,type:"space",name:a.getAttribute("data-name")||a.getAttribute("id")||`Space ${b}`,area:e*f,spaceType:a.getAttribute("data-space-type")||"general",requiresDaylight:"true"===a.getAttribute("data-daylight")}:i}(a,i++);b&&h.push(b)}),b.querySelectorAll("polyline").forEach(a=>{let b=function(a,b){let c=a.getAttribute("points");if(!c)return null;let d=dS(c);if(d.length<2)return null;let e=dR(a),f=dQ(a),g=d.map(a=>a.x),h=d.map(a=>a.y);return{id:a.getAttribute("id")||`polyline-${b}`,type:e,layer:f,points:d,bounds:{minX:Math.min(...g),minY:Math.min(...h),maxX:Math.max(...g),maxY:Math.max(...h)},properties:{stroke:a.getAttribute("stroke"),strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1"),fill:a.getAttribute("fill")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",fillColor:a.getAttribute("fill")||"none",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")}}(a,i++);b&&h.push(b)}),b.querySelectorAll("polygon").forEach(a=>{let b=function(a,b){let c=a.getAttribute("points");if(!c)return null;let d=dS(c);if(d.length<3)return null;let e=dR(a),f=dQ(a),g=d.map(a=>a.x),h=d.map(a=>a.y);return{id:a.getAttribute("id")||`polygon-${b}`,type:e,layer:f,points:d,bounds:{minX:Math.min(...g),minY:Math.min(...h),maxX:Math.max(...g),maxY:Math.max(...h)},properties:{stroke:a.getAttribute("stroke"),strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1"),fill:a.getAttribute("fill")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",fillColor:a.getAttribute("fill")||"none",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")}}(a,i++);b&&h.push(b)}),b.querySelectorAll("circle").forEach(a=>{let b=function(a,b){let c=parseFloat(a.getAttribute("cx")||"0"),d=parseFloat(a.getAttribute("cy")||"0"),e=parseFloat(a.getAttribute("r")||"0");if(isNaN(c)||isNaN(d)||isNaN(e)||0===e)return null;let f=dR(a),g=dQ(a);return{id:a.getAttribute("id")||`circle-${b}`,type:f,layer:g,points:[{x:c,y:d}],bounds:{minX:c-e,minY:d-e,maxX:c+e,maxY:d+e},properties:{cx:c,cy:d,radius:e,stroke:a.getAttribute("stroke"),strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1"),fill:a.getAttribute("fill")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",fillColor:a.getAttribute("fill")||"none",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")}}(a,i++);b&&h.push(b)}),b.querySelectorAll("path").forEach(a=>{let b=function(a,b){let c,d=a.getAttribute("d");if(!d)return null;let e=[],f=/([MLHVCSQTAZ])([^MLHVCSQTAZ]*)/gi,g=0,h=0;for(;null!==(c=f.exec(d));){let a=c[1].toUpperCase(),b=c[2].trim().split(/[\s,]+/).map(Number);switch(a){case"M":case"L":b.length>=2&&(g=b[0],h=b[1],e.push({x:g,y:h}));break;case"H":b.length>=1&&(g=b[0],e.push({x:g,y:h}));break;case"V":b.length>=1&&(h=b[0],e.push({x:g,y:h}))}}if(e.length<2)return null;let i=dR(a),j=dQ(a),k=e.map(a=>a.x),l=e.map(a=>a.y);return{id:a.getAttribute("id")||`path-${b}`,type:i,layer:j,points:e,bounds:{minX:Math.min(...k),minY:Math.min(...l),maxX:Math.max(...k),maxY:Math.max(...l)},properties:{d,stroke:a.getAttribute("stroke"),strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1"),fill:a.getAttribute("fill")},strokeColor:a.getAttribute("stroke")||"#FFFFFF",fillColor:a.getAttribute("fill")||"none",strokeWidth:parseFloat(a.getAttribute("stroke-width")||"1")}}(a,i++);b&&h.push(b)}),b.querySelectorAll("text").forEach(a=>{let b=function(a,b){let c=parseFloat(a.getAttribute("x")||"0"),d=parseFloat(a.getAttribute("y")||"0"),e=a.textContent||"";if(!e.trim())return null;let f=dQ(a),g=parseFloat(a.getAttribute("font-size")||"12");return{id:a.getAttribute("id")||`text-${b}`,type:"text",layer:f,points:[{x:c,y:d}],properties:{text:e.trim(),fontSize:g,fontFamily:a.getAttribute("font-family")||"Arial",textAnchor:a.getAttribute("text-anchor")||"start",fill:a.getAttribute("fill")||"#FFFFFF"},strokeColor:"transparent",fillColor:a.getAttribute("fill")||"#FFFFFF"}}(a,i++);b&&h.push(b)});let j=e?-e.x:0,k=e?-e.y:0,l=j||k?h.map(a=>({...a,points:a.points.map(a=>({x:a.x+j,y:a.y+k})),bounds:a.bounds?{minX:a.bounds.minX+j,minY:a.bounds.minY+k,maxX:a.bounds.maxX+j,maxY:a.bounds.maxY+k}:void 0})):h;return{width:e?.width||c,height:e?.height||d,viewBox:e,elements:l,gridX:g.gridX.map(a=>a+j),gridY:g.gridY.map(a=>a+k),gridLabelsX:g.labelsX,gridLabelsY:g.labelsY}}(g);if(l(h.elements),r({width:h.width,height:h.height}),t({gridX:h.gridX,gridY:h.gridY}),f.current&&h.width>0&&h.height>0){let a=f.current.clientWidth,b=f.current.clientHeight,c=a/h.width,d=b/h.height,e=.9*Math.min(c,d);v({zoom:e,panX:(a-h.width*e)/2,panY:(b-h.height*e)/2})}}catch(a){console.error("Failed to load plan:",a),p(a instanceof Error?a.message:"Failed to load plan")}finally{n(!1)}};a&&b&&c&&d()},[a,b,c,v]);let J=(0,g.useCallback)(a=>{a.evt.preventDefault();let b=h.current;if(!b)return;let c=u.zoom,d=b.getPointerPosition();if(!d)return;let e={x:(d.x-u.panX)/c,y:(d.y-u.panY)/c},f=Math.max(.1,Math.min(50,(a.evt.deltaY>0?-1:1)>0?1.1*c:c/1.1));v({zoom:f,panX:d.x-e.x*f,panY:d.y-e.y*f})},[u,v]),K=(0,g.useCallback)(a=>{a.target===h.current&&v({panX:a.target.x(),panY:a.target.y()})},[v]),L=(0,g.useCallback)(a=>{if(a.target===h.current)if(E){let a=I();a&&H(a)}else B()},[E,I,H,B]),M=(0,g.useCallback)((a,b)=>{if(b.cancelBubble=!0,E){let a=I();a&&H(a);return}A(a,b.evt.shiftKey||b.evt.ctrlKey||b.evt.metaKey)},[E,I,H,A]),N=(0,g.useCallback)(a=>{C(a)},[C]),O=(0,g.useCallback)(()=>{C(null)},[C]),P=(0,g.useMemo)(()=>k.filter(a=>{let b=y[a.layer];return b?.visible!==!1}),[k,y]),Q=(0,g.useCallback)(()=>{if(!x)return null;let a=[],b="dark"===w?"#333333":"#CCCCCC",c=12*Math.floor(-8.333333333333334),d=12*Math.ceil((q.width+100)/12),f=12*Math.floor(-8.333333333333334),g=12*Math.ceil((q.height+100)/12);for(let h=c;h<=d;h+=12)a.push((0,e.jsx)(dI,{points:[h,f,h,g],stroke:b,strokeWidth:.5/u.zoom,opacity:.3},`grid-v-${h}`));for(let h=f;h<=g;h+=12)a.push((0,e.jsx)(dI,{points:[c,h,d,h],stroke:b,strokeWidth:.5/u.zoom,opacity:.3},`grid-h-${h}`));return s.gridX.forEach((b,c)=>{a.push((0,e.jsx)(dI,{points:[b,-50,b,q.height+50],stroke:dT,strokeWidth:.3/u.zoom,dash:[10/u.zoom,5/u.zoom],opacity:.5},`struct-grid-x-${c}`))}),s.gridY.forEach((b,c)=>{a.push((0,e.jsx)(dI,{points:[-50,b,q.width+50,b],stroke:dT,strokeWidth:.3/u.zoom,dash:[10/u.zoom,5/u.zoom],opacity:.5},`struct-grid-y-${c}`))}),(0,e.jsx)(dF,{children:a})},[x,w,q,s,u.zoom]),R=(0,g.useCallback)(a=>{let b=z.includes(a.id),c=D===a.id,d=b?"#00FF00":c?"#FFFF00":a.strokeColor||"#FFFFFF",f=(a.strokeWidth||1)/u.zoom*(b?1.5:1),g={key:a.id,onClick:b=>M(a.id,b),onMouseEnter:()=>N(a.id),onMouseLeave:O};if(1===a.points.length){let b=a.properties.radius||2;return(0,e.jsx)(dH,{...g,x:a.points[0].x,y:a.points[0].y,radius:b,stroke:d,strokeWidth:f,fill:a.fillColor||"transparent"})}if(2===a.points.length)return(0,e.jsx)(dI,{...g,points:[a.points[0].x,a.points[0].y,a.points[1].x,a.points[1].y],stroke:d,strokeWidth:f,hitStrokeWidth:Math.max(3*f,5/u.zoom)});if(4===a.points.length&&"space"===a.type){let c=Math.min(...a.points.map(a=>a.x)),h=Math.min(...a.points.map(a=>a.y)),i=Math.max(...a.points.map(a=>a.x)),j=Math.max(...a.points.map(a=>a.y)),k="dark"===w?"rgba(100, 100, 150, 0.1)":"rgba(200, 200, 220, 0.2)";return(0,e.jsxs)(dF,{children:[(0,e.jsx)(dG,{...g,x:c,y:h,width:i-c,height:j-h,stroke:d,strokeWidth:f,fill:b?"rgba(0, 255, 0, 0.1)":k}),(0,e.jsx)(dJ,{x:c+5,y:h+5,text:a.properties.name||a.id,fontSize:Math.max(8/u.zoom,10),fill:"dark"===w?"#AAAAAA":"#666666"})]},a.id)}let h=a.points.flatMap(a=>[a.x,a.y]),i="space"===a.type||"core"===a.type||"none"!==a.fillColor;return(0,e.jsx)(dI,{...g,points:h,stroke:d,strokeWidth:f,fill:i?a.fillColor||"transparent":void 0,closed:i,hitStrokeWidth:Math.max(3*f,5/u.zoom)})},[z,D,u.zoom,w,M,N,O]),S=(0,g.useCallback)(()=>{if(!E||0===F.length)return null;let a=[];for(let b=0;b<F.length-1;b++){let c=F[b],d=F[b+1],f=d.x-c.x,g=d.y-c.y,h=Math.sqrt(f*f+g*g),i=(c.x+d.x)/2,j=(c.y+d.y)/2;a.push((0,e.jsxs)(dF,{children:[(0,e.jsx)(dI,{points:[c.x,c.y,d.x,d.y],stroke:dU,strokeWidth:2/u.zoom}),(0,e.jsx)(dH,{x:c.x,y:c.y,radius:4/u.zoom,fill:dU}),(0,e.jsx)(dH,{x:d.x,y:d.y,radius:4/u.zoom,fill:dU}),(0,e.jsx)(dJ,{x:i,y:j-15/u.zoom,text:`${h.toFixed(2)} m`,fontSize:14/u.zoom,fill:"#FFFF00",align:"center"})]},`measure-${b}`))}if(F.length>0){let b=F[F.length-1];a.push((0,e.jsx)(dH,{x:b.x,y:b.y,radius:4/u.zoom,fill:dU},"measure-last"))}return(0,e.jsx)(dF,{children:a})},[E,F,u.zoom]);if(m)return(0,e.jsx)("div",{className:`flex items-center justify-center h-full ${d}`,children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,e.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,e.jsx)("span",{className:"text-gray-400",children:"Loading floor plan..."})]})});if(o)return(0,e.jsx)("div",{className:`flex items-center justify-center h-full ${d}`,children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center max-w-md",children:[(0,e.jsx)("div",{className:"text-red-500 text-5xl",children:"!"}),(0,e.jsx)("h3",{className:"text-xl font-semibold text-red-400",children:"Failed to load plan"}),(0,e.jsx)("p",{className:"text-gray-400",children:o})]})});let T="dark"===w?"#1a1a2e":"#f5f5f5";return(0,e.jsxs)("div",{ref:f,className:`relative w-full h-full overflow-hidden ${d}`,style:{backgroundColor:T},children:[(0,e.jsxs)(dL,{ref:h,width:i.width,height:i.height,x:u.panX,y:u.panY,scaleX:u.zoom,scaleY:u.zoom,rotation:u.rotation,draggable:!0,onWheel:J,onDragEnd:K,onClick:L,style:{cursor:E?"crosshair":"grab"},children:[(0,e.jsx)(dE,{children:Q()}),(0,e.jsx)(dE,{children:P.map(R)}),(0,e.jsx)(dE,{children:S()})]}),(0,e.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded text-sm",children:[(100*u.zoom).toFixed(0),"%"]}),(0,e.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded text-xs font-mono",children:[q.width.toFixed(1),"  ",q.height.toFixed(1)," m"]})]})}var dW=a.i(30455),dX=a.i(81211);let dY="false"!==process.env.NEXT_PUBLIC_USE_NEW_VIEWERS,dZ=[{id:"select",icon:j,label:"Select",labelAr:""},{id:"pan",icon:h.Layout,label:"Pan",labelAr:""},{id:"wall",icon:k,label:"Wall",labelAr:""},{id:"door",icon:l,label:"Door",labelAr:""},{id:"window",icon:m.Maximize2,label:"Window",labelAr:""},{id:"dimension",icon:u.Ruler,label:"Dimension",labelAr:""},{id:"text",icon:n,label:"Text",labelAr:""},{id:"erase",icon:o,label:"Erase",labelAr:""}],d$=[{id:"architectural",label:"Architectural",labelAr:"",color:"#FFFFFF"},{id:"structural",label:"Structural",labelAr:"",color:"#FF0000"},{id:"mep-hvac",label:"MEP - HVAC",labelAr:"",color:"#00FFFF"},{id:"mep-electrical",label:"MEP - Electrical",labelAr:"",color:"#FF00FF"},{id:"mep-plumbing",label:"MEP - Plumbing",labelAr:"",color:"#0000FF"},{id:"annotations",label:"Annotations",labelAr:"",color:"#00FF00"},{id:"grid",label:"Grid",labelAr:"",color:"#808080"},{id:"dimensions",label:"Dimensions",labelAr:"",color:"#FFFF00"}];function d_(){let a=(0,f.useParams)(),{language:b}=(0,dW.useUIStore)(),{project:c,run:d,setProject:i,setRun:j}=(0,dX.useProjectStore)(),{activeTool:k,setActiveTool:l,layers:m,toggleLayerVisibility:n,setLayerLocked:o,backgroundColor:F,setBackgroundColor:I,showGrid:J,toggleGrid:K,viewTransform:L,zoomIn:M,zoomOut:N,zoomToFit:O,rotateView:P,measurementActive:Q,startMeasurement:R,clearMeasurement:S,selectedElementIds:T}=(0,dM.useViewerStore)(),U="ar"===b,V=(Array.isArray(a.id)?a.id[0]:a.id)??"",[W,X]=(0,g.useState)(null),[Y,Z]=(0,g.useState)({available:!0,message:""});(0,g.useEffect)(()=>{let a=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement))switch(a.key.toLowerCase()){case"escape":S();break;case"v":case"1":l("select");break;case"h":case"2":l("pan");break;case"m":Q?S():R();break;case"g":K();break;case"r":P(90);break;case"f":O();break;case"+":case"=":M();break;case"-":N()}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[Q,l,K,P,O,M,N,R,S]),(0,g.useEffect)(()=>{(async()=>{await G.apiClient.checkBackend(),Z(G.apiClient.getBackendStatus());let a=await G.apiClient.getProject(V);if(a){i(a);let b=await G.apiClient.getLatestRunForProject(V);b&&j(b)}})()},[V,i,j]);let $=async()=>{await G.apiClient.retryConnection()?window.location.reload():Z(G.apiClient.getBackendStatus())};(0,g.useEffect)(()=>{(async()=>{if(d?.id)try{X(null);let a=(await G.apiClient.getRunArtifacts(d.id)).find(a=>"plan"===a.kind||"plan_svg"===a.kind||a.file_name?.endsWith("_plan.svg"));if(a)return void X(a.file_name);let b=await G.apiClient.getState().catch(()=>null),e=b?.outputs?.plan_svg_file,f=b?.run?.id?String(b.run.id):"",g=b?.project?.id?String(b.project.id):"";e&&f&&g&&f===String(d.id)&&g===String(c?.id)&&X(e)}catch(a){console.error("Failed to load artifacts:",a)}})()},[d?.id,c?.id]);let _=(0,g.useCallback)(()=>{Q?S():R()},[Q,R,S]);return(0,e.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs font-bold uppercase tracking-[3px] text-[var(--accent-2)] mb-1",children:c?.name||(U?"":"Project")}),(0,e.jsx)("h1",{className:"text-2xl font-bold text-[var(--ink)]",children:U?" ":"Plan Editor"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("div",{className:"flex items-center gap-1 bg-[var(--surface-2)] rounded-lg p-1 border border-[var(--line)]",children:[(0,e.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:N,title:"Zoom Out (-)",children:(0,e.jsx)(s,{className:"w-4 h-4"})}),(0,e.jsxs)("span",{className:"text-xs text-[var(--ink-soft)] min-w-[50px] text-center",children:[(100*L.zoom).toFixed(0),"%"]}),(0,e.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:M,title:"Zoom In (+)",children:(0,e.jsx)(r,{className:"w-4 h-4"})}),(0,e.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:O,title:"Fit View (F)",children:(0,e.jsx)(B.Home,{className:"w-4 h-4"})})]}),(0,e.jsx)(E.Button,{variant:"outline",size:"sm",onClick:()=>P(90),title:"Rotate 90 (R)",children:(0,e.jsx)(t.RotateCcw,{className:"w-4 h-4"})}),(0,e.jsx)(E.Button,{variant:J?"primary":"outline",size:"sm",onClick:K,title:"Toggle Grid (G)",children:(0,e.jsx)(p.default,{className:"w-4 h-4"})}),(0,e.jsx)(E.Button,{variant:Q?"primary":"outline",size:"sm",onClick:_,title:"Measure Tool (M)",children:(0,e.jsx)(u.Ruler,{className:"w-4 h-4"})}),(0,e.jsx)(E.Button,{variant:"outline",size:"sm",onClick:()=>I("dark"===F?"light":"dark"),title:"Toggle Background",children:"dark"===F?(0,e.jsx)(v.Sun,{className:"w-4 h-4"}):(0,e.jsx)(w.Moon,{className:"w-4 h-4"})})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-[72px_1fr_280px] gap-4",children:[(0,e.jsx)(D.Card,{className:"h-fit",children:(0,e.jsx)(D.CardContent,{className:"p-2",children:(0,e.jsx)("div",{className:"space-y-2",children:dZ.map(a=>{let b=a.icon,c=a.id===k;return(0,e.jsx)("button",{onClick:()=>l(a.id),className:(0,C.cn)("w-12 h-12 rounded-[var(--radius-sm)] border flex items-center justify-center transition-all",c?"bg-[rgba(15,76,129,0.12)] border-[var(--accent)] text-[var(--accent)]":"bg-[var(--surface-2)] border-[var(--line)] text-[var(--ink-soft)] hover:border-[var(--accent)]"),title:`${U?a.labelAr:a.label}`,children:(0,e.jsx)(b,{className:"w-5 h-5"})},a.id)})})})}),(0,e.jsx)(D.Card,{className:"min-h-[600px] overflow-hidden",children:(0,e.jsx)(D.CardContent,{className:"p-0 h-full",children:W&&c?.id&&d?.id?dY?(0,e.jsx)(dV,{projectId:c.id,runId:d.id,fileName:W,className:"w-full h-[600px]"}):(0,e.jsx)(H,{projectId:c.id,runId:d.id,fileName:W,className:"w-full h-[600px] rounded-[var(--radius-md)]"}):(0,e.jsx)("div",{className:(0,C.cn)("w-full h-[600px] rounded-[var(--radius-md)] border border-[var(--line)] relative overflow-hidden","dark"===F?"bg-[#1a1a2e]":"bg-[#f8f6f1]"),style:{backgroundImage:J?`
                      linear-gradient(0deg, rgba(100,110,125,0.14) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(100,110,125,0.14) 1px, transparent 1px)
                    `:void 0,backgroundSize:"24px 24px"},children:(0,e.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center text-[var(--ink-faint)] max-w-md px-4",children:[(0,e.jsx)(h.Layout,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),Y.available?d?.id?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"text-lg font-medium",children:U?"  ...":"Loading plan..."}),(0,e.jsx)("p",{className:"text-sm mt-2",children:U?"    ":"Please wait while files are loading"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"text-lg font-medium",children:U?"   ":"No Active Run"}),(0,e.jsx)("p",{className:"text-sm mt-2",children:U?"    ":"Go to Orchestrator to start generation"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"text-lg font-medium text-amber-600",children:U?"  ":"Backend Not Connected"}),(0,e.jsx)("p",{className:"text-sm mt-2",children:U?"     ":"Start the backend server to view generated plans"}),(0,e.jsx)(E.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:$,children:U?" ":"Retry Connection"})]})]})})})})}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(D.Card,{children:(0,e.jsxs)(D.CardContent,{className:"p-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,e.jsx)("h3",{className:"font-semibold text-[var(--ink)]",children:U?"":"Layers"}),(0,e.jsx)(q.Layers,{className:"w-4 h-4 text-[var(--ink-soft)]"})]}),(0,e.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:d$.map(a=>{let b=m[a.id],c=b?.visible!==!1,d=b?.locked===!0;return(0,e.jsxs)("div",{className:(0,C.cn)("flex items-center gap-2 p-2 rounded-[var(--radius-sm)] border transition-all",c?"bg-[var(--surface-2)] border-[var(--line)]":"bg-[var(--bg-2)] border-transparent opacity-60"),children:[(0,e.jsx)("button",{onClick:()=>n(a.id),className:"p-1 hover:bg-[var(--bg-2)] rounded",title:c?"Hide Layer":"Show Layer",children:c?(0,e.jsx)(x.Eye,{className:"w-4 h-4 text-[var(--ink-soft)]"}):(0,e.jsx)(y.EyeOff,{className:"w-4 h-4 text-[var(--ink-faint)]"})}),(0,e.jsx)("button",{onClick:()=>o(a.id,!d),className:"p-1 hover:bg-[var(--bg-2)] rounded",title:d?"Unlock Layer":"Lock Layer",children:d?(0,e.jsx)(z,{className:"w-4 h-4 text-amber-500"}):(0,e.jsx)(A,{className:"w-4 h-4 text-[var(--ink-faint)]"})}),(0,e.jsx)("span",{className:"w-3 h-3 rounded-full border border-white/20",style:{backgroundColor:a.color}}),(0,e.jsx)("span",{className:"text-sm text-[var(--ink)] flex-1",children:U?a.labelAr:a.label})]},a.id)})})]})}),(0,e.jsx)(D.Card,{children:(0,e.jsxs)(D.CardContent,{className:"p-4",children:[(0,e.jsx)("h3",{className:"font-semibold text-[var(--ink)] mb-3",children:U?"":"Properties"}),T.length>0?(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("p",{className:"text-sm text-[var(--accent)]",children:[T.length," ",U?` `:`element${T.length>1?"s":""} selected`]}),(0,e.jsxs)("div",{className:"text-xs text-[var(--ink-soft)] space-y-1",children:[T.slice(0,5).map(a=>(0,e.jsx)("div",{className:"truncate",children:a},a)),T.length>5&&(0,e.jsxs)("div",{className:"text-[var(--ink-faint)]",children:["+",T.length-5," more..."]})]})]}):(0,e.jsx)("p",{className:"text-sm text-[var(--ink-soft)]",children:U?"    ":"Click an element to view properties"})]})}),(0,e.jsx)(D.Card,{children:(0,e.jsxs)(D.CardContent,{className:"p-4",children:[(0,e.jsx)("h3",{className:"font-semibold text-[var(--ink)] mb-3 text-sm",children:U?"  ":"Keyboard Shortcuts"}),(0,e.jsxs)("div",{className:"text-xs text-[var(--ink-soft)] space-y-1",children:[(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"V / 1"}),(0,e.jsx)("span",{children:U?"":"Select"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"M"}),(0,e.jsx)("span",{children:U?"":"Measure"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"G"}),(0,e.jsx)("span",{children:U?"":"Grid"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"R"}),(0,e.jsx)("span",{children:U?"":"Rotate"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"F"}),(0,e.jsx)("span",{children:U?"":"Fit"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"+/-"}),(0,e.jsx)("span",{children:U?"":"Zoom"})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("span",{children:"Esc"}),(0,e.jsx)("span",{children:U?"":"Cancel"})]})]})]})})]})]})]})}a.s(["default",()=>d_],5032)}];

//# sourceMappingURL=_f0fbc13f._.js.map